[2019-07-18 13:36:34.524] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - search.filters { models: [ 'ticket' ], ticket: { id: { '$in': [Array] } } }
[2019-07-18 13:36:34.525] [Level { level: 20000, levelStr: 'INFO' }] [default] - checkKey:  id ticket
[2019-07-18 13:36:34.526] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - search.order:  [ [ [ 'date', 'desc' ] ] ]
[2019-07-18 13:36:34.527] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - checkedModels:  [ 'ticket', 'ticket' ]
[2019-07-18 13:36:34.527] [Level { level: 20000, levelStr: 'INFO' }] [default] - deleteUnnecessaryIncludes:
[2019-07-18 13:36:34.528] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - search:  {"fields":{"customer":["id","name"],"equipment":["id","endWarrantyDate","id","endCBSWarrantyDate","id","serialNumber","id","regNumber","id","bnaFlag"],"equipmentType":["id","name","model"],"performer":["id","name"],"ticket":["id","vendorId","typeId","number","serviceTypeId","date","warrantyFlag","cbsWarrantyFlag","commonFieldString","statusId","cityId","subcontractorFlag","reasonDescription"],"timeout":["timeout"],"models":["customer","equipment","equipmentType","performer","ticket","timeout"]},"filters":{"models":["ticket"],"ticket":{"id":{"$in":[497078,497077,497076,497075,497074,497073,497072,497071,497070,497069,497068,497067,497066,497065,497064,497063,497062,497061,497060,497059,497058,497057,497056,497055,497054,497053,497052,497051,497050,497049,497048,497047,497046,497045,497044,497043,497042,497041,497040,497039,497038,497037,497036,497035,497034,497033,497032,497031,497030,497029,497028,497027,497026,497025,497023,497022,497021,497020,497019,497018,497017,497015,497014,497013,497012,497011,497010,497009,497008,497007,497006,497004,497003,497002,497001,497000,496999,496998,496997,496996,496995,496994,496993,496992,496991,496990,496989,496988,496987,496986,496984,496983,496982,496981,496979,496977,496976,496975,496974,496972]}}},"sort":{"ticket":{"date":"desc"},"models":["ticket"]},"checkedModels":["ticket","ticket"],"order":[[["date","desc"]]]}
[2019-07-18 13:36:34.528] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - [ 'ticket' ]
[2019-07-18 13:36:34.529] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - include:  [
  {
    model: [Function: status] {
      sequelize: [Sequelize],
      options: [Object],
      associations: {},
      underscored: undefined,
      tableName: 'status',
      _schema: null,
      _schemaDelimiter: '',
      rawAttributes: [Object],
      primaryKeys: [Object],
      _timestampAttributes: {},
      _readOnlyAttributes: [],
      _hasReadOnlyAttributes: 0,
      _isReadOnlyAttribute: [Function],
      _dataTypeChanges: {},
      _dataTypeSanitizers: {},
      _booleanAttributes: [],
      _dateAttributes: [],
      _hstoreAttributes: [],
      _rangeAttributes: [],
      _jsonAttributes: [],
      _geometryAttributes: [],
      _virtualAttributes: [],
      _defaultValues: [Object],
      fieldRawAttributesMap: [Object],
      fieldAttributeMap: {},
      uniqueKeys: {},
      _hasBooleanAttributes: false,
      _isBooleanAttribute: [Function],
      _hasDateAttributes: false,
      _isDateAttribute: [Function],
      _hasHstoreAttributes: false,
      _isHstoreAttribute: [Function],
      _hasRangeAttributes: false,
      _isRangeAttribute: [Function],
      _hasJsonAttributes: false,
      _isJsonAttribute: [Function],
      _hasVirtualAttributes: false,
      _isVirtualAttribute: [Function],
      _hasGeometryAttributes: false,
      _isGeometryAttribute: [Function],
      _hasDefaultValues: true,
      attributes: [Object],
      tableAttributes: [Object],
      primaryKeyAttributes: [Array],
      primaryKeyAttribute: 'id',
      primaryKeyField: 'id',
      _hasPrimaryKeys: true,
      _isPrimaryKey: [Function],
      autoIncrementAttribute: 'id',
      _scope: {},
      _scopeNames: [Array],
      Values: [Object],
      getNextStatus: [Function]
    },
    required: true,
    attributes: []
  },
  {
    as: 'performer',
    model: [Function: user] {
      sequelize: [Sequelize],
      options: [Object],
      associations: [Object],
      underscored: undefined,
      tableName: 'users',
      _schema: null,
      _schemaDelimiter: '',
      rawAttributes: [Object],
      primaryKeys: [Object],
      _timestampAttributes: {},
      _readOnlyAttributes: [],
      _hasReadOnlyAttributes: 0,
      _isReadOnlyAttribute: [Function],
      _dataTypeChanges: {},
      _dataTypeSanitizers: [Object],
      _booleanAttributes: [Array],
      _dateAttributes: [],
      _hstoreAttributes: [],
      _rangeAttributes: [],
      _jsonAttributes: [],
      _geometryAttributes: [],
      _virtualAttributes: [],
      _defaultValues: [Object],
      fieldRawAttributesMap: [Object],
      fieldAttributeMap: [Object],
      uniqueKeys: {},
      _hasBooleanAttributes: true,
      _isBooleanAttribute: [Function],
      _hasDateAttributes: false,
      _isDateAttribute: [Function],
      _hasHstoreAttributes: false,
      _isHstoreAttribute: [Function],
      _hasRangeAttributes: false,
      _isRangeAttribute: [Function],
      _hasJsonAttributes: false,
      _isJsonAttribute: [Function],
      _hasVirtualAttributes: false,
      _isVirtualAttribute: [Function],
      _hasGeometryAttributes: false,
      _isGeometryAttribute: [Function],
      _hasDefaultValues: true,
      attributes: [Object],
      tableAttributes: [Object],
      primaryKeyAttributes: [Array],
      primaryKeyAttribute: 'id',
      primaryKeyField: 'id',
      _hasPrimaryKeys: true,
      _isPrimaryKey: [Function],
      autoIncrementAttribute: 'id',
      _scope: {},
      _scopeNames: [Array],
      RoleValues: [Object],
      getUserRole: [AsyncFunction],
      getUserRoleId: [AsyncFunction],
      autorize: [AsyncFunction],
      getByParams: [AsyncFunction]
    },
    attributes: [ 'id', 'name' ]
  },
  {
    include: { attributes: [Array], model: [Function] },
    model: [Function: equipment] {
      sequelize: [Sequelize],
      options: [Object],
      associations: [Object],
      underscored: undefined,
      tableName: 'equipment',
      _schema: null,
      _schemaDelimiter: '',
      rawAttributes: [Object],
      primaryKeys: [Object],
      _timestampAttributes: {},
      _readOnlyAttributes: [],
      _hasReadOnlyAttributes: 0,
      _isReadOnlyAttribute: [Function],
      _dataTypeChanges: [Object],
      _dataTypeSanitizers: [Object],
      _booleanAttributes: [],
      _dateAttributes: [Array],
      _hstoreAttributes: [],
      _rangeAttributes: [],
      _jsonAttributes: [],
      _geometryAttributes: [],
      _virtualAttributes: [],
      _defaultValues: [Object],
      fieldRawAttributesMap: [Object],
      fieldAttributeMap: [Object],
      uniqueKeys: {},
      _hasBooleanAttributes: false,
      _isBooleanAttribute: [Function],
      _hasDateAttributes: true,
      _isDateAttribute: [Function],
      _hasHstoreAttributes: false,
      _isHstoreAttribute: [Function],
      _hasRangeAttributes: false,
      _isRangeAttribute: [Function],
      _hasJsonAttributes: false,
      _isJsonAttribute: [Function],
      _hasVirtualAttributes: false,
      _isVirtualAttribute: [Function],
      _hasGeometryAttributes: false,
      _isGeometryAttribute: [Function],
      _hasDefaultValues: true,
      attributes: [Object],
      tableAttributes: [Object],
      primaryKeyAttributes: [Array],
      primaryKeyAttribute: 'id',
      primaryKeyField: 'id',
      _hasPrimaryKeys: true,
      _isPrimaryKey: [Function],
      autoIncrementAttribute: 'id',
      _scope: {},
      _scopeNames: [Array],
      Values: [Object],
      myAssociations: [Array]
    },
    attributes: [
      'id',
      'endWarrantyDate',
      'id',
      'endCBSWarrantyDate',
      'id',
      'serialNumber',
      'id',
      'regNumber',
      'id',
      'bnaFlag'
    ]
  },
  {
    model: [Function: customer] {
      sequelize: [Sequelize],
      options: [Object],
      associations: {},
      underscored: undefined,
      tableName: 'customers',
      _schema: null,
      _schemaDelimiter: '',
      rawAttributes: [Object],
      primaryKeys: [Object],
      _timestampAttributes: {},
      _readOnlyAttributes: [],
      _hasReadOnlyAttributes: 0,
      _isReadOnlyAttribute: [Function],
      _dataTypeChanges: {},
      _dataTypeSanitizers: {},
      _booleanAttributes: [],
      _dateAttributes: [],
      _hstoreAttributes: [],
      _rangeAttributes: [],
      _jsonAttributes: [],
      _geometryAttributes: [],
      _virtualAttributes: [],
      _defaultValues: [Object],
      fieldRawAttributesMap: [Object],
      fieldAttributeMap: [Object],
      uniqueKeys: {},
      _hasBooleanAttributes: false,
      _isBooleanAttribute: [Function],
      _hasDateAttributes: false,
      _isDateAttribute: [Function],
      _hasHstoreAttributes: false,
      _isHstoreAttribute: [Function],
      _hasRangeAttributes: false,
      _isRangeAttribute: [Function],
      _hasJsonAttributes: false,
      _isJsonAttribute: [Function],
      _hasVirtualAttributes: false,
      _isVirtualAttribute: [Function],
      _hasGeometryAttributes: false,
      _isGeometryAttribute: [Function],
      _hasDefaultValues: true,
      attributes: [Object],
      tableAttributes: [Object],
      primaryKeyAttributes: [Array],
      primaryKeyAttribute: 'id',
      primaryKeyField: 'id',
      _hasPrimaryKeys: true,
      _isPrimaryKey: [Function],
      autoIncrementAttribute: 'id',
      _scope: {},
      _scopeNames: [Array],
      Values: [Object],
      getByName: [Function]
    },
    attributes: [ 'id', 'name' ]
  },
  {
    include: { model: [Function], attributes: [] },
    where: { activeFlag: 1 },
    required: false,
    model: [Function: timeout] {
      sequelize: [Sequelize],
      options: [Object],
      associations: [Object],
      underscored: undefined,
      tableName: 'order_timeout',
      _schema: null,
      _schemaDelimiter: '',
      rawAttributes: [Object],
      primaryKeys: [Object],
      _timestampAttributes: {},
      _readOnlyAttributes: [],
      _hasReadOnlyAttributes: 0,
      _isReadOnlyAttribute: [Function],
      _dataTypeChanges: [Object],
      _dataTypeSanitizers: [Object],
      _booleanAttributes: [],
      _dateAttributes: [Array],
      _hstoreAttributes: [],
      _rangeAttributes: [],
      _jsonAttributes: [],
      _geometryAttributes: [],
      _virtualAttributes: [],
      _defaultValues: [Object],
      fieldRawAttributesMap: [Object],
      fieldAttributeMap: [Object],
      uniqueKeys: {},
      _hasBooleanAttributes: false,
      _isBooleanAttribute: [Function],
      _hasDateAttributes: true,
      _isDateAttribute: [Function],
      _hasHstoreAttributes: false,
      _isHstoreAttribute: [Function],
      _hasRangeAttributes: false,
      _isRangeAttribute: [Function],
      _hasJsonAttributes: false,
      _isJsonAttribute: [Function],
      _hasVirtualAttributes: false,
      _isVirtualAttribute: [Function],
      _hasGeometryAttributes: false,
      _isGeometryAttribute: [Function],
      _hasDefaultValues: true,
      attributes: [Object],
      tableAttributes: [Object],
      primaryKeyAttributes: [Array],
      primaryKeyAttribute: 'ticketId',
      primaryKeyField: 'order_id',
      _hasPrimaryKeys: true,
      _isPrimaryKey: [Function],
      autoIncrementAttribute: null,
      _scope: {},
      _scopeNames: [Array],
      transactionCreateTimeout: [AsyncFunction],
      create: [Function],
      getAll: [AsyncFunction],
      deactivate: [Function],
      myAssociations: [Array]
    },
    attributes: [ 'timeout' ]
  }
]
[2019-07-18 13:36:34.539] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - params:  {
  raw: true,
  model: [Function: ticket] {
    sequelize: Sequelize {
      options: [Object],
      config: [Object],
      dialect: [MysqlDialect],
      queryInterface: [QueryInterface],
      models: [Object],
      modelManager: [ModelManager],
      connectionManager: [ConnectionManager],
      importCache: [Object],
      test: [Object]
    },
    options: {
      timestamps: false,
      validate: {},
      freezeTableName: false,
      underscored: false,
      underscoredAll: false,
      paranoid: false,
      rejectOnEmpty: false,
      whereCollection: [Object],
      schema: null,
      schemaDelimiter: '',
      defaultScope: {},
      scopes: [],
      indexes: [],
      name: [Object],
      omitNull: false,
      tableName: 'orders',
      sequelize: [Sequelize],
      hooks: {},
      uniqueKeys: {}
    },
    associations: {
      status: [BelongsTo],
      performer: [BelongsTo],
      city: [BelongsTo],
      equipment: [BelongsTo],
      customer: [BelongsTo],
      customerPerson: [BelongsTo],
      serviceType: [BelongsTo],
      vendor: [BelongsTo],
      seller: [BelongsTo],
      sellerPerson: [BelongsTo],
      contract: [BelongsTo],
      supplier: [BelongsTo],
      reason: [BelongsTo],
      timeout: [BelongsTo],
      generalParts: [HasMany],
      needParts: [HasMany],
      instParts: [HasMany],
      comments: [HasMany],
      history: [HasMany]
    },
    underscored: undefined,
    tableName: 'orders',
    _schema: null,
    _schemaDelimiter: '',
    rawAttributes: {
      id: [Object],
      parentId: [Object],
      typeId: [Object],
      statusId: [Object],
      sellerId: [Object],
      sellerPersonId: [Object],
      number: [Object],
      invoiceDate: [Object],
      numberFromCustomer: [Object],
      date: [Object],
      cityId: [Object],
      customerId: [Object],
      customerPersonId: [Object],
      contractId: [Object],
      vendorId: [Object],
      equipmentId: [Object],
      partName: [Object],
      partNumber: [Object],
      serialNumber: [Object],
      blockNumber: [Object],
      warrantyFlag: [Object],
      cbsWarrantyFlag: [Object],
      commonFieldString: [Object],
      equipSupplierId: [Object],
      serviceTypeId: [Object],
      description: [Object],
      ownerId: [Object],
      performerId: [Object],
      billNumber: [Object],
      billDate: [Object],
      onceFlag: [Object],
      checkedFlag: [Object],
      paidFlag: [Object],
      subcontractorFlag: [Object],
      retryFlag: [Object],
      archivedFlag: [Object],
      frozenFlag: [Object],
      failDescription: [Object],
      repairPrice: [Object],
      diagPrice: [Object],
      reasonId: [Object],
      reasonDescription: [Object],
      hash: [Object],
      detailsHash: [Object],
      perm: [Object]
    },
    primaryKeys: { id: [Object] },
    _timestampAttributes: {},
    _readOnlyAttributes: [],
    _hasReadOnlyAttributes: 0,
    _isReadOnlyAttribute: [Function: memoized] { cache: [MapCache] },
    _dataTypeChanges: {
      invoiceDate: [Function: _isChanged],
      date: [Function: _isChanged],
      billDate: [Function: _isChanged]
    },
    _dataTypeSanitizers: {
      invoiceDate: [Function: _sanitize],
      date: [Function: _sanitize],
      billDate: [Function: _sanitize]
    },
    _booleanAttributes: [],
    _dateAttributes: [ 'invoiceDate', 'date', 'billDate' ],
    _hstoreAttributes: [],
    _rangeAttributes: [],
    _jsonAttributes: [],
    _geometryAttributes: [],
    _virtualAttributes: [ 'perm' ],
    _defaultValues: {
      parentId: [Function: wrapper],
      sellerId: [Function: wrapper],
      sellerPersonId: [Function: wrapper],
      invoiceDate: [Function: wrapper],
      numberFromCustomer: [Function: wrapper],
      customerPersonId: [Function: wrapper],
      contractId: [Function: wrapper],
      equipmentId: [Function: wrapper],
      partName: [Function: wrapper],
      partNumber: [Function: wrapper],
      serialNumber: [Function: wrapper],
      blockNumber: [Function: wrapper],
      warrantyFlag: [Function: wrapper],
      cbsWarrantyFlag: [Function: wrapper],
      commonFieldString: [Function: wrapper],
      equipSupplierId: [Function: wrapper],
      description: [Function: wrapper],
      performerId: [Function: wrapper],
      billNumber: [Function: wrapper],
      billDate: [Function: wrapper],
      onceFlag: [Function: wrapper],
      checkedFlag: [Function: wrapper],
      paidFlag: [Function: wrapper],
      subcontractorFlag: [Function: wrapper],
      retryFlag: [Function: wrapper],
      archivedFlag: [Function: wrapper],
      frozenFlag: [Function: wrapper],
      failDescription: [Function: wrapper],
      repairPrice: [Function: wrapper],
      diagPrice: [Function: wrapper],
      reasonId: [Function: wrapper],
      reasonDescription: [Function: wrapper],
      hash: [Function: wrapper],
      detailsHash: [Function: wrapper]
    },
    fieldRawAttributesMap: {
      id: [Object],
      parentorderid: [Object],
      ordertypeid: [Object],
      statusid: [Object],
      seller_id: [Object],
      seller_cperson_id: [Object],
      ordernumber: [Object],
      invoicedate: [Object],
      onbycustomer: [Object],
      orderdate: [Object],
      cityid: [Object],
      customerid: [Object],
      cpersonid: [Object],
      contractid: [Object],
      vendorid: [Object],
      equipmentid: [Object],
      partname: [Object],
      partnumber: [Object],
      serialnumber: [Object],
      blocknumber: [Object],
      warranty: [Object],
      cbswarranty: [Object],
      sordernumber: [Object],
      equipsupplierid: [Object],
      servicetypeid: [Object],
      description: [Object],
      ownerid: [Object],
      performerid: [Object],
      billnumber: [Object],
      billdate: [Object],
      once: [Object],
      checked: [Object],
      paid_by_customer: [Object],
      subcontractor: [Object],
      retry: [Object],
      archived: [Object],
      frozen: [Object],
      fail_description: [Object],
      price: [Object],
      diagnostics: [Object],
      reason_id: [Object],
      reason_description: [Object],
      hash: [Object],
      details_hash: [Object],
      perm: [Object]
    },
    fieldAttributeMap: {
      parentorderid: 'parentId',
      ordertypeid: 'typeId',
      statusid: 'statusId',
      seller_id: 'sellerId',
      seller_cperson_id: 'sellerPersonId',
      ordernumber: 'number',
      invoicedate: 'invoiceDate',
      onbycustomer: 'numberFromCustomer',
      orderdate: 'date',
      cityid: 'cityId',
      customerid: 'customerId',
      cpersonid: 'customerPersonId',
      contractid: 'contractId',
      vendorid: 'vendorId',
      equipmentid: 'equipmentId',
      partname: 'partName',
      partnumber: 'partNumber',
      serialnumber: 'serialNumber',
      blocknumber: 'blockNumber',
      warranty: 'warrantyFlag',
      cbswarranty: 'cbsWarrantyFlag',
      sordernumber: 'commonFieldString',
      equipsupplierid: 'equipSupplierId',
      servicetypeid: 'serviceTypeId',
      ownerid: 'ownerId',
      performerid: 'performerId',
      billnumber: 'billNumber',
      billdate: 'billDate',
      once: 'onceFlag',
      checked: 'checkedFlag',
      paid_by_customer: 'paidFlag',
      subcontractor: 'subcontractorFlag',
      retry: 'retryFlag',
      archived: 'archivedFlag',
      frozen: 'frozenFlag',
      fail_description: 'failDescription',
      price: 'repairPrice',
      diagnostics: 'diagPrice',
      reason_id: 'reasonId',
      reason_description: 'reasonDescription',
      details_hash: 'detailsHash'
    },
    uniqueKeys: {},
    _hasBooleanAttributes: false,
    _isBooleanAttribute: [Function: memoized] { cache: [MapCache] },
    _hasDateAttributes: true,
    _isDateAttribute: [Function: memoized] { cache: [MapCache] },
    _hasHstoreAttributes: false,
    _isHstoreAttribute: [Function: memoized] { cache: [MapCache] },
    _hasRangeAttributes: false,
    _isRangeAttribute: [Function: memoized] { cache: [MapCache] },
    _hasJsonAttributes: false,
    _isJsonAttribute: [Function: memoized] { cache: [MapCache] },
    _hasVirtualAttributes: true,
    _isVirtualAttribute: [Function: memoized] { cache: [MapCache] },
    _hasGeometryAttributes: false,
    _isGeometryAttribute: [Function: memoized] { cache: [MapCache] },
    _hasDefaultValues: true,
    attributes: {
      id: [Object],
      parentId: [Object],
      typeId: [Object],
      statusId: [Object],
      sellerId: [Object],
      sellerPersonId: [Object],
      number: [Object],
      invoiceDate: [Object],
      numberFromCustomer: [Object],
      date: [Object],
      cityId: [Object],
      customerId: [Object],
      customerPersonId: [Object],
      contractId: [Object],
      vendorId: [Object],
      equipmentId: [Object],
      partName: [Object],
      partNumber: [Object],
      serialNumber: [Object],
      blockNumber: [Object],
      warrantyFlag: [Object],
      cbsWarrantyFlag: [Object],
      commonFieldString: [Object],
      equipSupplierId: [Object],
      serviceTypeId: [Object],
      description: [Object],
      ownerId: [Object],
      performerId: [Object],
      billNumber: [Object],
      billDate: [Object],
      onceFlag: [Object],
      checkedFlag: [Object],
      paidFlag: [Object],
      subcontractorFlag: [Object],
      retryFlag: [Object],
      archivedFlag: [Object],
      frozenFlag: [Object],
      failDescription: [Object],
      repairPrice: [Object],
      diagPrice: [Object],
      reasonId: [Object],
      reasonDescription: [Object],
      hash: [Object],
      detailsHash: [Object],
      perm: [Object]
    },
    tableAttributes: {
      id: [Object],
      parentId: [Object],
      typeId: [Object],
      statusId: [Object],
      sellerId: [Object],
      sellerPersonId: [Object],
      number: [Object],
      invoiceDate: [Object],
      numberFromCustomer: [Object],
      date: [Object],
      cityId: [Object],
      customerId: [Object],
      customerPersonId: [Object],
      contractId: [Object],
      vendorId: [Object],
      equipmentId: [Object],
      partName: [Object],
      partNumber: [Object],
      serialNumber: [Object],
      blockNumber: [Object],
      warrantyFlag: [Object],
      cbsWarrantyFlag: [Object],
      commonFieldString: [Object],
      equipSupplierId: [Object],
      serviceTypeId: [Object],
      description: [Object],
      ownerId: [Object],
      performerId: [Object],
      billNumber: [Object],
      billDate: [Object],
      onceFlag: [Object],
      checkedFlag: [Object],
      paidFlag: [Object],
      subcontractorFlag: [Object],
      retryFlag: [Object],
      archivedFlag: [Object],
      frozenFlag: [Object],
      failDescription: [Object],
      repairPrice: [Object],
      diagPrice: [Object],
      reasonId: [Object],
      reasonDescription: [Object],
      hash: [Object],
      detailsHash: [Object]
    },
    primaryKeyAttributes: [ 'id' ],
    primaryKeyAttribute: 'id',
    primaryKeyField: 'id',
    _hasPrimaryKeys: true,
    _isPrimaryKey: [Function: memoized] { cache: [MapCache] },
    autoIncrementAttribute: 'id',
    _scope: {},
    _scopeNames: [ 'defaultScope' ],
    myAssociations: [
           'status',      'performer',
             'city',      'equipment',
         'customer', 'customerPerson',
      'serviceType',         'vendor',
           'seller',   'sellerPerson',
         'contract',       'supplier',
           'reason',    'generalPart',
          'timeout',       'needPart',
         'instPart',        'history',
          'comment'
    ],
    getParams: [AsyncFunction],
    getTicketPerms: [AsyncFunction],
    getAll_SimpleSearch: [AsyncFunction],
    getAll_DualSearch: [AsyncFunction],
    getById: [AsyncFunction],
    tryChangeServiceType: [AsyncFunction],
    tryChangeStatus: [AsyncFunction],
    tryChangePerformer: [AsyncFunction],
    getTree: [AsyncFunction],
    transactionUpdateTicketStatus: [Function],
    transactionCreateTicket: [Function],
    transactionFindById: [Function],
    updateServiceType: [AsyncFunction]
  },
  include: [
    { model: [Function], required: true, attributes: [] },
    { as: 'performer', model: [Function], attributes: [Array] },
    { include: [Object], model: [Function], attributes: [Array] },
    { model: [Function], attributes: [Array] },
    {
      include: [Object],
      where: [Object],
      required: false,
      model: [Function],
      attributes: [Array]
    }
  ],
  attributes: [
    [ [Fn], 'perm--serviceType' ],
    [ [Fn], 'perm--setPerformer' ],
    [ [Fn], 'perm--comment' ],
    [ [Fn], 'perm--status' ],
    [ [Fn], 'perm--partOrder--needPart--addition' ],
    [ [Fn], 'perm--partOrder--generalPart--addition' ],
    [ [Fn], 'perm--partOrder--generalPart--editing' ],
    [ [Fn], 'perm--instPart--addition' ],
    'id',
    'vendorId',
    'typeId',
    'number',
    'serviceTypeId',
    'date',
    'warrantyFlag',
    'cbsWarrantyFlag',
    'commonFieldString',
    'statusId',
    'cityId',
    'subcontractorFlag',
    'reasonDescription'
  ],
  where: { id: { '$in': [Array] } },
  order: [ [ 'date', 'desc' ] ]
}
[2019-07-18 13:36:34.647] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 13:36:34.653] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`ordernumber` AS `number`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`orderdate` AS `date`, `ticket`.`warranty` AS `warrantyFlag`, `ticket`.`cbswarranty` AS `cbsWarrantyFlag`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`statusid` AS `statusId`, `ticket`.`cityid` AS `cityId`, `ticket`.`subcontractor` AS `subcontractorFlag`, `ticket`.`reason_description` AS `reasonDescription`, `performer`.`id` AS `performer.id`, `performer`.`name` AS `performer.name`, `equipment`.`id` AS `equipment.id`, `equipment`.`endwarrantydate` AS `equipment.endWarrantyDate`, `equipment`.`id` AS `equipment.id`, `equipment`.`endcbswarrantydate` AS `equipment.endCBSWarrantyDate`, `equipment`.`id` AS `equipment.id`, `equipment`.`serialnumber` AS `equipment.serialNumber`, `equipment`.`id` AS `equipment.id`, `equipment`.`regnumber` AS `equipment.regNumber`, `equipment`.`id` AS `equipment.id`, `equipment`.`bna` AS `equipment.bnaFlag`, `equipment->equipmentType`.`id` AS `equipment.equipmentType.id`, `equipment->equipmentType`.`name` AS `equipment.equipmentType.name`, `equipment->equipmentType`.`typemodel` AS `equipment.equipmentType.model`, `customer`.`id` AS `customer.id`, `customer`.`name` AS `customer.name`, `timeout`.`reason_id` AS `timeout.reasonId`, `timeout`.`order_id` AS `timeout.ticketId`, `timeout`.`timeout` AS `timeout.timeout` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` LEFT OUTER JOIN `users` AS `performer` ON `ticket`.`performerid` = `performer`.`id` LEFT OUTER JOIN `equipment` AS `equipment` ON `ticket`.`equipmentid` = `equipment`.`id` LEFT OUTER JOIN `equipmenttypes` AS `equipment->equipmentType` ON `equipment`.`typemodelid` = `equipment->equipmentType`.`id` LEFT OUTER JOIN `customers` AS `customer` ON `ticket`.`customerid` = `customer`.`id` LEFT OUTER JOIN `order_timeout` AS `timeout` ON `ticket`.`id` = `timeout`.`order_id` AND `timeout`.`active` = 1 LEFT OUTER JOIN `order_timeout_reason` AS `timeout->timeoutReason` ON `timeout`.`reason_id` = `timeout->timeoutReason`.`id` WHERE `ticket`.`id` IN (497078, 497077, 497076, 497075, 497074, 497073, 497072, 497071, 497070, 497069, 497068, 497067, 497066, 497065, 497064, 497063, 497062, 497061, 497060, 497059, 497058, 497057, 497056, 497055, 497054, 497053, 497052, 497051, 497050, 497049, 497048, 497047, 497046, 497045, 497044, 497043, 497042, 497041, 497040, 497039, 497038, 497037, 497036, 497035, 497034, 497033, 497032, 497031, 497030, 497029, 497028, 497027, 497026, 497025, 497023, 497022, 497021, 497020, 497019, 497018, 497017, 497015, 497014, 497013, 497012, 497011, 497010, 497009, 497008, 497007, 497006, 497004, 497003, 497002, 497001, 497000, 496999, 496998, 496997, 496996, 496995, 496994, 496993, 496992, 496991, 496990, 496989, 496988, 496987, 496986, 496984, 496983, 496982, 496981, 496979, 496977, 496976, 496975, 496974, 496972) ORDER BY `ticket`.`orderdate` DESC; 61ms
[2019-07-18 13:36:34.774] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/tickets?fields=%7B%22customer%22%3A%5B%22id%22%2C%22name%22%5D%2C%22equipment%22%3A%5B%22id%22%2C%22endWarrantyDate%22%2C%22id%22%2C%22endCBSWarrantyDate%22%2C%22id%22%2C%22serialNumber%22%2C%22id%22%2C%22regNumber%22%2C%22id%22%2C%22bnaFlag%22%5D%2C%22equipmentType%22%3A%5B%22id%22%2C%22name%22%2C%22model%22%5D%2C%22performer%22%3A%5B%22id%22%2C%22name%22%5D%2C%22ticket%22%3A%5B%22id%22%2C%22vendorId%22%2C%22typeId%22%2C%22number%22%2C%22serviceTypeId%22%2C%22date%22%2C%22warrantyFlag%22%2C%22cbsWarrantyFlag%22%2C%22commonFieldString%22%2C%22statusId%22%2C%22cityId%22%2C%22subcontractorFlag%22%2C%22reasonDescription%22%5D%2C%22timeout%22%3A%5B%22timeout%22%5D%7D&filters=%7B%22ticket%22%3A%7B%22statusId%22%3A%7B%22%24in%22%3A%5B1%2C3%2C4%2C5%2C6%2C15%2C18%2C20%2C21%2C22%2C24%2C25%2C26%2C27%2C29%2C30%2C31%5D%7D%2C%22date%22%3A%7B%22%24between%22%3A%5B%222000-01-01%22%2C%222019-07-18%22%5D%7D%7D%2C%22equipment%22%3A%7B%7D%2C%22timeout%22%3A%7B%7D%7D&sort=%7B%22ticket%22%3A%7B%22date%22%3A%22desc%22%7D%7D&limit=%5B100%2C0%5D&count=true&userId=1 200 432ms 121.28kb
[2019-07-18 14:02:30.248] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/comments?ticketId=496975&userId=1
[2019-07-18 14:02:30.256] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 14:02:30.265] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:30.265] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 2ms
[2019-07-18 14:02:30.267] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 14:02:30.284] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:30.286] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `comment`.`id`, `comment`.`orderid` AS `ticketId`, `comment`.`ownerid` AS `ownerId`, `comment`.`device_id` AS `deviceId`, `comment`.`commentdate` AS `date`, `comment`.`comment` AS `text`, `comment`.`comment_type` AS `type`, IF(`ticket->status`.`final` = 1, 0, IF(`comment_type` NOT IN ('0', '1'), 0, IF(`comment`.`ownerid` = 1, 1, 0))) AS `perm.edit`, `user`.`id` AS `user.id`, `user`.`name` AS `user.name`, `device`.`id` AS `device.id`, `device`.`name` AS `device.name`, `device->parent`.`id` AS `device.parent.id`, `device->parent`.`name` AS `device.parent.name` FROM `comments` AS `comment` LEFT OUTER JOIN `users` AS `user` ON `comment`.`ownerid` = `user`.`id` LEFT OUTER JOIN `devices` AS `device` ON `comment`.`device_id` = `device`.`id` LEFT OUTER JOIN `devices` AS `device->parent` ON `device`.`parent_id` = `device->parent`.`id` LEFT OUTER JOIN `orders` AS `ticket` ON `comment`.`orderid` = `ticket`.`id` LEFT OUTER JOIN `status` AS `ticket->status` ON `ticket`.`statusid` = `ticket->status`.`id` WHERE `comment`.`orderid` = '496975'; 2ms
[2019-07-18 14:02:30.289] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/comments?ticketId=496975&userId=1 200 41ms 765b
[2019-07-18 14:02:30.372] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/ticket-history?ticketId=496975
[2019-07-18 14:02:30.378] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:30.379] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `ticketHistory`.`id`, `ticketHistory`.`statustime` AS `date`, `status`.`id` AS `status.id`, `status`.`name` AS `status.name`, `status`.`final` AS `status.final`, `performer`.`id` AS `performer.id`, `performer`.`name` AS `performer.name`, `owner`.`id` AS `owner.id`, `owner`.`name` AS `owner.name`, `serviceType`.`id` AS `serviceType.id`, `serviceType`.`name` AS `serviceType.name` FROM `orderstatus` AS `ticketHistory` LEFT OUTER JOIN `status` AS `status` ON `ticketHistory`.`statusid` = `status`.`id` LEFT OUTER JOIN `users` AS `performer` ON `ticketHistory`.`performerid` = `performer`.`id` LEFT OUTER JOIN `users` AS `owner` ON `ticketHistory`.`ownerid` = `owner`.`id` LEFT OUTER JOIN `servicetype` AS `serviceType` ON `ticketHistory`.`servicetypeid` = `serviceType`.`id` WHERE `ticketHistory`.`orderid` = '496975' ORDER BY `ticketHistory`.`statustime` ASC; 3ms
[2019-07-18 14:02:30.381] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/ticket-history?ticketId=496975 200 9ms 948b
[2019-07-18 14:02:30.440] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/tickets/tree/496975?userId=1
[2019-07-18 14:02:30.441] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getTree
[2019-07-18 14:02:30.443] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:30.444] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `GetTopTicketId`('496975') AS `id`; 1ms
[2019-07-18 14:02:30.444] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getParams
[2019-07-18 14:02:30.445] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 14:02:30.446] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:30.446] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 1ms
[2019-07-18 14:02:30.447] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 14:02:30.452] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:30.453] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`id` = '496975'; 3ms
[2019-07-18 14:02:30.454] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 14:02:30.455] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 1,
  'perm--setPerformer': 1,
  'perm--comment': 1,
  'perm--status': 1,
  'perm--partOrder--needPart--addition': 1,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 1,
  id: 496975,
  number: 'D21792M',
  typeId: 1,
  statusId: 3,
  vendorId: 1,
  date: '2018-05-14',
  customerId: 1,
  serviceTypeId: 1,
  performerId: 55,
  commonFieldString: null,
  cityId: 15,
  serialNumber: null,
  equipmentId: 6831
}
[2019-07-18 14:02:30.455] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 14:02:30.456] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 1,
  'perm--setPerformer': 1,
  'perm--comment': 1,
  'perm--status': 1,
  'perm--partOrder--needPart--addition': 1,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 1,
  id: 496975,
  number: 'D21792M',
  typeId: 1,
  statusId: 3,
  vendorId: 1,
  date: '2018-05-14',
  customerId: 1,
  serviceTypeId: 1,
  performerId: 55,
  commonFieldString: null,
  cityId: 15,
  serialNumber: null,
  equipmentId: 6831
}
[2019-07-18 14:02:30.459] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:30.460] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 496975; 1ms
[2019-07-18 14:02:30.463] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/tickets/tree/496975?userId=1 200 23ms 579b
[2019-07-18 14:02:33.065] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/comments?ticketId=496986&userId=1
[2019-07-18 14:02:33.067] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 14:02:33.069] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:33.069] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 1ms
[2019-07-18 14:02:33.070] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 14:02:33.085] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:33.086] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `comment`.`id`, `comment`.`orderid` AS `ticketId`, `comment`.`ownerid` AS `ownerId`, `comment`.`device_id` AS `deviceId`, `comment`.`commentdate` AS `date`, `comment`.`comment` AS `text`, `comment`.`comment_type` AS `type`, IF(`ticket->status`.`final` = 1, 0, IF(`comment_type` NOT IN ('0', '1'), 0, IF(`comment`.`ownerid` = 1, 1, 0))) AS `perm.edit`, `user`.`id` AS `user.id`, `user`.`name` AS `user.name`, `device`.`id` AS `device.id`, `device`.`name` AS `device.name`, `device->parent`.`id` AS `device.parent.id`, `device->parent`.`name` AS `device.parent.name` FROM `comments` AS `comment` LEFT OUTER JOIN `users` AS `user` ON `comment`.`ownerid` = `user`.`id` LEFT OUTER JOIN `devices` AS `device` ON `comment`.`device_id` = `device`.`id` LEFT OUTER JOIN `devices` AS `device->parent` ON `device`.`parent_id` = `device->parent`.`id` LEFT OUTER JOIN `orders` AS `ticket` ON `comment`.`orderid` = `ticket`.`id` LEFT OUTER JOIN `status` AS `ticket->status` ON `ticket`.`statusid` = `ticket->status`.`id` WHERE `comment`.`orderid` = '496986'; 2ms
[2019-07-18 14:02:33.088] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/comments?ticketId=496986&userId=1 200 23ms 291b
[2019-07-18 14:02:33.169] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/ticket-history?ticketId=496986
[2019-07-18 14:02:33.173] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:33.173] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `ticketHistory`.`id`, `ticketHistory`.`statustime` AS `date`, `status`.`id` AS `status.id`, `status`.`name` AS `status.name`, `status`.`final` AS `status.final`, `performer`.`id` AS `performer.id`, `performer`.`name` AS `performer.name`, `owner`.`id` AS `owner.id`, `owner`.`name` AS `owner.name`, `serviceType`.`id` AS `serviceType.id`, `serviceType`.`name` AS `serviceType.name` FROM `orderstatus` AS `ticketHistory` LEFT OUTER JOIN `status` AS `status` ON `ticketHistory`.`statusid` = `status`.`id` LEFT OUTER JOIN `users` AS `performer` ON `ticketHistory`.`performerid` = `performer`.`id` LEFT OUTER JOIN `users` AS `owner` ON `ticketHistory`.`ownerid` = `owner`.`id` LEFT OUTER JOIN `servicetype` AS `serviceType` ON `ticketHistory`.`servicetypeid` = `serviceType`.`id` WHERE `ticketHistory`.`orderid` = '496986' ORDER BY `ticketHistory`.`statustime` ASC; 1ms
[2019-07-18 14:02:33.176] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/ticket-history?ticketId=496986 200 7ms 946b
[2019-07-18 14:02:33.215] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/tickets/tree/496986?userId=1
[2019-07-18 14:02:33.217] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getTree
[2019-07-18 14:02:33.218] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:33.219] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `GetTopTicketId`('496986') AS `id`; 0ms
[2019-07-18 14:02:33.219] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getParams
[2019-07-18 14:02:33.219] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 14:02:33.221] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:33.222] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 1ms
[2019-07-18 14:02:33.224] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 14:02:33.228] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:33.229] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`id` = '496986'; 1ms
[2019-07-18 14:02:33.231] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 14:02:33.231] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 1,
  'perm--setPerformer': 1,
  'perm--comment': 1,
  'perm--status': 1,
  'perm--partOrder--needPart--addition': 1,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 1,
  id: 496986,
  number: 'D21804M',
  typeId: 1,
  statusId: 3,
  vendorId: 1,
  date: '2018-05-14',
  customerId: 1,
  serviceTypeId: 1,
  performerId: 39,
  commonFieldString: null,
  cityId: 2,
  serialNumber: null,
  equipmentId: 4556
}
[2019-07-18 14:02:33.234] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 14:02:33.234] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 1,
  'perm--setPerformer': 1,
  'perm--comment': 1,
  'perm--status': 1,
  'perm--partOrder--needPart--addition': 1,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 1,
  id: 496986,
  number: 'D21804M',
  typeId: 1,
  statusId: 3,
  vendorId: 1,
  date: '2018-05-14',
  customerId: 1,
  serviceTypeId: 1,
  performerId: 39,
  commonFieldString: null,
  cityId: 2,
  serialNumber: null,
  equipmentId: 4556
}
[2019-07-18 14:02:33.239] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:33.240] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 496986; 1ms
[2019-07-18 14:02:33.243] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/tickets/tree/496986?userId=1 200 28ms 578b
[2019-07-18 14:02:35.074] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/comments?ticketId=496987&userId=1
[2019-07-18 14:02:35.075] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 14:02:35.077] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:35.078] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 2ms
[2019-07-18 14:02:35.079] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 14:02:35.113] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:35.114] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `comment`.`id`, `comment`.`orderid` AS `ticketId`, `comment`.`ownerid` AS `ownerId`, `comment`.`device_id` AS `deviceId`, `comment`.`commentdate` AS `date`, `comment`.`comment` AS `text`, `comment`.`comment_type` AS `type`, IF(`ticket->status`.`final` = 1, 0, IF(`comment_type` NOT IN ('0', '1'), 0, IF(`comment`.`ownerid` = 1, 1, 0))) AS `perm.edit`, `user`.`id` AS `user.id`, `user`.`name` AS `user.name`, `device`.`id` AS `device.id`, `device`.`name` AS `device.name`, `device->parent`.`id` AS `device.parent.id`, `device->parent`.`name` AS `device.parent.name` FROM `comments` AS `comment` LEFT OUTER JOIN `users` AS `user` ON `comment`.`ownerid` = `user`.`id` LEFT OUTER JOIN `devices` AS `device` ON `comment`.`device_id` = `device`.`id` LEFT OUTER JOIN `devices` AS `device->parent` ON `device`.`parent_id` = `device->parent`.`id` LEFT OUTER JOIN `orders` AS `ticket` ON `comment`.`orderid` = `ticket`.`id` LEFT OUTER JOIN `status` AS `ticket->status` ON `ticket`.`statusid` = `ticket->status`.`id` WHERE `comment`.`orderid` = '496987'; 1ms
[2019-07-18 14:02:35.116] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/comments?ticketId=496987&userId=1 200 42ms 291b
[2019-07-18 14:02:35.152] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/ticket-history?ticketId=496987
[2019-07-18 14:02:35.158] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:35.159] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `ticketHistory`.`id`, `ticketHistory`.`statustime` AS `date`, `status`.`id` AS `status.id`, `status`.`name` AS `status.name`, `status`.`final` AS `status.final`, `performer`.`id` AS `performer.id`, `performer`.`name` AS `performer.name`, `owner`.`id` AS `owner.id`, `owner`.`name` AS `owner.name`, `serviceType`.`id` AS `serviceType.id`, `serviceType`.`name` AS `serviceType.name` FROM `orderstatus` AS `ticketHistory` LEFT OUTER JOIN `status` AS `status` ON `ticketHistory`.`statusid` = `status`.`id` LEFT OUTER JOIN `users` AS `performer` ON `ticketHistory`.`performerid` = `performer`.`id` LEFT OUTER JOIN `users` AS `owner` ON `ticketHistory`.`ownerid` = `owner`.`id` LEFT OUTER JOIN `servicetype` AS `serviceType` ON `ticketHistory`.`servicetypeid` = `serviceType`.`id` WHERE `ticketHistory`.`orderid` = '496987' ORDER BY `ticketHistory`.`statustime` ASC; 1ms
[2019-07-18 14:02:35.161] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/ticket-history?ticketId=496987 200 9ms 946b
[2019-07-18 14:02:35.198] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/tickets/tree/496987?userId=1
[2019-07-18 14:02:35.199] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getTree
[2019-07-18 14:02:35.201] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:35.202] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `GetTopTicketId`('496987') AS `id`; 1ms
[2019-07-18 14:02:35.203] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getParams
[2019-07-18 14:02:35.204] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 14:02:35.208] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:35.210] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 2ms
[2019-07-18 14:02:35.211] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 14:02:35.220] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:35.221] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`id` = '496987'; 4ms
[2019-07-18 14:02:35.222] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 14:02:35.223] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 1,
  'perm--setPerformer': 1,
  'perm--comment': 1,
  'perm--status': 1,
  'perm--partOrder--needPart--addition': 1,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 1,
  id: 496987,
  number: 'D21805M',
  typeId: 1,
  statusId: 3,
  vendorId: 1,
  date: '2018-05-14',
  customerId: 1,
  serviceTypeId: 1,
  performerId: 39,
  commonFieldString: null,
  cityId: 2,
  serialNumber: null,
  equipmentId: 19537
}
[2019-07-18 14:02:35.224] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 14:02:35.241] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 1,
  'perm--setPerformer': 1,
  'perm--comment': 1,
  'perm--status': 1,
  'perm--partOrder--needPart--addition': 1,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 1,
  id: 496987,
  number: 'D21805M',
  typeId: 1,
  statusId: 3,
  vendorId: 1,
  date: '2018-05-14',
  customerId: 1,
  serviceTypeId: 1,
  performerId: 39,
  commonFieldString: null,
  cityId: 2,
  serialNumber: null,
  equipmentId: 19537
}
[2019-07-18 14:02:35.246] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:35.246] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 496987; 1ms
[2019-07-18 14:02:35.248] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/tickets/tree/496987?userId=1 200 50ms 579b
[2019-07-18 14:02:35.920] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/comments?ticketId=496987&userId=1
[2019-07-18 14:02:35.934] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 14:02:35.936] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:35.936] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 0ms
[2019-07-18 14:02:35.937] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 14:02:35.950] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:35.950] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `comment`.`id`, `comment`.`orderid` AS `ticketId`, `comment`.`ownerid` AS `ownerId`, `comment`.`device_id` AS `deviceId`, `comment`.`commentdate` AS `date`, `comment`.`comment` AS `text`, `comment`.`comment_type` AS `type`, IF(`ticket->status`.`final` = 1, 0, IF(`comment_type` NOT IN ('0', '1'), 0, IF(`comment`.`ownerid` = 1, 1, 0))) AS `perm.edit`, `user`.`id` AS `user.id`, `user`.`name` AS `user.name`, `device`.`id` AS `device.id`, `device`.`name` AS `device.name`, `device->parent`.`id` AS `device.parent.id`, `device->parent`.`name` AS `device.parent.name` FROM `comments` AS `comment` LEFT OUTER JOIN `users` AS `user` ON `comment`.`ownerid` = `user`.`id` LEFT OUTER JOIN `devices` AS `device` ON `comment`.`device_id` = `device`.`id` LEFT OUTER JOIN `devices` AS `device->parent` ON `device`.`parent_id` = `device->parent`.`id` LEFT OUTER JOIN `orders` AS `ticket` ON `comment`.`orderid` = `ticket`.`id` LEFT OUTER JOIN `status` AS `ticket->status` ON `ticket`.`statusid` = `ticket->status`.`id` WHERE `comment`.`orderid` = '496987'; 4ms
[2019-07-18 14:02:35.952] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/comments?ticketId=496987&userId=1 200 32ms 291b
[2019-07-18 14:02:35.984] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/ticket-history?ticketId=496987
[2019-07-18 14:02:35.989] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:35.990] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `ticketHistory`.`id`, `ticketHistory`.`statustime` AS `date`, `status`.`id` AS `status.id`, `status`.`name` AS `status.name`, `status`.`final` AS `status.final`, `performer`.`id` AS `performer.id`, `performer`.`name` AS `performer.name`, `owner`.`id` AS `owner.id`, `owner`.`name` AS `owner.name`, `serviceType`.`id` AS `serviceType.id`, `serviceType`.`name` AS `serviceType.name` FROM `orderstatus` AS `ticketHistory` LEFT OUTER JOIN `status` AS `status` ON `ticketHistory`.`statusid` = `status`.`id` LEFT OUTER JOIN `users` AS `performer` ON `ticketHistory`.`performerid` = `performer`.`id` LEFT OUTER JOIN `users` AS `owner` ON `ticketHistory`.`ownerid` = `owner`.`id` LEFT OUTER JOIN `servicetype` AS `serviceType` ON `ticketHistory`.`servicetypeid` = `serviceType`.`id` WHERE `ticketHistory`.`orderid` = '496987' ORDER BY `ticketHistory`.`statustime` ASC; 1ms
[2019-07-18 14:02:35.995] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/ticket-history?ticketId=496987 200 11ms 946b
[2019-07-18 14:02:36.042] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/tickets/tree/496987?userId=1
[2019-07-18 14:02:36.043] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getTree
[2019-07-18 14:02:36.044] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:36.045] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `GetTopTicketId`('496987') AS `id`; 0ms
[2019-07-18 14:02:36.045] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getParams
[2019-07-18 14:02:36.046] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 14:02:36.047] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:36.047] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 1ms
[2019-07-18 14:02:36.048] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 14:02:36.053] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:36.054] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`id` = '496987'; 2ms
[2019-07-18 14:02:36.056] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 14:02:36.056] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 1,
  'perm--setPerformer': 1,
  'perm--comment': 1,
  'perm--status': 1,
  'perm--partOrder--needPart--addition': 1,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 1,
  id: 496987,
  number: 'D21805M',
  typeId: 1,
  statusId: 3,
  vendorId: 1,
  date: '2018-05-14',
  customerId: 1,
  serviceTypeId: 1,
  performerId: 39,
  commonFieldString: null,
  cityId: 2,
  serialNumber: null,
  equipmentId: 19537
}
[2019-07-18 14:02:36.059] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 14:02:36.059] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 1,
  'perm--setPerformer': 1,
  'perm--comment': 1,
  'perm--status': 1,
  'perm--partOrder--needPart--addition': 1,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 1,
  id: 496987,
  number: 'D21805M',
  typeId: 1,
  statusId: 3,
  vendorId: 1,
  date: '2018-05-14',
  customerId: 1,
  serviceTypeId: 1,
  performerId: 39,
  commonFieldString: null,
  cityId: 2,
  serialNumber: null,
  equipmentId: 19537
}
[2019-07-18 14:02:36.063] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:36.064] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 496987; 1ms
[2019-07-18 14:02:36.066] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/tickets/tree/496987?userId=1 200 24ms 579b
[2019-07-18 14:02:37.283] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/comments?ticketId=496994&userId=1
[2019-07-18 14:02:37.285] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 14:02:37.287] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:37.287] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 1ms
[2019-07-18 14:02:37.289] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 14:02:37.297] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:37.297] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `comment`.`id`, `comment`.`orderid` AS `ticketId`, `comment`.`ownerid` AS `ownerId`, `comment`.`device_id` AS `deviceId`, `comment`.`commentdate` AS `date`, `comment`.`comment` AS `text`, `comment`.`comment_type` AS `type`, IF(`ticket->status`.`final` = 1, 0, IF(`comment_type` NOT IN ('0', '1'), 0, IF(`comment`.`ownerid` = 1, 1, 0))) AS `perm.edit`, `user`.`id` AS `user.id`, `user`.`name` AS `user.name`, `device`.`id` AS `device.id`, `device`.`name` AS `device.name`, `device->parent`.`id` AS `device.parent.id`, `device->parent`.`name` AS `device.parent.name` FROM `comments` AS `comment` LEFT OUTER JOIN `users` AS `user` ON `comment`.`ownerid` = `user`.`id` LEFT OUTER JOIN `devices` AS `device` ON `comment`.`device_id` = `device`.`id` LEFT OUTER JOIN `devices` AS `device->parent` ON `device`.`parent_id` = `device->parent`.`id` LEFT OUTER JOIN `orders` AS `ticket` ON `comment`.`orderid` = `ticket`.`id` LEFT OUTER JOIN `status` AS `ticket->status` ON `ticket`.`statusid` = `ticket->status`.`id` WHERE `comment`.`orderid` = '496994'; 1ms
[2019-07-18 14:02:37.300] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/comments?ticketId=496994&userId=1 200 16ms 292b
[2019-07-18 14:02:37.333] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/ticket-history?ticketId=496994
[2019-07-18 14:02:37.339] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:37.349] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `ticketHistory`.`id`, `ticketHistory`.`statustime` AS `date`, `status`.`id` AS `status.id`, `status`.`name` AS `status.name`, `status`.`final` AS `status.final`, `performer`.`id` AS `performer.id`, `performer`.`name` AS `performer.name`, `owner`.`id` AS `owner.id`, `owner`.`name` AS `owner.name`, `serviceType`.`id` AS `serviceType.id`, `serviceType`.`name` AS `serviceType.name` FROM `orderstatus` AS `ticketHistory` LEFT OUTER JOIN `status` AS `status` ON `ticketHistory`.`statusid` = `status`.`id` LEFT OUTER JOIN `users` AS `performer` ON `ticketHistory`.`performerid` = `performer`.`id` LEFT OUTER JOIN `users` AS `owner` ON `ticketHistory`.`ownerid` = `owner`.`id` LEFT OUTER JOIN `servicetype` AS `serviceType` ON `ticketHistory`.`servicetypeid` = `serviceType`.`id` WHERE `ticketHistory`.`orderid` = '496994' ORDER BY `ticketHistory`.`statustime` ASC; 1ms
[2019-07-18 14:02:37.352] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/ticket-history?ticketId=496994 200 19ms 938b
[2019-07-18 14:02:37.380] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/tickets/tree/496994?userId=1
[2019-07-18 14:02:37.380] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getTree
[2019-07-18 14:02:37.382] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:37.382] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `GetTopTicketId`('496994') AS `id`; 1ms
[2019-07-18 14:02:37.383] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getParams
[2019-07-18 14:02:37.383] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 14:02:37.384] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:37.385] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 0ms
[2019-07-18 14:02:37.386] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 14:02:37.389] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:37.390] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`id` = '496994'; 1ms
[2019-07-18 14:02:37.391] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 14:02:37.391] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 1,
  'perm--setPerformer': 1,
  'perm--comment': 1,
  'perm--status': 1,
  'perm--partOrder--needPart--addition': 1,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 1,
  id: 496994,
  number: 'SF1342M',
  typeId: 1,
  statusId: 3,
  vendorId: 11,
  date: '2018-05-14',
  customerId: 538,
  serviceTypeId: 1,
  performerId: 124,
  commonFieldString: null,
  cityId: 4,
  serialNumber: null,
  equipmentId: 24739
}
[2019-07-18 14:02:37.393] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 14:02:37.393] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 1,
  'perm--setPerformer': 1,
  'perm--comment': 1,
  'perm--status': 1,
  'perm--partOrder--needPart--addition': 1,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 1,
  id: 496994,
  number: 'SF1342M',
  typeId: 1,
  statusId: 3,
  vendorId: 11,
  date: '2018-05-14',
  customerId: 538,
  serviceTypeId: 1,
  performerId: 124,
  commonFieldString: null,
  cityId: 4,
  serialNumber: null,
  equipmentId: 24739
}
[2019-07-18 14:02:37.398] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:37.398] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 496994; 1ms
[2019-07-18 14:02:37.400] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/tickets/tree/496994?userId=1 200 20ms 583b
[2019-07-18 14:02:38.781] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/comments?ticketId=497003&userId=1
[2019-07-18 14:02:38.789] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 14:02:38.791] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:38.793] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 1ms
[2019-07-18 14:02:38.809] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 14:02:38.824] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:38.824] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `comment`.`id`, `comment`.`orderid` AS `ticketId`, `comment`.`ownerid` AS `ownerId`, `comment`.`device_id` AS `deviceId`, `comment`.`commentdate` AS `date`, `comment`.`comment` AS `text`, `comment`.`comment_type` AS `type`, IF(`ticket->status`.`final` = 1, 0, IF(`comment_type` NOT IN ('0', '1'), 0, IF(`comment`.`ownerid` = 1, 1, 0))) AS `perm.edit`, `user`.`id` AS `user.id`, `user`.`name` AS `user.name`, `device`.`id` AS `device.id`, `device`.`name` AS `device.name`, `device->parent`.`id` AS `device.parent.id`, `device->parent`.`name` AS `device.parent.name` FROM `comments` AS `comment` LEFT OUTER JOIN `users` AS `user` ON `comment`.`ownerid` = `user`.`id` LEFT OUTER JOIN `devices` AS `device` ON `comment`.`device_id` = `device`.`id` LEFT OUTER JOIN `devices` AS `device->parent` ON `device`.`parent_id` = `device->parent`.`id` LEFT OUTER JOIN `orders` AS `ticket` ON `comment`.`orderid` = `ticket`.`id` LEFT OUTER JOIN `status` AS `ticket->status` ON `ticket`.`statusid` = `ticket->status`.`id` WHERE `comment`.`orderid` = '497003'; 1ms
[2019-07-18 14:02:38.826] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/comments?ticketId=497003&userId=1 200 45ms 291b
[2019-07-18 14:02:38.859] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/ticket-history?ticketId=497003
[2019-07-18 14:02:38.864] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:38.865] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `ticketHistory`.`id`, `ticketHistory`.`statustime` AS `date`, `status`.`id` AS `status.id`, `status`.`name` AS `status.name`, `status`.`final` AS `status.final`, `performer`.`id` AS `performer.id`, `performer`.`name` AS `performer.name`, `owner`.`id` AS `owner.id`, `owner`.`name` AS `owner.name`, `serviceType`.`id` AS `serviceType.id`, `serviceType`.`name` AS `serviceType.name` FROM `orderstatus` AS `ticketHistory` LEFT OUTER JOIN `status` AS `status` ON `ticketHistory`.`statusid` = `status`.`id` LEFT OUTER JOIN `users` AS `performer` ON `ticketHistory`.`performerid` = `performer`.`id` LEFT OUTER JOIN `users` AS `owner` ON `ticketHistory`.`ownerid` = `owner`.`id` LEFT OUTER JOIN `servicetype` AS `serviceType` ON `ticketHistory`.`servicetypeid` = `serviceType`.`id` WHERE `ticketHistory`.`orderid` = '497003' ORDER BY `ticketHistory`.`statustime` ASC; 1ms
[2019-07-18 14:02:38.866] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/ticket-history?ticketId=497003 200 7ms 946b
[2019-07-18 14:02:38.913] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/tickets/tree/497003?userId=1
[2019-07-18 14:02:38.913] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getTree
[2019-07-18 14:02:38.914] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:38.915] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `GetTopTicketId`('497003') AS `id`; 0ms
[2019-07-18 14:02:38.915] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getParams
[2019-07-18 14:02:38.915] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 14:02:38.917] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:38.917] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 1ms
[2019-07-18 14:02:38.918] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 14:02:38.923] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:38.934] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`id` = '497003'; 2ms
[2019-07-18 14:02:38.935] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 14:02:38.935] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 1,
  'perm--setPerformer': 1,
  'perm--comment': 1,
  'perm--status': 1,
  'perm--partOrder--needPart--addition': 1,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 1,
  id: 497003,
  number: 'D21817M',
  typeId: 1,
  statusId: 3,
  vendorId: 1,
  date: '2018-05-14',
  customerId: 1,
  serviceTypeId: 1,
  performerId: 39,
  commonFieldString: null,
  cityId: 2,
  serialNumber: null,
  equipmentId: 3315
}
[2019-07-18 14:02:38.935] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 14:02:38.936] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 1,
  'perm--setPerformer': 1,
  'perm--comment': 1,
  'perm--status': 1,
  'perm--partOrder--needPart--addition': 1,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 1,
  id: 497003,
  number: 'D21817M',
  typeId: 1,
  statusId: 3,
  vendorId: 1,
  date: '2018-05-14',
  customerId: 1,
  serviceTypeId: 1,
  performerId: 39,
  commonFieldString: null,
  cityId: 2,
  serialNumber: null,
  equipmentId: 3315
}
[2019-07-18 14:02:38.940] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:38.941] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 497003; 1ms
[2019-07-18 14:02:38.943] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/tickets/tree/497003?userId=1 200 30ms 578b
[2019-07-18 14:02:42.434] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/comments?ticketId=497051&userId=1
[2019-07-18 14:02:42.435] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 14:02:42.439] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:42.440] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 0ms
[2019-07-18 14:02:42.441] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 14:02:42.464] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:42.464] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `comment`.`id`, `comment`.`orderid` AS `ticketId`, `comment`.`ownerid` AS `ownerId`, `comment`.`device_id` AS `deviceId`, `comment`.`commentdate` AS `date`, `comment`.`comment` AS `text`, `comment`.`comment_type` AS `type`, IF(`ticket->status`.`final` = 1, 0, IF(`comment_type` NOT IN ('0', '1'), 0, IF(`comment`.`ownerid` = 1, 1, 0))) AS `perm.edit`, `user`.`id` AS `user.id`, `user`.`name` AS `user.name`, `device`.`id` AS `device.id`, `device`.`name` AS `device.name`, `device->parent`.`id` AS `device.parent.id`, `device->parent`.`name` AS `device.parent.name` FROM `comments` AS `comment` LEFT OUTER JOIN `users` AS `user` ON `comment`.`ownerid` = `user`.`id` LEFT OUTER JOIN `devices` AS `device` ON `comment`.`device_id` = `device`.`id` LEFT OUTER JOIN `devices` AS `device->parent` ON `device`.`parent_id` = `device->parent`.`id` LEFT OUTER JOIN `orders` AS `ticket` ON `comment`.`orderid` = `ticket`.`id` LEFT OUTER JOIN `status` AS `ticket->status` ON `ticket`.`statusid` = `ticket->status`.`id` WHERE `comment`.`orderid` = '497051'; 1ms
[2019-07-18 14:02:42.467] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/comments?ticketId=497051&userId=1 200 33ms 291b
[2019-07-18 14:02:42.504] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/ticket-history?ticketId=497051
[2019-07-18 14:02:42.509] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:42.510] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `ticketHistory`.`id`, `ticketHistory`.`statustime` AS `date`, `status`.`id` AS `status.id`, `status`.`name` AS `status.name`, `status`.`final` AS `status.final`, `performer`.`id` AS `performer.id`, `performer`.`name` AS `performer.name`, `owner`.`id` AS `owner.id`, `owner`.`name` AS `owner.name`, `serviceType`.`id` AS `serviceType.id`, `serviceType`.`name` AS `serviceType.name` FROM `orderstatus` AS `ticketHistory` LEFT OUTER JOIN `status` AS `status` ON `ticketHistory`.`statusid` = `status`.`id` LEFT OUTER JOIN `users` AS `performer` ON `ticketHistory`.`performerid` = `performer`.`id` LEFT OUTER JOIN `users` AS `owner` ON `ticketHistory`.`ownerid` = `owner`.`id` LEFT OUTER JOIN `servicetype` AS `serviceType` ON `ticketHistory`.`servicetypeid` = `serviceType`.`id` WHERE `ticketHistory`.`orderid` = '497051' ORDER BY `ticketHistory`.`statustime` ASC; 1ms
[2019-07-18 14:02:42.512] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/ticket-history?ticketId=497051 200 8ms 888b
[2019-07-18 14:02:42.553] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/tickets/tree/497051?userId=1
[2019-07-18 14:02:42.554] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getTree
[2019-07-18 14:02:42.556] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:42.556] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `GetTopTicketId`('497051') AS `id`; 1ms
[2019-07-18 14:02:42.557] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getParams
[2019-07-18 14:02:42.557] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 14:02:42.558] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:42.559] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 0ms
[2019-07-18 14:02:42.560] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 14:02:42.565] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:42.565] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`id` = '497051'; 1ms
[2019-07-18 14:02:42.567] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 14:02:42.567] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 1,
  'perm--setPerformer': 1,
  'perm--comment': 1,
  'perm--status': 1,
  'perm--partOrder--needPart--addition': 1,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 1,
  id: 497051,
  number: 'W4611M',
  typeId: 1,
  statusId: 3,
  vendorId: 7,
  date: '2018-05-14',
  customerId: 1,
  serviceTypeId: 2,
  performerId: 80,
  commonFieldString: null,
  cityId: 3,
  serialNumber: null,
  equipmentId: 17230
}
[2019-07-18 14:02:42.568] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 14:02:42.569] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 1,
  'perm--setPerformer': 1,
  'perm--comment': 1,
  'perm--status': 1,
  'perm--partOrder--needPart--addition': 1,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 1,
  id: 497051,
  number: 'W4611M',
  typeId: 1,
  statusId: 3,
  vendorId: 7,
  date: '2018-05-14',
  customerId: 1,
  serviceTypeId: 2,
  performerId: 80,
  commonFieldString: null,
  cityId: 3,
  serialNumber: null,
  equipmentId: 17230
}
[2019-07-18 14:02:42.572] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:42.573] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 497051; 1ms
[2019-07-18 14:02:42.574] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/tickets/tree/497051?userId=1 200 21ms 578b
[2019-07-18 14:02:43.443] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/comments?ticketId=497050&userId=1
[2019-07-18 14:02:43.444] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 14:02:43.446] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:43.446] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 1ms
[2019-07-18 14:02:43.447] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 14:02:43.457] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:43.457] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `comment`.`id`, `comment`.`orderid` AS `ticketId`, `comment`.`ownerid` AS `ownerId`, `comment`.`device_id` AS `deviceId`, `comment`.`commentdate` AS `date`, `comment`.`comment` AS `text`, `comment`.`comment_type` AS `type`, IF(`ticket->status`.`final` = 1, 0, IF(`comment_type` NOT IN ('0', '1'), 0, IF(`comment`.`ownerid` = 1, 1, 0))) AS `perm.edit`, `user`.`id` AS `user.id`, `user`.`name` AS `user.name`, `device`.`id` AS `device.id`, `device`.`name` AS `device.name`, `device->parent`.`id` AS `device.parent.id`, `device->parent`.`name` AS `device.parent.name` FROM `comments` AS `comment` LEFT OUTER JOIN `users` AS `user` ON `comment`.`ownerid` = `user`.`id` LEFT OUTER JOIN `devices` AS `device` ON `comment`.`device_id` = `device`.`id` LEFT OUTER JOIN `devices` AS `device->parent` ON `device`.`parent_id` = `device->parent`.`id` LEFT OUTER JOIN `orders` AS `ticket` ON `comment`.`orderid` = `ticket`.`id` LEFT OUTER JOIN `status` AS `ticket->status` ON `ticket`.`statusid` = `ticket->status`.`id` WHERE `comment`.`orderid` = '497050'; 1ms
[2019-07-18 14:02:43.459] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/comments?ticketId=497050&userId=1 200 16ms 291b
[2019-07-18 14:02:43.502] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/ticket-history?ticketId=497050
[2019-07-18 14:02:43.510] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:43.511] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `ticketHistory`.`id`, `ticketHistory`.`statustime` AS `date`, `status`.`id` AS `status.id`, `status`.`name` AS `status.name`, `status`.`final` AS `status.final`, `performer`.`id` AS `performer.id`, `performer`.`name` AS `performer.name`, `owner`.`id` AS `owner.id`, `owner`.`name` AS `owner.name`, `serviceType`.`id` AS `serviceType.id`, `serviceType`.`name` AS `serviceType.name` FROM `orderstatus` AS `ticketHistory` LEFT OUTER JOIN `status` AS `status` ON `ticketHistory`.`statusid` = `status`.`id` LEFT OUTER JOIN `users` AS `performer` ON `ticketHistory`.`performerid` = `performer`.`id` LEFT OUTER JOIN `users` AS `owner` ON `ticketHistory`.`ownerid` = `owner`.`id` LEFT OUTER JOIN `servicetype` AS `serviceType` ON `ticketHistory`.`servicetypeid` = `serviceType`.`id` WHERE `ticketHistory`.`orderid` = '497050' ORDER BY `ticketHistory`.`statustime` ASC; 2ms
[2019-07-18 14:02:43.513] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/ticket-history?ticketId=497050 200 11ms 936b
[2019-07-18 14:02:43.556] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/tickets/tree/497050?userId=1
[2019-07-18 14:02:43.556] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getTree
[2019-07-18 14:02:43.558] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:43.558] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `GetTopTicketId`('497050') AS `id`; 1ms
[2019-07-18 14:02:43.559] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getParams
[2019-07-18 14:02:43.559] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 14:02:43.561] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:43.562] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 1ms
[2019-07-18 14:02:43.563] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 14:02:43.570] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:43.580] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`id` = '497050'; 2ms
[2019-07-18 14:02:43.581] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 14:02:43.581] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 1,
  'perm--setPerformer': 1,
  'perm--comment': 1,
  'perm--status': 1,
  'perm--partOrder--needPart--addition': 1,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 1,
  id: 497050,
  number: 'D21870M',
  typeId: 1,
  statusId: 3,
  vendorId: 1,
  date: '2018-05-14',
  customerId: 1,
  serviceTypeId: 1,
  performerId: 52,
  commonFieldString: null,
  cityId: 5,
  serialNumber: null,
  equipmentId: 22972
}
[2019-07-18 14:02:43.582] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 14:02:43.582] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 1,
  'perm--setPerformer': 1,
  'perm--comment': 1,
  'perm--status': 1,
  'perm--partOrder--needPart--addition': 1,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 1,
  id: 497050,
  number: 'D21870M',
  typeId: 1,
  statusId: 3,
  vendorId: 1,
  date: '2018-05-14',
  customerId: 1,
  serviceTypeId: 1,
  performerId: 52,
  commonFieldString: null,
  cityId: 5,
  serialNumber: null,
  equipmentId: 22972
}
[2019-07-18 14:02:43.585] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:43.586] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 497050; 1ms
[2019-07-18 14:02:43.587] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/tickets/tree/497050?userId=1 200 31ms 579b
[2019-07-18 14:02:44.234] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/comments?ticketId=497052&userId=1
[2019-07-18 14:02:44.248] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 14:02:44.250] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:44.251] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 1ms
[2019-07-18 14:02:44.251] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 14:02:44.267] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:44.268] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `comment`.`id`, `comment`.`orderid` AS `ticketId`, `comment`.`ownerid` AS `ownerId`, `comment`.`device_id` AS `deviceId`, `comment`.`commentdate` AS `date`, `comment`.`comment` AS `text`, `comment`.`comment_type` AS `type`, IF(`ticket->status`.`final` = 1, 0, IF(`comment_type` NOT IN ('0', '1'), 0, IF(`comment`.`ownerid` = 1, 1, 0))) AS `perm.edit`, `user`.`id` AS `user.id`, `user`.`name` AS `user.name`, `device`.`id` AS `device.id`, `device`.`name` AS `device.name`, `device->parent`.`id` AS `device.parent.id`, `device->parent`.`name` AS `device.parent.name` FROM `comments` AS `comment` LEFT OUTER JOIN `users` AS `user` ON `comment`.`ownerid` = `user`.`id` LEFT OUTER JOIN `devices` AS `device` ON `comment`.`device_id` = `device`.`id` LEFT OUTER JOIN `devices` AS `device->parent` ON `device`.`parent_id` = `device->parent`.`id` LEFT OUTER JOIN `orders` AS `ticket` ON `comment`.`orderid` = `ticket`.`id` LEFT OUTER JOIN `status` AS `ticket->status` ON `ticket`.`statusid` = `ticket->status`.`id` WHERE `comment`.`orderid` = '497052'; 1ms
[2019-07-18 14:02:44.270] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/comments?ticketId=497052&userId=1 200 36ms 2.03kb
[2019-07-18 14:02:44.300] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/ticket-history?ticketId=497052
[2019-07-18 14:02:44.310] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:44.311] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `ticketHistory`.`id`, `ticketHistory`.`statustime` AS `date`, `status`.`id` AS `status.id`, `status`.`name` AS `status.name`, `status`.`final` AS `status.final`, `performer`.`id` AS `performer.id`, `performer`.`name` AS `performer.name`, `owner`.`id` AS `owner.id`, `owner`.`name` AS `owner.name`, `serviceType`.`id` AS `serviceType.id`, `serviceType`.`name` AS `serviceType.name` FROM `orderstatus` AS `ticketHistory` LEFT OUTER JOIN `status` AS `status` ON `ticketHistory`.`statusid` = `status`.`id` LEFT OUTER JOIN `users` AS `performer` ON `ticketHistory`.`performerid` = `performer`.`id` LEFT OUTER JOIN `users` AS `owner` ON `ticketHistory`.`ownerid` = `owner`.`id` LEFT OUTER JOIN `servicetype` AS `serviceType` ON `ticketHistory`.`servicetypeid` = `serviceType`.`id` WHERE `ticketHistory`.`orderid` = '497052' ORDER BY `ticketHistory`.`statustime` ASC; 6ms
[2019-07-18 14:02:44.315] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/ticket-history?ticketId=497052 200 15ms 2.35kb
[2019-07-18 14:02:44.358] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/tickets/tree/497052?userId=1
[2019-07-18 14:02:44.359] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getTree
[2019-07-18 14:02:44.361] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:44.361] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `GetTopTicketId`('497052') AS `id`; 1ms
[2019-07-18 14:02:44.361] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getParams
[2019-07-18 14:02:44.362] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 14:02:44.363] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:44.363] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 1ms
[2019-07-18 14:02:44.364] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 14:02:44.370] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:44.371] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`id` = '497052'; 1ms
[2019-07-18 14:02:44.372] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 14:02:44.372] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 0,
  'perm--setPerformer': 1,
  'perm--comment': 1,
  'perm--status': 1,
  'perm--partOrder--needPart--addition': 1,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 1,
  id: 497052,
  number: 'CMT1155M',
  typeId: 1,
  statusId: 6,
  vendorId: 13,
  date: '2018-05-14',
  customerId: 538,
  serviceTypeId: 8,
  performerId: 40,
  commonFieldString: null,
  cityId: 17,
  serialNumber: null,
  equipmentId: 23577
}
[2019-07-18 14:02:44.373] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 14:02:44.373] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 0,
  'perm--setPerformer': 1,
  'perm--comment': 1,
  'perm--status': 1,
  'perm--partOrder--needPart--addition': 1,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 1,
  id: 497052,
  number: 'CMT1155M',
  typeId: 1,
  statusId: 6,
  vendorId: 13,
  date: '2018-05-14',
  customerId: 538,
  serviceTypeId: 8,
  performerId: 40,
  commonFieldString: null,
  cityId: 17,
  serialNumber: null,
  equipmentId: 23577
}
[2019-07-18 14:02:44.376] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:44.376] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 497052; 1ms
[2019-07-18 14:02:44.378] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/tickets/tree/497052?userId=1 200 20ms 584b
[2019-07-18 14:02:49.432] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/comments?ticketId=497073&userId=1
[2019-07-18 14:02:49.433] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 14:02:49.436] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:49.437] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 2ms
[2019-07-18 14:02:49.437] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 14:02:49.454] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:49.462] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `comment`.`id`, `comment`.`orderid` AS `ticketId`, `comment`.`ownerid` AS `ownerId`, `comment`.`device_id` AS `deviceId`, `comment`.`commentdate` AS `date`, `comment`.`comment` AS `text`, `comment`.`comment_type` AS `type`, IF(`ticket->status`.`final` = 1, 0, IF(`comment_type` NOT IN ('0', '1'), 0, IF(`comment`.`ownerid` = 1, 1, 0))) AS `perm.edit`, `user`.`id` AS `user.id`, `user`.`name` AS `user.name`, `device`.`id` AS `device.id`, `device`.`name` AS `device.name`, `device->parent`.`id` AS `device.parent.id`, `device->parent`.`name` AS `device.parent.name` FROM `comments` AS `comment` LEFT OUTER JOIN `users` AS `user` ON `comment`.`ownerid` = `user`.`id` LEFT OUTER JOIN `devices` AS `device` ON `comment`.`device_id` = `device`.`id` LEFT OUTER JOIN `devices` AS `device->parent` ON `device`.`parent_id` = `device->parent`.`id` LEFT OUTER JOIN `orders` AS `ticket` ON `comment`.`orderid` = `ticket`.`id` LEFT OUTER JOIN `status` AS `ticket->status` ON `ticket`.`statusid` = `ticket->status`.`id` WHERE `comment`.`orderid` = '497073'; 2ms
[2019-07-18 14:02:49.464] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/comments?ticketId=497073&userId=1 200 32ms 2b
[2019-07-18 14:02:49.499] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/ticket-history?ticketId=497073
[2019-07-18 14:02:49.507] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:49.507] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `ticketHistory`.`id`, `ticketHistory`.`statustime` AS `date`, `status`.`id` AS `status.id`, `status`.`name` AS `status.name`, `status`.`final` AS `status.final`, `performer`.`id` AS `performer.id`, `performer`.`name` AS `performer.name`, `owner`.`id` AS `owner.id`, `owner`.`name` AS `owner.name`, `serviceType`.`id` AS `serviceType.id`, `serviceType`.`name` AS `serviceType.name` FROM `orderstatus` AS `ticketHistory` LEFT OUTER JOIN `status` AS `status` ON `ticketHistory`.`statusid` = `status`.`id` LEFT OUTER JOIN `users` AS `performer` ON `ticketHistory`.`performerid` = `performer`.`id` LEFT OUTER JOIN `users` AS `owner` ON `ticketHistory`.`ownerid` = `owner`.`id` LEFT OUTER JOIN `servicetype` AS `serviceType` ON `ticketHistory`.`servicetypeid` = `serviceType`.`id` WHERE `ticketHistory`.`orderid` = '497073' ORDER BY `ticketHistory`.`statustime` ASC; 3ms
[2019-07-18 14:02:49.511] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/ticket-history?ticketId=497073 200 12ms 1.98kb
[2019-07-18 14:02:49.542] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/tickets/tree/497073?userId=1
[2019-07-18 14:02:49.544] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getTree
[2019-07-18 14:02:49.547] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:49.548] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `GetTopTicketId`('497073') AS `id`; 2ms
[2019-07-18 14:02:49.550] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getParams
[2019-07-18 14:02:49.550] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 14:02:49.553] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:49.554] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 0ms
[2019-07-18 14:02:49.554] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 14:02:49.558] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:49.558] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`id` = '496005'; 1ms
[2019-07-18 14:02:49.559] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 14:02:49.560] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 0,
  'perm--setPerformer': 0,
  'perm--comment': 0,
  'perm--status': 0,
  'perm--partOrder--needPart--addition': 0,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 0,
  id: 496005,
  number: 'D21017M',
  typeId: 1,
  statusId: 7,
  vendorId: 1,
  date: '2018-05-10',
  customerId: 7,
  serviceTypeId: 3,
  performerId: 245,
  commonFieldString: null,
  cityId: 1,
  serialNumber: null,
  equipmentId: 25674
}
[2019-07-18 14:02:49.561] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 14:02:49.561] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 0,
  'perm--setPerformer': 0,
  'perm--comment': 0,
  'perm--status': 0,
  'perm--partOrder--needPart--addition': 0,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 0,
  id: 496005,
  number: 'D21017M',
  typeId: 1,
  statusId: 7,
  vendorId: 1,
  date: '2018-05-10',
  customerId: 7,
  serviceTypeId: 3,
  performerId: 245,
  commonFieldString: null,
  cityId: 1,
  serialNumber: null,
  equipmentId: 25674
}
[2019-07-18 14:02:49.565] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:49.565] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 496005; 2ms
[2019-07-18 14:02:49.566] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 14:02:49.566] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - [
  {
    id: 497073,
    number: 'D815T',
    typeId: 7,
    statusId: 29,
    vendorId: 1,
    date: '2018-05-14',
    customerId: 12,
    serviceTypeId: 9,
    performerId: 245,
    commonFieldString: null,
    cityId: 1,
    serialNumber: null,
    equipmentId: 0,
    perm: {
      serviceType: 0,
      setPerformer: 0,
      comment: 1,
      status: 1,
      partOrder: [Object],
      instPart: [Object]
    }
  }
]
[2019-07-18 14:02:49.567] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 14:02:49.568] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  id: 497073,
  number: 'D815T',
  typeId: 7,
  statusId: 29,
  vendorId: 1,
  date: '2018-05-14',
  customerId: 12,
  serviceTypeId: 9,
  performerId: 245,
  commonFieldString: null,
  cityId: 1,
  serialNumber: null,
  equipmentId: 0,
  perm: {
    serviceType: 0,
    setPerformer: 0,
    comment: 1,
    status: 1,
    partOrder: { needPart: [Object], generalPart: [Object] },
    instPart: { addition: 0 }
  }
}
[2019-07-18 14:02:49.572] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:02:49.573] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 497073; 1ms
[2019-07-18 14:02:49.574] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/tickets/tree/497073?userId=1 200 32ms 1.27kb
[2019-07-18 14:03:32.512] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/service-types?checksum=0
[2019-07-18 14:03:32.520] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/statuses?checksum=0
[2019-07-18 14:03:32.525] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/types?checksum=0
[2019-07-18 14:03:32.527] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/cities?checksum=0
[2019-07-18 14:03:32.528] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/vendors?checksum=0
[2019-07-18 14:03:32.529] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/devices?checksum=0
[2019-07-18 14:03:32.534] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/users
[2019-07-18 14:03:32.560] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getByParams
[2019-07-18 14:03:32.578] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:03:32.582] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): CHECKSUM TABLE `servicetype`; 4ms
[2019-07-18 14:03:32.583] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:03:32.584] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): CHECKSUM TABLE `status`; 7ms
[2019-07-18 14:03:32.585] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:03:32.585] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): CHECKSUM TABLE `ordertype`; 9ms
[2019-07-18 14:03:32.586] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:03:32.586] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): CHECKSUM TABLE `city`; 9ms
[2019-07-18 14:03:32.589] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:03:32.589] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): CHECKSUM TABLE `vendors`; 12ms
[2019-07-18 14:03:32.591] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - checkSum: 2129809734
[2019-07-18 14:03:32.592] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:03:32.593] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): CHECKSUM TABLE `devices`; 9ms
[2019-07-18 14:03:32.597] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - checkSum: 832200969
[2019-07-18 14:03:32.599] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - checkSum: 797875960
[2019-07-18 14:03:32.623] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - checkSum: 469028310
[2019-07-18 14:03:32.625] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - checkSum: 1168970086
[2019-07-18 14:03:32.629] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:03:32.634] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `id`, `name` FROM `users` AS `user` WHERE `user`.`blocked` = 0 AND `user`.`name` != 'Administrator' ORDER BY `user`.`name`; 38ms
[2019-07-18 14:03:32.682] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - checkSum: 3672458130
[2019-07-18 14:03:32.683] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:03:32.684] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `id`, `name` FROM `servicetype` AS `serviceType` WHERE 1=1 ORDER BY `serviceType`.`name`; 87ms
[2019-07-18 14:03:32.690] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/users 200 156ms 11.29kb
[2019-07-18 14:03:32.691] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:03:32.693] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `id`, `name` FROM `ordertype` AS `type` WHERE 1=1 ORDER BY `type`.`name`; 10ms
[2019-07-18 14:03:32.717] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:03:32.721] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `id`, `name` FROM `status` AS `status` WHERE 1=1 ORDER BY `status`.`name`; 37ms
[2019-07-18 14:03:32.724] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:03:32.737] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `id`, `name` FROM `city` AS `city` WHERE 1=1 ORDER BY `city`.`name`; 43ms
[2019-07-18 14:03:32.747] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:03:32.749] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `id`, `name` FROM `vendors` AS `vendor` WHERE 1=1 ORDER BY `vendor`.`name`; 64ms
[2019-07-18 14:03:32.777] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/service-types?checksum=0 200 265ms 692b
[2019-07-18 14:03:32.795] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:03:32.797] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `id`, `name`, `parent_id` AS `parentId`, `vendor_id` AS `vendorId` FROM `devices` AS `device` WHERE 1=1 ORDER BY `device`.`name`; 108ms
[2019-07-18 14:03:32.839] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/types?checksum=0 200 314ms 674b
[2019-07-18 14:03:32.840] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/statuses?checksum=0 200 320ms 1.28kb
[2019-07-18 14:03:32.842] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/cities?checksum=0 200 315ms 1.13kb
[2019-07-18 14:03:32.847] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/vendors?checksum=0 200 319ms 1.66kb
[2019-07-18 14:03:32.859] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/devices?checksum=0 200 330ms 34.54kb
[2019-07-18 14:03:33.039] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/tickets?fields=%7B%22customer%22%3A%5B%22id%22%2C%22name%22%5D%2C%22equipment%22%3A%5B%22id%22%2C%22endWarrantyDate%22%2C%22id%22%2C%22endCBSWarrantyDate%22%2C%22id%22%2C%22serialNumber%22%2C%22id%22%2C%22regNumber%22%2C%22id%22%2C%22bnaFlag%22%5D%2C%22equipmentType%22%3A%5B%22id%22%2C%22name%22%2C%22model%22%5D%2C%22performer%22%3A%5B%22id%22%2C%22name%22%5D%2C%22ticket%22%3A%5B%22id%22%2C%22vendorId%22%2C%22typeId%22%2C%22number%22%2C%22serviceTypeId%22%2C%22date%22%2C%22warrantyFlag%22%2C%22cbsWarrantyFlag%22%2C%22commonFieldString%22%2C%22statusId%22%2C%22cityId%22%2C%22subcontractorFlag%22%2C%22reasonDescription%22%5D%2C%22timeout%22%3A%5B%22timeout%22%5D%7D&filters=%7B%22ticket%22%3A%7B%22statusId%22%3A%7B%22%24in%22%3A%5B1%2C3%2C4%2C5%2C6%2C15%2C18%2C20%2C21%2C22%2C24%2C25%2C26%2C27%2C29%2C30%2C31%5D%7D%2C%22date%22%3A%7B%22%24between%22%3A%5B%222000-01-01%22%2C%222019-07-18%22%5D%7D%7D%2C%22equipment%22%3A%7B%7D%2C%22timeout%22%3A%7B%7D%7D&sort=%7B%22ticket%22%3A%7B%22date%22%3A%22desc%22%7D%7D&limit=%5B100%2C0%5D&count=true&userId=1
[2019-07-18 14:03:33.043] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getParams
[2019-07-18 14:03:33.047] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 14:03:33.051] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:03:33.054] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 3ms
[2019-07-18 14:03:33.056] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 14:03:33.076] [Level { level: 20000, levelStr: 'INFO' }] [default] - getAll_DualSearch
[2019-07-18 14:03:33.076] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - params {
  raw: true,
  model: [Function: ticket] {
    sequelize: Sequelize {
      options: [Object],
      config: [Object],
      dialect: [MysqlDialect],
      queryInterface: [QueryInterface],
      models: [Object],
      modelManager: [ModelManager],
      connectionManager: [ConnectionManager],
      importCache: [Object],
      test: [Object]
    },
    options: {
      timestamps: false,
      validate: {},
      freezeTableName: false,
      underscored: false,
      underscoredAll: false,
      paranoid: false,
      rejectOnEmpty: false,
      whereCollection: [Object],
      schema: null,
      schemaDelimiter: '',
      defaultScope: {},
      scopes: [],
      indexes: [],
      name: [Object],
      omitNull: false,
      tableName: 'orders',
      sequelize: [Sequelize],
      hooks: {},
      uniqueKeys: {}
    },
    associations: {
      status: [BelongsTo],
      performer: [BelongsTo],
      city: [BelongsTo],
      equipment: [BelongsTo],
      customer: [BelongsTo],
      customerPerson: [BelongsTo],
      serviceType: [BelongsTo],
      vendor: [BelongsTo],
      seller: [BelongsTo],
      sellerPerson: [BelongsTo],
      contract: [BelongsTo],
      supplier: [BelongsTo],
      reason: [BelongsTo],
      timeout: [BelongsTo],
      generalParts: [HasMany],
      needParts: [HasMany],
      instParts: [HasMany],
      comments: [HasMany],
      history: [HasMany]
    },
    underscored: undefined,
    tableName: 'orders',
    _schema: null,
    _schemaDelimiter: '',
    rawAttributes: {
      id: [Object],
      parentId: [Object],
      typeId: [Object],
      statusId: [Object],
      sellerId: [Object],
      sellerPersonId: [Object],
      number: [Object],
      invoiceDate: [Object],
      numberFromCustomer: [Object],
      date: [Object],
      cityId: [Object],
      customerId: [Object],
      customerPersonId: [Object],
      contractId: [Object],
      vendorId: [Object],
      equipmentId: [Object],
      partName: [Object],
      partNumber: [Object],
      serialNumber: [Object],
      blockNumber: [Object],
      warrantyFlag: [Object],
      cbsWarrantyFlag: [Object],
      commonFieldString: [Object],
      equipSupplierId: [Object],
      serviceTypeId: [Object],
      description: [Object],
      ownerId: [Object],
      performerId: [Object],
      billNumber: [Object],
      billDate: [Object],
      onceFlag: [Object],
      checkedFlag: [Object],
      paidFlag: [Object],
      subcontractorFlag: [Object],
      retryFlag: [Object],
      archivedFlag: [Object],
      frozenFlag: [Object],
      failDescription: [Object],
      repairPrice: [Object],
      diagPrice: [Object],
      reasonId: [Object],
      reasonDescription: [Object],
      hash: [Object],
      detailsHash: [Object],
      perm: [Object]
    },
    primaryKeys: { id: [Object] },
    _timestampAttributes: {},
    _readOnlyAttributes: [],
    _hasReadOnlyAttributes: 0,
    _isReadOnlyAttribute: [Function: memoized] { cache: [MapCache] },
    _dataTypeChanges: {
      invoiceDate: [Function: _isChanged],
      date: [Function: _isChanged],
      billDate: [Function: _isChanged]
    },
    _dataTypeSanitizers: {
      invoiceDate: [Function: _sanitize],
      date: [Function: _sanitize],
      billDate: [Function: _sanitize]
    },
    _booleanAttributes: [],
    _dateAttributes: [ 'invoiceDate', 'date', 'billDate' ],
    _hstoreAttributes: [],
    _rangeAttributes: [],
    _jsonAttributes: [],
    _geometryAttributes: [],
    _virtualAttributes: [ 'perm' ],
    _defaultValues: {
      parentId: [Function: wrapper],
      sellerId: [Function: wrapper],
      sellerPersonId: [Function: wrapper],
      invoiceDate: [Function: wrapper],
      numberFromCustomer: [Function: wrapper],
      customerPersonId: [Function: wrapper],
      contractId: [Function: wrapper],
      equipmentId: [Function: wrapper],
      partName: [Function: wrapper],
      partNumber: [Function: wrapper],
      serialNumber: [Function: wrapper],
      blockNumber: [Function: wrapper],
      warrantyFlag: [Function: wrapper],
      cbsWarrantyFlag: [Function: wrapper],
      commonFieldString: [Function: wrapper],
      equipSupplierId: [Function: wrapper],
      description: [Function: wrapper],
      performerId: [Function: wrapper],
      billNumber: [Function: wrapper],
      billDate: [Function: wrapper],
      onceFlag: [Function: wrapper],
      checkedFlag: [Function: wrapper],
      paidFlag: [Function: wrapper],
      subcontractorFlag: [Function: wrapper],
      retryFlag: [Function: wrapper],
      archivedFlag: [Function: wrapper],
      frozenFlag: [Function: wrapper],
      failDescription: [Function: wrapper],
      repairPrice: [Function: wrapper],
      diagPrice: [Function: wrapper],
      reasonId: [Function: wrapper],
      reasonDescription: [Function: wrapper],
      hash: [Function: wrapper],
      detailsHash: [Function: wrapper]
    },
    fieldRawAttributesMap: {
      id: [Object],
      parentorderid: [Object],
      ordertypeid: [Object],
      statusid: [Object],
      seller_id: [Object],
      seller_cperson_id: [Object],
      ordernumber: [Object],
      invoicedate: [Object],
      onbycustomer: [Object],
      orderdate: [Object],
      cityid: [Object],
      customerid: [Object],
      cpersonid: [Object],
      contractid: [Object],
      vendorid: [Object],
      equipmentid: [Object],
      partname: [Object],
      partnumber: [Object],
      serialnumber: [Object],
      blocknumber: [Object],
      warranty: [Object],
      cbswarranty: [Object],
      sordernumber: [Object],
      equipsupplierid: [Object],
      servicetypeid: [Object],
      description: [Object],
      ownerid: [Object],
      performerid: [Object],
      billnumber: [Object],
      billdate: [Object],
      once: [Object],
      checked: [Object],
      paid_by_customer: [Object],
      subcontractor: [Object],
      retry: [Object],
      archived: [Object],
      frozen: [Object],
      fail_description: [Object],
      price: [Object],
      diagnostics: [Object],
      reason_id: [Object],
      reason_description: [Object],
      hash: [Object],
      details_hash: [Object],
      perm: [Object]
    },
    fieldAttributeMap: {
      parentorderid: 'parentId',
      ordertypeid: 'typeId',
      statusid: 'statusId',
      seller_id: 'sellerId',
      seller_cperson_id: 'sellerPersonId',
      ordernumber: 'number',
      invoicedate: 'invoiceDate',
      onbycustomer: 'numberFromCustomer',
      orderdate: 'date',
      cityid: 'cityId',
      customerid: 'customerId',
      cpersonid: 'customerPersonId',
      contractid: 'contractId',
      vendorid: 'vendorId',
      equipmentid: 'equipmentId',
      partname: 'partName',
      partnumber: 'partNumber',
      serialnumber: 'serialNumber',
      blocknumber: 'blockNumber',
      warranty: 'warrantyFlag',
      cbswarranty: 'cbsWarrantyFlag',
      sordernumber: 'commonFieldString',
      equipsupplierid: 'equipSupplierId',
      servicetypeid: 'serviceTypeId',
      ownerid: 'ownerId',
      performerid: 'performerId',
      billnumber: 'billNumber',
      billdate: 'billDate',
      once: 'onceFlag',
      checked: 'checkedFlag',
      paid_by_customer: 'paidFlag',
      subcontractor: 'subcontractorFlag',
      retry: 'retryFlag',
      archived: 'archivedFlag',
      frozen: 'frozenFlag',
      fail_description: 'failDescription',
      price: 'repairPrice',
      diagnostics: 'diagPrice',
      reason_id: 'reasonId',
      reason_description: 'reasonDescription',
      details_hash: 'detailsHash'
    },
    uniqueKeys: {},
    _hasBooleanAttributes: false,
    _isBooleanAttribute: [Function: memoized] { cache: [MapCache] },
    _hasDateAttributes: true,
    _isDateAttribute: [Function: memoized] { cache: [MapCache] },
    _hasHstoreAttributes: false,
    _isHstoreAttribute: [Function: memoized] { cache: [MapCache] },
    _hasRangeAttributes: false,
    _isRangeAttribute: [Function: memoized] { cache: [MapCache] },
    _hasJsonAttributes: false,
    _isJsonAttribute: [Function: memoized] { cache: [MapCache] },
    _hasVirtualAttributes: true,
    _isVirtualAttribute: [Function: memoized] { cache: [MapCache] },
    _hasGeometryAttributes: false,
    _isGeometryAttribute: [Function: memoized] { cache: [MapCache] },
    _hasDefaultValues: true,
    attributes: {
      id: [Object],
      parentId: [Object],
      typeId: [Object],
      statusId: [Object],
      sellerId: [Object],
      sellerPersonId: [Object],
      number: [Object],
      invoiceDate: [Object],
      numberFromCustomer: [Object],
      date: [Object],
      cityId: [Object],
      customerId: [Object],
      customerPersonId: [Object],
      contractId: [Object],
      vendorId: [Object],
      equipmentId: [Object],
      partName: [Object],
      partNumber: [Object],
      serialNumber: [Object],
      blockNumber: [Object],
      warrantyFlag: [Object],
      cbsWarrantyFlag: [Object],
      commonFieldString: [Object],
      equipSupplierId: [Object],
      serviceTypeId: [Object],
      description: [Object],
      ownerId: [Object],
      performerId: [Object],
      billNumber: [Object],
      billDate: [Object],
      onceFlag: [Object],
      checkedFlag: [Object],
      paidFlag: [Object],
      subcontractorFlag: [Object],
      retryFlag: [Object],
      archivedFlag: [Object],
      frozenFlag: [Object],
      failDescription: [Object],
      repairPrice: [Object],
      diagPrice: [Object],
      reasonId: [Object],
      reasonDescription: [Object],
      hash: [Object],
      detailsHash: [Object],
      perm: [Object]
    },
    tableAttributes: {
      id: [Object],
      parentId: [Object],
      typeId: [Object],
      statusId: [Object],
      sellerId: [Object],
      sellerPersonId: [Object],
      number: [Object],
      invoiceDate: [Object],
      numberFromCustomer: [Object],
      date: [Object],
      cityId: [Object],
      customerId: [Object],
      customerPersonId: [Object],
      contractId: [Object],
      vendorId: [Object],
      equipmentId: [Object],
      partName: [Object],
      partNumber: [Object],
      serialNumber: [Object],
      blockNumber: [Object],
      warrantyFlag: [Object],
      cbsWarrantyFlag: [Object],
      commonFieldString: [Object],
      equipSupplierId: [Object],
      serviceTypeId: [Object],
      description: [Object],
      ownerId: [Object],
      performerId: [Object],
      billNumber: [Object],
      billDate: [Object],
      onceFlag: [Object],
      checkedFlag: [Object],
      paidFlag: [Object],
      subcontractorFlag: [Object],
      retryFlag: [Object],
      archivedFlag: [Object],
      frozenFlag: [Object],
      failDescription: [Object],
      repairPrice: [Object],
      diagPrice: [Object],
      reasonId: [Object],
      reasonDescription: [Object],
      hash: [Object],
      detailsHash: [Object]
    },
    primaryKeyAttributes: [ 'id' ],
    primaryKeyAttribute: 'id',
    primaryKeyField: 'id',
    _hasPrimaryKeys: true,
    _isPrimaryKey: [Function: memoized] { cache: [MapCache] },
    autoIncrementAttribute: 'id',
    _scope: {},
    _scopeNames: [ 'defaultScope' ],
    myAssociations: [
           'status',      'performer',
             'city',      'equipment',
         'customer', 'customerPerson',
      'serviceType',         'vendor',
           'seller',   'sellerPerson',
         'contract',       'supplier',
           'reason',    'generalPart',
          'timeout',       'needPart',
         'instPart',        'history',
          'comment'
    ],
    getParams: [AsyncFunction],
    getTicketPerms: [AsyncFunction],
    getAll_SimpleSearch: [AsyncFunction],
    getAll_DualSearch: [AsyncFunction],
    getById: [AsyncFunction],
    tryChangeServiceType: [AsyncFunction],
    tryChangeStatus: [AsyncFunction],
    tryChangePerformer: [AsyncFunction],
    getTree: [AsyncFunction],
    transactionUpdateTicketStatus: [Function],
    transactionCreateTicket: [Function],
    transactionFindById: [Function],
    updateServiceType: [AsyncFunction]
  },
  include: [
    { model: [Function], required: true },
    { as: 'performer', model: [Function] },
    { model: [Function] },
    { include: [Object], model: [Function] },
    { model: [Function] },
    { as: 'customerPerson', model: [Function] },
    { model: [Function] },
    { model: [Function] },
    { as: 'seller', model: [Function] },
    { as: 'sellerPerson', model: [Function] },
    { model: [Function] },
    { model: [Function] },
    { model: [Function] },
    { attributes: [], model: [Function] },
    {
      include: [Object],
      where: [Object],
      required: false,
      model: [Function]
    },
    { include: [Array], separate: true, model: [Function] },
    { include: [Array], separate: true, model: [Function] },
    {
      include: [Array],
      as: 'history',
      separate: true,
      model: [Function]
    },
    { include: [Array], separate: true, model: [Function] }
  ],
  attributes: [
    [ [Fn], 'perm--serviceType' ],
    [ [Fn], 'perm--setPerformer' ],
    [ [Fn], 'perm--comment' ],
    [ [Fn], 'perm--status' ],
    [ [Fn], 'perm--partOrder--needPart--addition' ],
    [ [Fn], 'perm--partOrder--generalPart--addition' ],
    [ [Fn], 'perm--partOrder--generalPart--editing' ],
    [ [Fn], 'perm--instPart--addition' ]
  ]
}
[2019-07-18 14:03:33.094] [Level { level: 20000, levelStr: 'INFO' }] [default] - getSearch...
[2019-07-18 14:03:33.096] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - [Object: null prototype] {
  fields: '{"customer":["id","name"],"equipment":["id","endWarrantyDate","id","endCBSWarrantyDate","id","serialNumber","id","regNumber","id","bnaFlag"],"equipmentType":["id","name","model"],"performer":["id","name"],"ticket":["id","vendorId","typeId","number","serviceTypeId","date","warrantyFlag","cbsWarrantyFlag","commonFieldString","statusId","cityId","subcontractorFlag","reasonDescription"],"timeout":["timeout"]}',
  filters: '{"ticket":{"statusId":{"$in":[1,3,4,5,6,15,18,20,21,22,24,25,26,27,29,30,31]},"date":{"$between":["2000-01-01","2019-07-18"]}},"equipment":{},"timeout":{}}',
  sort: '{"ticket":{"date":"desc"}}',
  limit: '[100,0]',
  count: 'true',
  userId: '1'
}
[2019-07-18 14:03:33.101] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - fastSearch:  {
  limit: [ 100, 0 ],
  sort: { models: [ 'ticket' ], ticket: { date: 'desc' } },
  filters: {
    models: [ 'ticket', 'equipment', 'timeout' ],
    timeout: {},
    equipment: {},
    ticket: { date: [Object], statusId: [Object] }
  },
  fields: {
    models: [
      'customer',
      'equipment',
      'equipmentType',
      'performer',
      'ticket',
      'timeout'
    ],
    timeout: [ 'timeout' ],
    ticket: [
      'id',
      'vendorId',
      'typeId',
      'number',
      'serviceTypeId',
      'date',
      'warrantyFlag',
      'cbsWarrantyFlag',
      'commonFieldString',
      'statusId',
      'cityId',
      'subcontractorFlag',
      'reasonDescription'
    ],
    performer: [ 'id', 'name' ],
    equipmentType: [ 'id', 'name', 'model' ],
    equipment: [
      'id',
      'endWarrantyDate',
      'id',
      'endCBSWarrantyDate',
      'id',
      'serialNumber',
      'id',
      'regNumber',
      'id',
      'bnaFlag'
    ],
    customer: [ 'id', 'name' ]
  }
}
[2019-07-18 14:03:33.126] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.prepareSearch
[2019-07-18 14:03:33.127] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - searchObj:  {
  limit: [ 100, 0 ],
  sort: { models: [ 'ticket' ], ticket: { date: 'desc' } },
  filters: {
    models: [ 'ticket', 'equipment', 'timeout' ],
    timeout: {},
    equipment: {},
    ticket: { date: [Object], statusId: [Object] }
  },
  fields: { models: [ 'ticket' ], ticket: [ 'id' ] },
  checkedModels: [],
  order: []
}
[2019-07-18 14:03:33.127] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - search.filters {
  models: [ 'ticket', 'equipment', 'timeout' ],
  timeout: {},
  equipment: {},
  ticket: { date: { '$between': [Array] }, statusId: { '$in': [Array] } }
}
[2019-07-18 14:03:33.127] [Level { level: 20000, levelStr: 'INFO' }] [default] - checkKey:  date ticket
[2019-07-18 14:03:33.128] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - search.filters {
  models: [ 'ticket', 'equipment', 'timeout' ],
  timeout: {},
  equipment: {},
  ticket: { date: { '$between': [Array] }, statusId: { '$in': [Array] } }
}
[2019-07-18 14:03:33.128] [Level { level: 20000, levelStr: 'INFO' }] [default] - checkKey:  statusId ticket
[2019-07-18 14:03:33.129] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - search.order:  [ [ [ 'date', 'desc' ] ] ]
[2019-07-18 14:03:33.130] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - checkedModels:  [ 'ticket', 'ticket', 'ticket' ]
[2019-07-18 14:03:33.130] [Level { level: 20000, levelStr: 'INFO' }] [default] - deleteUnnecessaryIncludes:
[2019-07-18 14:03:33.131] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - search:  {"limit":[100,0],"sort":{"models":["ticket"],"ticket":{"date":"desc"}},"filters":{"models":["ticket","equipment","timeout"],"timeout":{},"equipment":{},"ticket":{"date":{"$between":["2000-01-01","2019-07-18"]},"statusId":{"$in":[1,3,4,5,6,15,18,20,21,22,24,25,26,27,29,30,31]}}},"fields":{"models":["ticket"],"ticket":["id"]},"checkedModels":["ticket","ticket","ticket"],"order":[[["date","desc"]]]}
[2019-07-18 14:03:33.131] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - [ 'ticket' ]
[2019-07-18 14:03:33.132] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - include:  []
[2019-07-18 14:03:33.133] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - params:  {
  raw: true,
  model: [Function: ticket] {
    sequelize: Sequelize {
      options: [Object],
      config: [Object],
      dialect: [MysqlDialect],
      queryInterface: [QueryInterface],
      models: [Object],
      modelManager: [ModelManager],
      connectionManager: [ConnectionManager],
      importCache: [Object],
      test: [Object]
    },
    options: {
      timestamps: false,
      validate: {},
      freezeTableName: false,
      underscored: false,
      underscoredAll: false,
      paranoid: false,
      rejectOnEmpty: false,
      whereCollection: [Object],
      schema: null,
      schemaDelimiter: '',
      defaultScope: {},
      scopes: [],
      indexes: [],
      name: [Object],
      omitNull: false,
      tableName: 'orders',
      sequelize: [Sequelize],
      hooks: {},
      uniqueKeys: {}
    },
    associations: {
      status: [BelongsTo],
      performer: [BelongsTo],
      city: [BelongsTo],
      equipment: [BelongsTo],
      customer: [BelongsTo],
      customerPerson: [BelongsTo],
      serviceType: [BelongsTo],
      vendor: [BelongsTo],
      seller: [BelongsTo],
      sellerPerson: [BelongsTo],
      contract: [BelongsTo],
      supplier: [BelongsTo],
      reason: [BelongsTo],
      timeout: [BelongsTo],
      generalParts: [HasMany],
      needParts: [HasMany],
      instParts: [HasMany],
      comments: [HasMany],
      history: [HasMany]
    },
    underscored: undefined,
    tableName: 'orders',
    _schema: null,
    _schemaDelimiter: '',
    rawAttributes: {
      id: [Object],
      parentId: [Object],
      typeId: [Object],
      statusId: [Object],
      sellerId: [Object],
      sellerPersonId: [Object],
      number: [Object],
      invoiceDate: [Object],
      numberFromCustomer: [Object],
      date: [Object],
      cityId: [Object],
      customerId: [Object],
      customerPersonId: [Object],
      contractId: [Object],
      vendorId: [Object],
      equipmentId: [Object],
      partName: [Object],
      partNumber: [Object],
      serialNumber: [Object],
      blockNumber: [Object],
      warrantyFlag: [Object],
      cbsWarrantyFlag: [Object],
      commonFieldString: [Object],
      equipSupplierId: [Object],
      serviceTypeId: [Object],
      description: [Object],
      ownerId: [Object],
      performerId: [Object],
      billNumber: [Object],
      billDate: [Object],
      onceFlag: [Object],
      checkedFlag: [Object],
      paidFlag: [Object],
      subcontractorFlag: [Object],
      retryFlag: [Object],
      archivedFlag: [Object],
      frozenFlag: [Object],
      failDescription: [Object],
      repairPrice: [Object],
      diagPrice: [Object],
      reasonId: [Object],
      reasonDescription: [Object],
      hash: [Object],
      detailsHash: [Object],
      perm: [Object]
    },
    primaryKeys: { id: [Object] },
    _timestampAttributes: {},
    _readOnlyAttributes: [],
    _hasReadOnlyAttributes: 0,
    _isReadOnlyAttribute: [Function: memoized] { cache: [MapCache] },
    _dataTypeChanges: {
      invoiceDate: [Function: _isChanged],
      date: [Function: _isChanged],
      billDate: [Function: _isChanged]
    },
    _dataTypeSanitizers: {
      invoiceDate: [Function: _sanitize],
      date: [Function: _sanitize],
      billDate: [Function: _sanitize]
    },
    _booleanAttributes: [],
    _dateAttributes: [ 'invoiceDate', 'date', 'billDate' ],
    _hstoreAttributes: [],
    _rangeAttributes: [],
    _jsonAttributes: [],
    _geometryAttributes: [],
    _virtualAttributes: [ 'perm' ],
    _defaultValues: {
      parentId: [Function: wrapper],
      sellerId: [Function: wrapper],
      sellerPersonId: [Function: wrapper],
      invoiceDate: [Function: wrapper],
      numberFromCustomer: [Function: wrapper],
      customerPersonId: [Function: wrapper],
      contractId: [Function: wrapper],
      equipmentId: [Function: wrapper],
      partName: [Function: wrapper],
      partNumber: [Function: wrapper],
      serialNumber: [Function: wrapper],
      blockNumber: [Function: wrapper],
      warrantyFlag: [Function: wrapper],
      cbsWarrantyFlag: [Function: wrapper],
      commonFieldString: [Function: wrapper],
      equipSupplierId: [Function: wrapper],
      description: [Function: wrapper],
      performerId: [Function: wrapper],
      billNumber: [Function: wrapper],
      billDate: [Function: wrapper],
      onceFlag: [Function: wrapper],
      checkedFlag: [Function: wrapper],
      paidFlag: [Function: wrapper],
      subcontractorFlag: [Function: wrapper],
      retryFlag: [Function: wrapper],
      archivedFlag: [Function: wrapper],
      frozenFlag: [Function: wrapper],
      failDescription: [Function: wrapper],
      repairPrice: [Function: wrapper],
      diagPrice: [Function: wrapper],
      reasonId: [Function: wrapper],
      reasonDescription: [Function: wrapper],
      hash: [Function: wrapper],
      detailsHash: [Function: wrapper]
    },
    fieldRawAttributesMap: {
      id: [Object],
      parentorderid: [Object],
      ordertypeid: [Object],
      statusid: [Object],
      seller_id: [Object],
      seller_cperson_id: [Object],
      ordernumber: [Object],
      invoicedate: [Object],
      onbycustomer: [Object],
      orderdate: [Object],
      cityid: [Object],
      customerid: [Object],
      cpersonid: [Object],
      contractid: [Object],
      vendorid: [Object],
      equipmentid: [Object],
      partname: [Object],
      partnumber: [Object],
      serialnumber: [Object],
      blocknumber: [Object],
      warranty: [Object],
      cbswarranty: [Object],
      sordernumber: [Object],
      equipsupplierid: [Object],
      servicetypeid: [Object],
      description: [Object],
      ownerid: [Object],
      performerid: [Object],
      billnumber: [Object],
      billdate: [Object],
      once: [Object],
      checked: [Object],
      paid_by_customer: [Object],
      subcontractor: [Object],
      retry: [Object],
      archived: [Object],
      frozen: [Object],
      fail_description: [Object],
      price: [Object],
      diagnostics: [Object],
      reason_id: [Object],
      reason_description: [Object],
      hash: [Object],
      details_hash: [Object],
      perm: [Object]
    },
    fieldAttributeMap: {
      parentorderid: 'parentId',
      ordertypeid: 'typeId',
      statusid: 'statusId',
      seller_id: 'sellerId',
      seller_cperson_id: 'sellerPersonId',
      ordernumber: 'number',
      invoicedate: 'invoiceDate',
      onbycustomer: 'numberFromCustomer',
      orderdate: 'date',
      cityid: 'cityId',
      customerid: 'customerId',
      cpersonid: 'customerPersonId',
      contractid: 'contractId',
      vendorid: 'vendorId',
      equipmentid: 'equipmentId',
      partname: 'partName',
      partnumber: 'partNumber',
      serialnumber: 'serialNumber',
      blocknumber: 'blockNumber',
      warranty: 'warrantyFlag',
      cbswarranty: 'cbsWarrantyFlag',
      sordernumber: 'commonFieldString',
      equipsupplierid: 'equipSupplierId',
      servicetypeid: 'serviceTypeId',
      ownerid: 'ownerId',
      performerid: 'performerId',
      billnumber: 'billNumber',
      billdate: 'billDate',
      once: 'onceFlag',
      checked: 'checkedFlag',
      paid_by_customer: 'paidFlag',
      subcontractor: 'subcontractorFlag',
      retry: 'retryFlag',
      archived: 'archivedFlag',
      frozen: 'frozenFlag',
      fail_description: 'failDescription',
      price: 'repairPrice',
      diagnostics: 'diagPrice',
      reason_id: 'reasonId',
      reason_description: 'reasonDescription',
      details_hash: 'detailsHash'
    },
    uniqueKeys: {},
    _hasBooleanAttributes: false,
    _isBooleanAttribute: [Function: memoized] { cache: [MapCache] },
    _hasDateAttributes: true,
    _isDateAttribute: [Function: memoized] { cache: [MapCache] },
    _hasHstoreAttributes: false,
    _isHstoreAttribute: [Function: memoized] { cache: [MapCache] },
    _hasRangeAttributes: false,
    _isRangeAttribute: [Function: memoized] { cache: [MapCache] },
    _hasJsonAttributes: false,
    _isJsonAttribute: [Function: memoized] { cache: [MapCache] },
    _hasVirtualAttributes: true,
    _isVirtualAttribute: [Function: memoized] { cache: [MapCache] },
    _hasGeometryAttributes: false,
    _isGeometryAttribute: [Function: memoized] { cache: [MapCache] },
    _hasDefaultValues: true,
    attributes: {
      id: [Object],
      parentId: [Object],
      typeId: [Object],
      statusId: [Object],
      sellerId: [Object],
      sellerPersonId: [Object],
      number: [Object],
      invoiceDate: [Object],
      numberFromCustomer: [Object],
      date: [Object],
      cityId: [Object],
      customerId: [Object],
      customerPersonId: [Object],
      contractId: [Object],
      vendorId: [Object],
      equipmentId: [Object],
      partName: [Object],
      partNumber: [Object],
      serialNumber: [Object],
      blockNumber: [Object],
      warrantyFlag: [Object],
      cbsWarrantyFlag: [Object],
      commonFieldString: [Object],
      equipSupplierId: [Object],
      serviceTypeId: [Object],
      description: [Object],
      ownerId: [Object],
      performerId: [Object],
      billNumber: [Object],
      billDate: [Object],
      onceFlag: [Object],
      checkedFlag: [Object],
      paidFlag: [Object],
      subcontractorFlag: [Object],
      retryFlag: [Object],
      archivedFlag: [Object],
      frozenFlag: [Object],
      failDescription: [Object],
      repairPrice: [Object],
      diagPrice: [Object],
      reasonId: [Object],
      reasonDescription: [Object],
      hash: [Object],
      detailsHash: [Object],
      perm: [Object]
    },
    tableAttributes: {
      id: [Object],
      parentId: [Object],
      typeId: [Object],
      statusId: [Object],
      sellerId: [Object],
      sellerPersonId: [Object],
      number: [Object],
      invoiceDate: [Object],
      numberFromCustomer: [Object],
      date: [Object],
      cityId: [Object],
      customerId: [Object],
      customerPersonId: [Object],
      contractId: [Object],
      vendorId: [Object],
      equipmentId: [Object],
      partName: [Object],
      partNumber: [Object],
      serialNumber: [Object],
      blockNumber: [Object],
      warrantyFlag: [Object],
      cbsWarrantyFlag: [Object],
      commonFieldString: [Object],
      equipSupplierId: [Object],
      serviceTypeId: [Object],
      description: [Object],
      ownerId: [Object],
      performerId: [Object],
      billNumber: [Object],
      billDate: [Object],
      onceFlag: [Object],
      checkedFlag: [Object],
      paidFlag: [Object],
      subcontractorFlag: [Object],
      retryFlag: [Object],
      archivedFlag: [Object],
      frozenFlag: [Object],
      failDescription: [Object],
      repairPrice: [Object],
      diagPrice: [Object],
      reasonId: [Object],
      reasonDescription: [Object],
      hash: [Object],
      detailsHash: [Object]
    },
    primaryKeyAttributes: [ 'id' ],
    primaryKeyAttribute: 'id',
    primaryKeyField: 'id',
    _hasPrimaryKeys: true,
    _isPrimaryKey: [Function: memoized] { cache: [MapCache] },
    autoIncrementAttribute: 'id',
    _scope: {},
    _scopeNames: [ 'defaultScope' ],
    myAssociations: [
           'status',      'performer',
             'city',      'equipment',
         'customer', 'customerPerson',
      'serviceType',         'vendor',
           'seller',   'sellerPerson',
         'contract',       'supplier',
           'reason',    'generalPart',
          'timeout',       'needPart',
         'instPart',        'history',
          'comment'
    ],
    getParams: [AsyncFunction],
    getTicketPerms: [AsyncFunction],
    getAll_SimpleSearch: [AsyncFunction],
    getAll_DualSearch: [AsyncFunction],
    getById: [AsyncFunction],
    tryChangeServiceType: [AsyncFunction],
    tryChangeStatus: [AsyncFunction],
    tryChangePerformer: [AsyncFunction],
    getTree: [AsyncFunction],
    transactionUpdateTicketStatus: [Function],
    transactionCreateTicket: [Function],
    transactionFindById: [Function],
    updateServiceType: [AsyncFunction]
  },
  include: [],
  attributes: [ 'id' ],
  where: { date: { '$between': [Array] }, statusId: { '$in': [Array] } },
  order: [ [ 'date', 'desc' ] ],
  limit: 100,
  offset: 0
}
[2019-07-18 14:03:33.161] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:03:33.180] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `id` FROM `orders` AS `ticket` WHERE `ticket`.`orderdate` BETWEEN '2000-01-01' AND '2019-07-18' AND `ticket`.`statusid` IN (1, 3, 4, 5, 6, 15, 18, 20, 21, 22, 24, 25, 26, 27, 29, 30, 31) ORDER BY `ticket`.`orderdate` DESC LIMIT 0, 100; 5ms
[2019-07-18 14:03:33.184] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:03:33.185] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT count(`ticket`.`id`) AS `count` FROM `orders` AS `ticket` WHERE `ticket`.`orderdate` BETWEEN '2000-01-01' AND '2019-07-18' AND `ticket`.`statusid` IN (1, 3, 4, 5, 6, 15, 18, 20, 21, 22, 24, 25, 26, 27, 29, 30, 31); 33ms
[2019-07-18 14:03:33.189] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - _tickets: [
  { id: 497078 }, { id: 497077 }, { id: 497076 }, { id: 497075 },
  { id: 497074 }, { id: 497073 }, { id: 497072 }, { id: 497071 },
  { id: 497070 }, { id: 497069 }, { id: 497068 }, { id: 497067 },
  { id: 497066 }, { id: 497065 }, { id: 497064 }, { id: 497063 },
  { id: 497062 }, { id: 497061 }, { id: 497060 }, { id: 497059 },
  { id: 497058 }, { id: 497057 }, { id: 497056 }, { id: 497055 },
  { id: 497054 }, { id: 497053 }, { id: 497052 }, { id: 497051 },
  { id: 497050 }, { id: 497049 }, { id: 497048 }, { id: 497047 },
  { id: 497046 }, { id: 497045 }, { id: 497044 }, { id: 497043 },
  { id: 497042 }, { id: 497041 }, { id: 497040 }, { id: 497039 },
  { id: 497038 }, { id: 497037 }, { id: 497036 }, { id: 497035 },
  { id: 497034 }, { id: 497033 }, { id: 497032 }, { id: 497031 },
  { id: 497030 }, { id: 497029 }, { id: 497028 }, { id: 497027 },
  { id: 497026 }, { id: 497025 }, { id: 497023 }, { id: 497022 },
  { id: 497021 }, { id: 497020 }, { id: 497019 }, { id: 497018 },
  { id: 497017 }, { id: 497015 }, { id: 497014 }, { id: 497013 },
  { id: 497012 }, { id: 497011 }, { id: 497010 }, { id: 497009 },
  { id: 497008 }, { id: 497007 }, { id: 497006 }, { id: 497004 },
  { id: 497003 }, { id: 497002 }, { id: 497001 }, { id: 497000 },
  { id: 496999 }, { id: 496998 }, { id: 496997 }, { id: 496996 },
  { id: 496995 }, { id: 496994 }, { id: 496993 }, { id: 496992 },
  { id: 496991 }, { id: 496990 }, { id: 496989 }, { id: 496988 },
  { id: 496987 }, { id: 496986 }, { id: 496984 }, { id: 496983 },
  { id: 496982 }, { id: 496981 }, { id: 496979 }, { id: 496977 },
  { id: 496976 }, { id: 496975 }, { id: 496974 }, { id: 496972 }
]
[2019-07-18 14:03:33.192] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.prepareSearch
[2019-07-18 14:03:33.192] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - searchObj:  {
  fields: {
    customer: [ 'id', 'name' ],
    equipment: [
      'id',
      'endWarrantyDate',
      'id',
      'endCBSWarrantyDate',
      'id',
      'serialNumber',
      'id',
      'regNumber',
      'id',
      'bnaFlag'
    ],
    equipmentType: [ 'id', 'name', 'model' ],
    performer: [ 'id', 'name' ],
    ticket: [
      'id',
      'vendorId',
      'typeId',
      'number',
      'serviceTypeId',
      'date',
      'warrantyFlag',
      'cbsWarrantyFlag',
      'commonFieldString',
      'statusId',
      'cityId',
      'subcontractorFlag',
      'reasonDescription'
    ],
    timeout: [ 'timeout' ],
    models: [
      'customer',
      'equipment',
      'equipmentType',
      'performer',
      'ticket',
      'timeout'
    ]
  },
  filters: { models: [ 'ticket' ], ticket: { id: [Object] } },
  sort: { ticket: { date: 'desc' }, models: [ 'ticket' ] },
  checkedModels: [],
  order: []
}
[2019-07-18 14:03:33.194] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - search.filters { models: [ 'ticket' ], ticket: { id: { '$in': [Array] } } }
[2019-07-18 14:03:33.195] [Level { level: 20000, levelStr: 'INFO' }] [default] - checkKey:  id ticket
[2019-07-18 14:03:33.197] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - search.order:  [ [ [ 'date', 'desc' ] ] ]
[2019-07-18 14:03:33.199] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - checkedModels:  [ 'ticket', 'ticket' ]
[2019-07-18 14:03:33.200] [Level { level: 20000, levelStr: 'INFO' }] [default] - deleteUnnecessaryIncludes:
[2019-07-18 14:03:33.201] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - search:  {"fields":{"customer":["id","name"],"equipment":["id","endWarrantyDate","id","endCBSWarrantyDate","id","serialNumber","id","regNumber","id","bnaFlag"],"equipmentType":["id","name","model"],"performer":["id","name"],"ticket":["id","vendorId","typeId","number","serviceTypeId","date","warrantyFlag","cbsWarrantyFlag","commonFieldString","statusId","cityId","subcontractorFlag","reasonDescription"],"timeout":["timeout"],"models":["customer","equipment","equipmentType","performer","ticket","timeout"]},"filters":{"models":["ticket"],"ticket":{"id":{"$in":[497078,497077,497076,497075,497074,497073,497072,497071,497070,497069,497068,497067,497066,497065,497064,497063,497062,497061,497060,497059,497058,497057,497056,497055,497054,497053,497052,497051,497050,497049,497048,497047,497046,497045,497044,497043,497042,497041,497040,497039,497038,497037,497036,497035,497034,497033,497032,497031,497030,497029,497028,497027,497026,497025,497023,497022,497021,497020,497019,497018,497017,497015,497014,497013,497012,497011,497010,497009,497008,497007,497006,497004,497003,497002,497001,497000,496999,496998,496997,496996,496995,496994,496993,496992,496991,496990,496989,496988,496987,496986,496984,496983,496982,496981,496979,496977,496976,496975,496974,496972]}}},"sort":{"ticket":{"date":"desc"},"models":["ticket"]},"checkedModels":["ticket","ticket"],"order":[[["date","desc"]]]}
[2019-07-18 14:03:33.202] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - [ 'ticket' ]
[2019-07-18 14:03:33.204] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - include:  [
  {
    model: [Function: status] {
      sequelize: [Sequelize],
      options: [Object],
      associations: {},
      underscored: undefined,
      tableName: 'status',
      _schema: null,
      _schemaDelimiter: '',
      rawAttributes: [Object],
      primaryKeys: [Object],
      _timestampAttributes: {},
      _readOnlyAttributes: [],
      _hasReadOnlyAttributes: 0,
      _isReadOnlyAttribute: [Function],
      _dataTypeChanges: {},
      _dataTypeSanitizers: {},
      _booleanAttributes: [],
      _dateAttributes: [],
      _hstoreAttributes: [],
      _rangeAttributes: [],
      _jsonAttributes: [],
      _geometryAttributes: [],
      _virtualAttributes: [],
      _defaultValues: [Object],
      fieldRawAttributesMap: [Object],
      fieldAttributeMap: {},
      uniqueKeys: {},
      _hasBooleanAttributes: false,
      _isBooleanAttribute: [Function],
      _hasDateAttributes: false,
      _isDateAttribute: [Function],
      _hasHstoreAttributes: false,
      _isHstoreAttribute: [Function],
      _hasRangeAttributes: false,
      _isRangeAttribute: [Function],
      _hasJsonAttributes: false,
      _isJsonAttribute: [Function],
      _hasVirtualAttributes: false,
      _isVirtualAttribute: [Function],
      _hasGeometryAttributes: false,
      _isGeometryAttribute: [Function],
      _hasDefaultValues: true,
      attributes: [Object],
      tableAttributes: [Object],
      primaryKeyAttributes: [Array],
      primaryKeyAttribute: 'id',
      primaryKeyField: 'id',
      _hasPrimaryKeys: true,
      _isPrimaryKey: [Function],
      autoIncrementAttribute: 'id',
      _scope: {},
      _scopeNames: [Array],
      Values: [Object],
      getNextStatus: [Function]
    },
    required: true,
    attributes: []
  },
  {
    as: 'performer',
    model: [Function: user] {
      sequelize: [Sequelize],
      options: [Object],
      associations: [Object],
      underscored: undefined,
      tableName: 'users',
      _schema: null,
      _schemaDelimiter: '',
      rawAttributes: [Object],
      primaryKeys: [Object],
      _timestampAttributes: {},
      _readOnlyAttributes: [],
      _hasReadOnlyAttributes: 0,
      _isReadOnlyAttribute: [Function],
      _dataTypeChanges: {},
      _dataTypeSanitizers: [Object],
      _booleanAttributes: [Array],
      _dateAttributes: [],
      _hstoreAttributes: [],
      _rangeAttributes: [],
      _jsonAttributes: [],
      _geometryAttributes: [],
      _virtualAttributes: [],
      _defaultValues: [Object],
      fieldRawAttributesMap: [Object],
      fieldAttributeMap: [Object],
      uniqueKeys: {},
      _hasBooleanAttributes: true,
      _isBooleanAttribute: [Function],
      _hasDateAttributes: false,
      _isDateAttribute: [Function],
      _hasHstoreAttributes: false,
      _isHstoreAttribute: [Function],
      _hasRangeAttributes: false,
      _isRangeAttribute: [Function],
      _hasJsonAttributes: false,
      _isJsonAttribute: [Function],
      _hasVirtualAttributes: false,
      _isVirtualAttribute: [Function],
      _hasGeometryAttributes: false,
      _isGeometryAttribute: [Function],
      _hasDefaultValues: true,
      attributes: [Object],
      tableAttributes: [Object],
      primaryKeyAttributes: [Array],
      primaryKeyAttribute: 'id',
      primaryKeyField: 'id',
      _hasPrimaryKeys: true,
      _isPrimaryKey: [Function],
      autoIncrementAttribute: 'id',
      _scope: {},
      _scopeNames: [Array],
      RoleValues: [Object],
      getUserRole: [AsyncFunction],
      getUserRoleId: [AsyncFunction],
      autorize: [AsyncFunction],
      getByParams: [AsyncFunction]
    },
    attributes: [ 'id', 'name' ]
  },
  {
    include: { attributes: [Array], model: [Function] },
    model: [Function: equipment] {
      sequelize: [Sequelize],
      options: [Object],
      associations: [Object],
      underscored: undefined,
      tableName: 'equipment',
      _schema: null,
      _schemaDelimiter: '',
      rawAttributes: [Object],
      primaryKeys: [Object],
      _timestampAttributes: {},
      _readOnlyAttributes: [],
      _hasReadOnlyAttributes: 0,
      _isReadOnlyAttribute: [Function],
      _dataTypeChanges: [Object],
      _dataTypeSanitizers: [Object],
      _booleanAttributes: [],
      _dateAttributes: [Array],
      _hstoreAttributes: [],
      _rangeAttributes: [],
      _jsonAttributes: [],
      _geometryAttributes: [],
      _virtualAttributes: [],
      _defaultValues: [Object],
      fieldRawAttributesMap: [Object],
      fieldAttributeMap: [Object],
      uniqueKeys: {},
      _hasBooleanAttributes: false,
      _isBooleanAttribute: [Function],
      _hasDateAttributes: true,
      _isDateAttribute: [Function],
      _hasHstoreAttributes: false,
      _isHstoreAttribute: [Function],
      _hasRangeAttributes: false,
      _isRangeAttribute: [Function],
      _hasJsonAttributes: false,
      _isJsonAttribute: [Function],
      _hasVirtualAttributes: false,
      _isVirtualAttribute: [Function],
      _hasGeometryAttributes: false,
      _isGeometryAttribute: [Function],
      _hasDefaultValues: true,
      attributes: [Object],
      tableAttributes: [Object],
      primaryKeyAttributes: [Array],
      primaryKeyAttribute: 'id',
      primaryKeyField: 'id',
      _hasPrimaryKeys: true,
      _isPrimaryKey: [Function],
      autoIncrementAttribute: 'id',
      _scope: {},
      _scopeNames: [Array],
      Values: [Object],
      myAssociations: [Array]
    },
    attributes: [
      'id',
      'endWarrantyDate',
      'id',
      'endCBSWarrantyDate',
      'id',
      'serialNumber',
      'id',
      'regNumber',
      'id',
      'bnaFlag'
    ]
  },
  {
    model: [Function: customer] {
      sequelize: [Sequelize],
      options: [Object],
      associations: {},
      underscored: undefined,
      tableName: 'customers',
      _schema: null,
      _schemaDelimiter: '',
      rawAttributes: [Object],
      primaryKeys: [Object],
      _timestampAttributes: {},
      _readOnlyAttributes: [],
      _hasReadOnlyAttributes: 0,
      _isReadOnlyAttribute: [Function],
      _dataTypeChanges: {},
      _dataTypeSanitizers: {},
      _booleanAttributes: [],
      _dateAttributes: [],
      _hstoreAttributes: [],
      _rangeAttributes: [],
      _jsonAttributes: [],
      _geometryAttributes: [],
      _virtualAttributes: [],
      _defaultValues: [Object],
      fieldRawAttributesMap: [Object],
      fieldAttributeMap: [Object],
      uniqueKeys: {},
      _hasBooleanAttributes: false,
      _isBooleanAttribute: [Function],
      _hasDateAttributes: false,
      _isDateAttribute: [Function],
      _hasHstoreAttributes: false,
      _isHstoreAttribute: [Function],
      _hasRangeAttributes: false,
      _isRangeAttribute: [Function],
      _hasJsonAttributes: false,
      _isJsonAttribute: [Function],
      _hasVirtualAttributes: false,
      _isVirtualAttribute: [Function],
      _hasGeometryAttributes: false,
      _isGeometryAttribute: [Function],
      _hasDefaultValues: true,
      attributes: [Object],
      tableAttributes: [Object],
      primaryKeyAttributes: [Array],
      primaryKeyAttribute: 'id',
      primaryKeyField: 'id',
      _hasPrimaryKeys: true,
      _isPrimaryKey: [Function],
      autoIncrementAttribute: 'id',
      _scope: {},
      _scopeNames: [Array],
      Values: [Object],
      getByName: [Function]
    },
    attributes: [ 'id', 'name' ]
  },
  {
    include: { model: [Function], attributes: [] },
    where: { activeFlag: 1 },
    required: false,
    model: [Function: timeout] {
      sequelize: [Sequelize],
      options: [Object],
      associations: [Object],
      underscored: undefined,
      tableName: 'order_timeout',
      _schema: null,
      _schemaDelimiter: '',
      rawAttributes: [Object],
      primaryKeys: [Object],
      _timestampAttributes: {},
      _readOnlyAttributes: [],
      _hasReadOnlyAttributes: 0,
      _isReadOnlyAttribute: [Function],
      _dataTypeChanges: [Object],
      _dataTypeSanitizers: [Object],
      _booleanAttributes: [],
      _dateAttributes: [Array],
      _hstoreAttributes: [],
      _rangeAttributes: [],
      _jsonAttributes: [],
      _geometryAttributes: [],
      _virtualAttributes: [],
      _defaultValues: [Object],
      fieldRawAttributesMap: [Object],
      fieldAttributeMap: [Object],
      uniqueKeys: {},
      _hasBooleanAttributes: false,
      _isBooleanAttribute: [Function],
      _hasDateAttributes: true,
      _isDateAttribute: [Function],
      _hasHstoreAttributes: false,
      _isHstoreAttribute: [Function],
      _hasRangeAttributes: false,
      _isRangeAttribute: [Function],
      _hasJsonAttributes: false,
      _isJsonAttribute: [Function],
      _hasVirtualAttributes: false,
      _isVirtualAttribute: [Function],
      _hasGeometryAttributes: false,
      _isGeometryAttribute: [Function],
      _hasDefaultValues: true,
      attributes: [Object],
      tableAttributes: [Object],
      primaryKeyAttributes: [Array],
      primaryKeyAttribute: 'ticketId',
      primaryKeyField: 'order_id',
      _hasPrimaryKeys: true,
      _isPrimaryKey: [Function],
      autoIncrementAttribute: null,
      _scope: {},
      _scopeNames: [Array],
      transactionCreateTimeout: [AsyncFunction],
      create: [Function],
      getAll: [AsyncFunction],
      deactivate: [Function],
      myAssociations: [Array]
    },
    attributes: [ 'timeout' ]
  }
]
[2019-07-18 14:03:33.214] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - params:  {
  raw: true,
  model: [Function: ticket] {
    sequelize: Sequelize {
      options: [Object],
      config: [Object],
      dialect: [MysqlDialect],
      queryInterface: [QueryInterface],
      models: [Object],
      modelManager: [ModelManager],
      connectionManager: [ConnectionManager],
      importCache: [Object],
      test: [Object]
    },
    options: {
      timestamps: false,
      validate: {},
      freezeTableName: false,
      underscored: false,
      underscoredAll: false,
      paranoid: false,
      rejectOnEmpty: false,
      whereCollection: [Object],
      schema: null,
      schemaDelimiter: '',
      defaultScope: {},
      scopes: [],
      indexes: [],
      name: [Object],
      omitNull: false,
      tableName: 'orders',
      sequelize: [Sequelize],
      hooks: {},
      uniqueKeys: {}
    },
    associations: {
      status: [BelongsTo],
      performer: [BelongsTo],
      city: [BelongsTo],
      equipment: [BelongsTo],
      customer: [BelongsTo],
      customerPerson: [BelongsTo],
      serviceType: [BelongsTo],
      vendor: [BelongsTo],
      seller: [BelongsTo],
      sellerPerson: [BelongsTo],
      contract: [BelongsTo],
      supplier: [BelongsTo],
      reason: [BelongsTo],
      timeout: [BelongsTo],
      generalParts: [HasMany],
      needParts: [HasMany],
      instParts: [HasMany],
      comments: [HasMany],
      history: [HasMany]
    },
    underscored: undefined,
    tableName: 'orders',
    _schema: null,
    _schemaDelimiter: '',
    rawAttributes: {
      id: [Object],
      parentId: [Object],
      typeId: [Object],
      statusId: [Object],
      sellerId: [Object],
      sellerPersonId: [Object],
      number: [Object],
      invoiceDate: [Object],
      numberFromCustomer: [Object],
      date: [Object],
      cityId: [Object],
      customerId: [Object],
      customerPersonId: [Object],
      contractId: [Object],
      vendorId: [Object],
      equipmentId: [Object],
      partName: [Object],
      partNumber: [Object],
      serialNumber: [Object],
      blockNumber: [Object],
      warrantyFlag: [Object],
      cbsWarrantyFlag: [Object],
      commonFieldString: [Object],
      equipSupplierId: [Object],
      serviceTypeId: [Object],
      description: [Object],
      ownerId: [Object],
      performerId: [Object],
      billNumber: [Object],
      billDate: [Object],
      onceFlag: [Object],
      checkedFlag: [Object],
      paidFlag: [Object],
      subcontractorFlag: [Object],
      retryFlag: [Object],
      archivedFlag: [Object],
      frozenFlag: [Object],
      failDescription: [Object],
      repairPrice: [Object],
      diagPrice: [Object],
      reasonId: [Object],
      reasonDescription: [Object],
      hash: [Object],
      detailsHash: [Object],
      perm: [Object]
    },
    primaryKeys: { id: [Object] },
    _timestampAttributes: {},
    _readOnlyAttributes: [],
    _hasReadOnlyAttributes: 0,
    _isReadOnlyAttribute: [Function: memoized] { cache: [MapCache] },
    _dataTypeChanges: {
      invoiceDate: [Function: _isChanged],
      date: [Function: _isChanged],
      billDate: [Function: _isChanged]
    },
    _dataTypeSanitizers: {
      invoiceDate: [Function: _sanitize],
      date: [Function: _sanitize],
      billDate: [Function: _sanitize]
    },
    _booleanAttributes: [],
    _dateAttributes: [ 'invoiceDate', 'date', 'billDate' ],
    _hstoreAttributes: [],
    _rangeAttributes: [],
    _jsonAttributes: [],
    _geometryAttributes: [],
    _virtualAttributes: [ 'perm' ],
    _defaultValues: {
      parentId: [Function: wrapper],
      sellerId: [Function: wrapper],
      sellerPersonId: [Function: wrapper],
      invoiceDate: [Function: wrapper],
      numberFromCustomer: [Function: wrapper],
      customerPersonId: [Function: wrapper],
      contractId: [Function: wrapper],
      equipmentId: [Function: wrapper],
      partName: [Function: wrapper],
      partNumber: [Function: wrapper],
      serialNumber: [Function: wrapper],
      blockNumber: [Function: wrapper],
      warrantyFlag: [Function: wrapper],
      cbsWarrantyFlag: [Function: wrapper],
      commonFieldString: [Function: wrapper],
      equipSupplierId: [Function: wrapper],
      description: [Function: wrapper],
      performerId: [Function: wrapper],
      billNumber: [Function: wrapper],
      billDate: [Function: wrapper],
      onceFlag: [Function: wrapper],
      checkedFlag: [Function: wrapper],
      paidFlag: [Function: wrapper],
      subcontractorFlag: [Function: wrapper],
      retryFlag: [Function: wrapper],
      archivedFlag: [Function: wrapper],
      frozenFlag: [Function: wrapper],
      failDescription: [Function: wrapper],
      repairPrice: [Function: wrapper],
      diagPrice: [Function: wrapper],
      reasonId: [Function: wrapper],
      reasonDescription: [Function: wrapper],
      hash: [Function: wrapper],
      detailsHash: [Function: wrapper]
    },
    fieldRawAttributesMap: {
      id: [Object],
      parentorderid: [Object],
      ordertypeid: [Object],
      statusid: [Object],
      seller_id: [Object],
      seller_cperson_id: [Object],
      ordernumber: [Object],
      invoicedate: [Object],
      onbycustomer: [Object],
      orderdate: [Object],
      cityid: [Object],
      customerid: [Object],
      cpersonid: [Object],
      contractid: [Object],
      vendorid: [Object],
      equipmentid: [Object],
      partname: [Object],
      partnumber: [Object],
      serialnumber: [Object],
      blocknumber: [Object],
      warranty: [Object],
      cbswarranty: [Object],
      sordernumber: [Object],
      equipsupplierid: [Object],
      servicetypeid: [Object],
      description: [Object],
      ownerid: [Object],
      performerid: [Object],
      billnumber: [Object],
      billdate: [Object],
      once: [Object],
      checked: [Object],
      paid_by_customer: [Object],
      subcontractor: [Object],
      retry: [Object],
      archived: [Object],
      frozen: [Object],
      fail_description: [Object],
      price: [Object],
      diagnostics: [Object],
      reason_id: [Object],
      reason_description: [Object],
      hash: [Object],
      details_hash: [Object],
      perm: [Object]
    },
    fieldAttributeMap: {
      parentorderid: 'parentId',
      ordertypeid: 'typeId',
      statusid: 'statusId',
      seller_id: 'sellerId',
      seller_cperson_id: 'sellerPersonId',
      ordernumber: 'number',
      invoicedate: 'invoiceDate',
      onbycustomer: 'numberFromCustomer',
      orderdate: 'date',
      cityid: 'cityId',
      customerid: 'customerId',
      cpersonid: 'customerPersonId',
      contractid: 'contractId',
      vendorid: 'vendorId',
      equipmentid: 'equipmentId',
      partname: 'partName',
      partnumber: 'partNumber',
      serialnumber: 'serialNumber',
      blocknumber: 'blockNumber',
      warranty: 'warrantyFlag',
      cbswarranty: 'cbsWarrantyFlag',
      sordernumber: 'commonFieldString',
      equipsupplierid: 'equipSupplierId',
      servicetypeid: 'serviceTypeId',
      ownerid: 'ownerId',
      performerid: 'performerId',
      billnumber: 'billNumber',
      billdate: 'billDate',
      once: 'onceFlag',
      checked: 'checkedFlag',
      paid_by_customer: 'paidFlag',
      subcontractor: 'subcontractorFlag',
      retry: 'retryFlag',
      archived: 'archivedFlag',
      frozen: 'frozenFlag',
      fail_description: 'failDescription',
      price: 'repairPrice',
      diagnostics: 'diagPrice',
      reason_id: 'reasonId',
      reason_description: 'reasonDescription',
      details_hash: 'detailsHash'
    },
    uniqueKeys: {},
    _hasBooleanAttributes: false,
    _isBooleanAttribute: [Function: memoized] { cache: [MapCache] },
    _hasDateAttributes: true,
    _isDateAttribute: [Function: memoized] { cache: [MapCache] },
    _hasHstoreAttributes: false,
    _isHstoreAttribute: [Function: memoized] { cache: [MapCache] },
    _hasRangeAttributes: false,
    _isRangeAttribute: [Function: memoized] { cache: [MapCache] },
    _hasJsonAttributes: false,
    _isJsonAttribute: [Function: memoized] { cache: [MapCache] },
    _hasVirtualAttributes: true,
    _isVirtualAttribute: [Function: memoized] { cache: [MapCache] },
    _hasGeometryAttributes: false,
    _isGeometryAttribute: [Function: memoized] { cache: [MapCache] },
    _hasDefaultValues: true,
    attributes: {
      id: [Object],
      parentId: [Object],
      typeId: [Object],
      statusId: [Object],
      sellerId: [Object],
      sellerPersonId: [Object],
      number: [Object],
      invoiceDate: [Object],
      numberFromCustomer: [Object],
      date: [Object],
      cityId: [Object],
      customerId: [Object],
      customerPersonId: [Object],
      contractId: [Object],
      vendorId: [Object],
      equipmentId: [Object],
      partName: [Object],
      partNumber: [Object],
      serialNumber: [Object],
      blockNumber: [Object],
      warrantyFlag: [Object],
      cbsWarrantyFlag: [Object],
      commonFieldString: [Object],
      equipSupplierId: [Object],
      serviceTypeId: [Object],
      description: [Object],
      ownerId: [Object],
      performerId: [Object],
      billNumber: [Object],
      billDate: [Object],
      onceFlag: [Object],
      checkedFlag: [Object],
      paidFlag: [Object],
      subcontractorFlag: [Object],
      retryFlag: [Object],
      archivedFlag: [Object],
      frozenFlag: [Object],
      failDescription: [Object],
      repairPrice: [Object],
      diagPrice: [Object],
      reasonId: [Object],
      reasonDescription: [Object],
      hash: [Object],
      detailsHash: [Object],
      perm: [Object]
    },
    tableAttributes: {
      id: [Object],
      parentId: [Object],
      typeId: [Object],
      statusId: [Object],
      sellerId: [Object],
      sellerPersonId: [Object],
      number: [Object],
      invoiceDate: [Object],
      numberFromCustomer: [Object],
      date: [Object],
      cityId: [Object],
      customerId: [Object],
      customerPersonId: [Object],
      contractId: [Object],
      vendorId: [Object],
      equipmentId: [Object],
      partName: [Object],
      partNumber: [Object],
      serialNumber: [Object],
      blockNumber: [Object],
      warrantyFlag: [Object],
      cbsWarrantyFlag: [Object],
      commonFieldString: [Object],
      equipSupplierId: [Object],
      serviceTypeId: [Object],
      description: [Object],
      ownerId: [Object],
      performerId: [Object],
      billNumber: [Object],
      billDate: [Object],
      onceFlag: [Object],
      checkedFlag: [Object],
      paidFlag: [Object],
      subcontractorFlag: [Object],
      retryFlag: [Object],
      archivedFlag: [Object],
      frozenFlag: [Object],
      failDescription: [Object],
      repairPrice: [Object],
      diagPrice: [Object],
      reasonId: [Object],
      reasonDescription: [Object],
      hash: [Object],
      detailsHash: [Object]
    },
    primaryKeyAttributes: [ 'id' ],
    primaryKeyAttribute: 'id',
    primaryKeyField: 'id',
    _hasPrimaryKeys: true,
    _isPrimaryKey: [Function: memoized] { cache: [MapCache] },
    autoIncrementAttribute: 'id',
    _scope: {},
    _scopeNames: [ 'defaultScope' ],
    myAssociations: [
           'status',      'performer',
             'city',      'equipment',
         'customer', 'customerPerson',
      'serviceType',         'vendor',
           'seller',   'sellerPerson',
         'contract',       'supplier',
           'reason',    'generalPart',
          'timeout',       'needPart',
         'instPart',        'history',
          'comment'
    ],
    getParams: [AsyncFunction],
    getTicketPerms: [AsyncFunction],
    getAll_SimpleSearch: [AsyncFunction],
    getAll_DualSearch: [AsyncFunction],
    getById: [AsyncFunction],
    tryChangeServiceType: [AsyncFunction],
    tryChangeStatus: [AsyncFunction],
    tryChangePerformer: [AsyncFunction],
    getTree: [AsyncFunction],
    transactionUpdateTicketStatus: [Function],
    transactionCreateTicket: [Function],
    transactionFindById: [Function],
    updateServiceType: [AsyncFunction]
  },
  include: [
    { model: [Function], required: true, attributes: [] },
    { as: 'performer', model: [Function], attributes: [Array] },
    { include: [Object], model: [Function], attributes: [Array] },
    { model: [Function], attributes: [Array] },
    {
      include: [Object],
      where: [Object],
      required: false,
      model: [Function],
      attributes: [Array]
    }
  ],
  attributes: [
    [ [Fn], 'perm--serviceType' ],
    [ [Fn], 'perm--setPerformer' ],
    [ [Fn], 'perm--comment' ],
    [ [Fn], 'perm--status' ],
    [ [Fn], 'perm--partOrder--needPart--addition' ],
    [ [Fn], 'perm--partOrder--generalPart--addition' ],
    [ [Fn], 'perm--partOrder--generalPart--editing' ],
    [ [Fn], 'perm--instPart--addition' ],
    'id',
    'vendorId',
    'typeId',
    'number',
    'serviceTypeId',
    'date',
    'warrantyFlag',
    'cbsWarrantyFlag',
    'commonFieldString',
    'statusId',
    'cityId',
    'subcontractorFlag',
    'reasonDescription'
  ],
  where: { id: { '$in': [Array] } },
  order: [ [ 'date', 'desc' ] ]
}
[2019-07-18 14:03:33.283] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 14:03:33.295] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`ordernumber` AS `number`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`orderdate` AS `date`, `ticket`.`warranty` AS `warrantyFlag`, `ticket`.`cbswarranty` AS `cbsWarrantyFlag`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`statusid` AS `statusId`, `ticket`.`cityid` AS `cityId`, `ticket`.`subcontractor` AS `subcontractorFlag`, `ticket`.`reason_description` AS `reasonDescription`, `performer`.`id` AS `performer.id`, `performer`.`name` AS `performer.name`, `equipment`.`id` AS `equipment.id`, `equipment`.`endwarrantydate` AS `equipment.endWarrantyDate`, `equipment`.`id` AS `equipment.id`, `equipment`.`endcbswarrantydate` AS `equipment.endCBSWarrantyDate`, `equipment`.`id` AS `equipment.id`, `equipment`.`serialnumber` AS `equipment.serialNumber`, `equipment`.`id` AS `equipment.id`, `equipment`.`regnumber` AS `equipment.regNumber`, `equipment`.`id` AS `equipment.id`, `equipment`.`bna` AS `equipment.bnaFlag`, `equipment->equipmentType`.`id` AS `equipment.equipmentType.id`, `equipment->equipmentType`.`name` AS `equipment.equipmentType.name`, `equipment->equipmentType`.`typemodel` AS `equipment.equipmentType.model`, `customer`.`id` AS `customer.id`, `customer`.`name` AS `customer.name`, `timeout`.`reason_id` AS `timeout.reasonId`, `timeout`.`order_id` AS `timeout.ticketId`, `timeout`.`timeout` AS `timeout.timeout` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` LEFT OUTER JOIN `users` AS `performer` ON `ticket`.`performerid` = `performer`.`id` LEFT OUTER JOIN `equipment` AS `equipment` ON `ticket`.`equipmentid` = `equipment`.`id` LEFT OUTER JOIN `equipmenttypes` AS `equipment->equipmentType` ON `equipment`.`typemodelid` = `equipment->equipmentType`.`id` LEFT OUTER JOIN `customers` AS `customer` ON `ticket`.`customerid` = `customer`.`id` LEFT OUTER JOIN `order_timeout` AS `timeout` ON `ticket`.`id` = `timeout`.`order_id` AND `timeout`.`active` = 1 LEFT OUTER JOIN `order_timeout_reason` AS `timeout->timeoutReason` ON `timeout`.`reason_id` = `timeout->timeoutReason`.`id` WHERE `ticket`.`id` IN (497078, 497077, 497076, 497075, 497074, 497073, 497072, 497071, 497070, 497069, 497068, 497067, 497066, 497065, 497064, 497063, 497062, 497061, 497060, 497059, 497058, 497057, 497056, 497055, 497054, 497053, 497052, 497051, 497050, 497049, 497048, 497047, 497046, 497045, 497044, 497043, 497042, 497041, 497040, 497039, 497038, 497037, 497036, 497035, 497034, 497033, 497032, 497031, 497030, 497029, 497028, 497027, 497026, 497025, 497023, 497022, 497021, 497020, 497019, 497018, 497017, 497015, 497014, 497013, 497012, 497011, 497010, 497009, 497008, 497007, 497006, 497004, 497003, 497002, 497001, 497000, 496999, 496998, 496997, 496996, 496995, 496994, 496993, 496992, 496991, 496990, 496989, 496988, 496987, 496986, 496984, 496983, 496982, 496981, 496979, 496977, 496976, 496975, 496974, 496972) ORDER BY `ticket`.`orderdate` DESC; 33ms
