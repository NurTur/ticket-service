[2019-07-18 11:35:13.376] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 11:35:13.376] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 0,
  'perm--setPerformer': 0,
  'perm--comment': 0,
  'perm--status': 0,
  'perm--partOrder--needPart--addition': 0,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 0,
  id: 234356,
  number: 'L693SW-15',
  typeId: 4,
  statusId: 7,
  vendorId: 5,
  date: '2015-02-23',
  customerId: 4795,
  serviceTypeId: 3,
  performerId: 181,
  commonFieldString: null,
  cityId: 2,
  serialNumber: null,
  equipmentId: 16907
}
[2019-07-18 11:35:13.377] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 11:35:13.377] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 0,
  'perm--setPerformer': 0,
  'perm--comment': 0,
  'perm--status': 0,
  'perm--partOrder--needPart--addition': 0,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 0,
  id: 234356,
  number: 'L693SW-15',
  typeId: 4,
  statusId: 7,
  vendorId: 5,
  date: '2015-02-23',
  customerId: 4795,
  serviceTypeId: 3,
  performerId: 181,
  commonFieldString: null,
  cityId: 2,
  serialNumber: null,
  equipmentId: 16907
}
[2019-07-18 11:35:13.381] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:13.381] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 234356; 2ms
[2019-07-18 11:35:13.383] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 11:35:13.384] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - [
  {
    id: 234931,
    number: 'L741PW-15',
    typeId: 3,
    statusId: 7,
    vendorId: 5,
    date: '2015-02-25',
    customerId: 4795,
    serviceTypeId: 9,
    performerId: 152,
    commonFieldString: '8004642642/7022034339',
    cityId: 0,
    serialNumber: 'CS01396233',
    equipmentId: 16907,
    perm: {
      serviceType: 0,
      setPerformer: 0,
      comment: 0,
      status: 0,
      partOrder: [Object],
      instPart: [Object]
    }
  },
  {
    id: 236876,
    number: 'L880PW-15',
    typeId: 3,
    statusId: 7,
    vendorId: 5,
    date: '2015-03-06',
    customerId: 4795,
    serviceTypeId: 9,
    performerId: 152,
    commonFieldString: '7022058975',
    cityId: 2,
    serialNumber: 'CS01396233',
    equipmentId: 16907,
    perm: {
      serviceType: 0,
      setPerformer: 0,
      comment: 0,
      status: 0,
      partOrder: [Object],
      instPart: [Object]
    }
  }
]
[2019-07-18 11:35:13.386] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 11:35:13.386] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  id: 234931,
  number: 'L741PW-15',
  typeId: 3,
  statusId: 7,
  vendorId: 5,
  date: '2015-02-25',
  customerId: 4795,
  serviceTypeId: 9,
  performerId: 152,
  commonFieldString: '8004642642/7022034339',
  cityId: 0,
  serialNumber: 'CS01396233',
  equipmentId: 16907,
  perm: {
    serviceType: 0,
    setPerformer: 0,
    comment: 0,
    status: 0,
    partOrder: { needPart: [Object], generalPart: [Object] },
    instPart: { addition: 0 }
  }
}
[2019-07-18 11:35:13.389] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:13.390] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 234931; 1ms
[2019-07-18 11:35:13.391] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 11:35:13.392] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  id: 236876,
  number: 'L880PW-15',
  typeId: 3,
  statusId: 7,
  vendorId: 5,
  date: '2015-03-06',
  customerId: 4795,
  serviceTypeId: 9,
  performerId: 152,
  commonFieldString: '7022058975',
  cityId: 2,
  serialNumber: 'CS01396233',
  equipmentId: 16907,
  perm: {
    serviceType: 0,
    setPerformer: 0,
    comment: 0,
    status: 0,
    partOrder: { needPart: [Object], generalPart: [Object] },
    instPart: { addition: 0 }
  }
}
[2019-07-18 11:35:13.395] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:13.395] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 236876; 2ms
[2019-07-18 11:35:13.397] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/tickets/tree/234356?userId=1 200 43ms 2.03kb
[2019-07-18 11:35:14.260] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/comments?ticketId=234128&userId=1
[2019-07-18 11:35:14.262] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 11:35:14.264] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:14.264] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 2ms
[2019-07-18 11:35:14.265] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 11:35:14.292] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:14.293] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `comment`.`id`, `comment`.`orderid` AS `ticketId`, `comment`.`ownerid` AS `ownerId`, `comment`.`device_id` AS `deviceId`, `comment`.`commentdate` AS `date`, `comment`.`comment` AS `text`, `comment`.`comment_type` AS `type`, IF(`ticket->status`.`final` = 1, 0, IF(`comment_type` NOT IN ('0', '1'), 0, IF(`comment`.`ownerid` = 1, 1, 0))) AS `perm.edit`, `user`.`id` AS `user.id`, `user`.`name` AS `user.name`, `device`.`id` AS `device.id`, `device`.`name` AS `device.name`, `device->parent`.`id` AS `device.parent.id`, `device->parent`.`name` AS `device.parent.name` FROM `comments` AS `comment` LEFT OUTER JOIN `users` AS `user` ON `comment`.`ownerid` = `user`.`id` LEFT OUTER JOIN `devices` AS `device` ON `comment`.`device_id` = `device`.`id` LEFT OUTER JOIN `devices` AS `device->parent` ON `device`.`parent_id` = `device->parent`.`id` LEFT OUTER JOIN `orders` AS `ticket` ON `comment`.`orderid` = `ticket`.`id` LEFT OUTER JOIN `status` AS `ticket->status` ON `ticket`.`statusid` = `ticket->status`.`id` WHERE `comment`.`orderid` = '234128'; 1ms
[2019-07-18 11:35:14.294] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/comments?ticketId=234128&userId=1 200 34ms 2b
[2019-07-18 11:35:14.311] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/ticket-history?ticketId=234128
[2019-07-18 11:35:14.318] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:14.319] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `ticketHistory`.`id`, `ticketHistory`.`statustime` AS `date`, `status`.`id` AS `status.id`, `status`.`name` AS `status.name`, `status`.`final` AS `status.final`, `performer`.`id` AS `performer.id`, `performer`.`name` AS `performer.name`, `owner`.`id` AS `owner.id`, `owner`.`name` AS `owner.name`, `serviceType`.`id` AS `serviceType.id`, `serviceType`.`name` AS `serviceType.name` FROM `orderstatus` AS `ticketHistory` LEFT OUTER JOIN `status` AS `status` ON `ticketHistory`.`statusid` = `status`.`id` LEFT OUTER JOIN `users` AS `performer` ON `ticketHistory`.`performerid` = `performer`.`id` LEFT OUTER JOIN `users` AS `owner` ON `ticketHistory`.`ownerid` = `owner`.`id` LEFT OUTER JOIN `servicetype` AS `serviceType` ON `ticketHistory`.`servicetypeid` = `serviceType`.`id` WHERE `ticketHistory`.`orderid` = '234128' ORDER BY `ticketHistory`.`statustime` ASC; 3ms
[2019-07-18 11:35:14.321] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/ticket-history?ticketId=234128 200 10ms 2.28kb
[2019-07-18 11:35:14.343] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/tickets/tree/234128?userId=1
[2019-07-18 11:35:14.344] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getTree
[2019-07-18 11:35:14.345] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:14.346] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `GetTopTicketId`('234128') AS `id`; 1ms
[2019-07-18 11:35:14.346] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getParams
[2019-07-18 11:35:14.346] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 11:35:14.348] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:14.348] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 1ms
[2019-07-18 11:35:14.349] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 11:35:14.352] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:14.353] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`id` = '233909'; 1ms
[2019-07-18 11:35:14.354] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 11:35:14.355] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 0,
  'perm--setPerformer': 0,
  'perm--comment': 0,
  'perm--status': 0,
  'perm--partOrder--needPart--addition': 0,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 0,
  id: 233909,
  number: 'L670SW-15',
  typeId: 4,
  statusId: 7,
  vendorId: 5,
  date: '2015-02-20',
  customerId: 193,
  serviceTypeId: 3,
  performerId: 170,
  commonFieldString: null,
  cityId: 12,
  serialNumber: null,
  equipmentId: 16870
}
[2019-07-18 11:35:14.356] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 11:35:14.356] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 0,
  'perm--setPerformer': 0,
  'perm--comment': 0,
  'perm--status': 0,
  'perm--partOrder--needPart--addition': 0,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 0,
  id: 233909,
  number: 'L670SW-15',
  typeId: 4,
  statusId: 7,
  vendorId: 5,
  date: '2015-02-20',
  customerId: 193,
  serviceTypeId: 3,
  performerId: 170,
  commonFieldString: null,
  cityId: 12,
  serialNumber: null,
  equipmentId: 16870
}
[2019-07-18 11:35:14.359] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:14.360] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 233909; 1ms
[2019-07-18 11:35:14.361] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 11:35:14.361] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - [
  {
    id: 234128,
    number: 'L693PW-15',
    typeId: 3,
    statusId: 7,
    vendorId: 5,
    date: '2015-02-21',
    customerId: 193,
    serviceTypeId: 9,
    performerId: 152,
    commonFieldString: '8004622531/7022024111',
    cityId: 12,
    serialNumber: 'YB07078434',
    equipmentId: 16870,
    perm: {
      serviceType: 0,
      setPerformer: 0,
      comment: 0,
      status: 0,
      partOrder: [Object],
      instPart: [Object]
    }
  }
]
[2019-07-18 11:35:14.362] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 11:35:14.363] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  id: 234128,
  number: 'L693PW-15',
  typeId: 3,
  statusId: 7,
  vendorId: 5,
  date: '2015-02-21',
  customerId: 193,
  serviceTypeId: 9,
  performerId: 152,
  commonFieldString: '8004622531/7022024111',
  cityId: 12,
  serialNumber: 'YB07078434',
  equipmentId: 16870,
  perm: {
    serviceType: 0,
    setPerformer: 0,
    comment: 0,
    status: 0,
    partOrder: { needPart: [Object], generalPart: [Object] },
    instPart: { addition: 0 }
  }
}
[2019-07-18 11:35:14.366] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:14.367] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 234128; 1ms
[2019-07-18 11:35:14.382] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/tickets/tree/234128?userId=1 200 39ms 1.31kb
[2019-07-18 11:35:15.955] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/comments?ticketId=174405&userId=1
[2019-07-18 11:35:15.956] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 11:35:15.958] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:15.958] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 1ms
[2019-07-18 11:35:15.959] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 11:35:15.970] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:15.971] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `comment`.`id`, `comment`.`orderid` AS `ticketId`, `comment`.`ownerid` AS `ownerId`, `comment`.`device_id` AS `deviceId`, `comment`.`commentdate` AS `date`, `comment`.`comment` AS `text`, `comment`.`comment_type` AS `type`, IF(`ticket->status`.`final` = 1, 0, IF(`comment_type` NOT IN ('0', '1'), 0, IF(`comment`.`ownerid` = 1, 1, 0))) AS `perm.edit`, `user`.`id` AS `user.id`, `user`.`name` AS `user.name`, `device`.`id` AS `device.id`, `device`.`name` AS `device.name`, `device->parent`.`id` AS `device.parent.id`, `device->parent`.`name` AS `device.parent.name` FROM `comments` AS `comment` LEFT OUTER JOIN `users` AS `user` ON `comment`.`ownerid` = `user`.`id` LEFT OUTER JOIN `devices` AS `device` ON `comment`.`device_id` = `device`.`id` LEFT OUTER JOIN `devices` AS `device->parent` ON `device`.`parent_id` = `device->parent`.`id` LEFT OUTER JOIN `orders` AS `ticket` ON `comment`.`orderid` = `ticket`.`id` LEFT OUTER JOIN `status` AS `ticket->status` ON `ticket`.`statusid` = `ticket->status`.`id` WHERE `comment`.`orderid` = '174405'; 1ms
[2019-07-18 11:35:15.973] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/comments?ticketId=174405&userId=1 200 18ms 858b
[2019-07-18 11:35:16.003] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/ticket-history?ticketId=174405
[2019-07-18 11:35:16.008] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:16.010] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `ticketHistory`.`id`, `ticketHistory`.`statustime` AS `date`, `status`.`id` AS `status.id`, `status`.`name` AS `status.name`, `status`.`final` AS `status.final`, `performer`.`id` AS `performer.id`, `performer`.`name` AS `performer.name`, `owner`.`id` AS `owner.id`, `owner`.`name` AS `owner.name`, `serviceType`.`id` AS `serviceType.id`, `serviceType`.`name` AS `serviceType.name` FROM `orderstatus` AS `ticketHistory` LEFT OUTER JOIN `status` AS `status` ON `ticketHistory`.`statusid` = `status`.`id` LEFT OUTER JOIN `users` AS `performer` ON `ticketHistory`.`performerid` = `performer`.`id` LEFT OUTER JOIN `users` AS `owner` ON `ticketHistory`.`ownerid` = `owner`.`id` LEFT OUTER JOIN `servicetype` AS `serviceType` ON `ticketHistory`.`servicetypeid` = `serviceType`.`id` WHERE `ticketHistory`.`orderid` = '174405' ORDER BY `ticketHistory`.`statustime` ASC; 3ms
[2019-07-18 11:35:16.014] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/ticket-history?ticketId=174405 200 11ms 2.65kb
[2019-07-18 11:35:16.046] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/tickets/tree/174405?userId=1
[2019-07-18 11:35:16.047] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getTree
[2019-07-18 11:35:16.049] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:16.050] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `GetTopTicketId`('174405') AS `id`; 1ms
[2019-07-18 11:35:16.051] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getParams
[2019-07-18 11:35:16.052] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 11:35:16.053] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:16.054] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 1ms
[2019-07-18 11:35:16.054] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 11:35:16.058] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:16.059] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`id` = '174405'; 1ms
[2019-07-18 11:35:16.060] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 11:35:16.060] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 0,
  'perm--setPerformer': 0,
  'perm--comment': 0,
  'perm--status': 0,
  'perm--partOrder--needPart--addition': 0,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 0,
  id: 174405,
  number: 'L693SW-14',
  typeId: 4,
  statusId: 7,
  vendorId: 5,
  date: '2014-02-13',
  customerId: 2877,
  serviceTypeId: 10,
  performerId: 140,
  commonFieldString: null,
  cityId: 5,
  serialNumber: null,
  equipmentId: 10697
}
[2019-07-18 11:35:16.061] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 11:35:16.061] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 0,
  'perm--setPerformer': 0,
  'perm--comment': 0,
  'perm--status': 0,
  'perm--partOrder--needPart--addition': 0,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 0,
  id: 174405,
  number: 'L693SW-14',
  typeId: 4,
  statusId: 7,
  vendorId: 5,
  date: '2014-02-13',
  customerId: 2877,
  serviceTypeId: 10,
  performerId: 140,
  commonFieldString: null,
  cityId: 5,
  serialNumber: null,
  equipmentId: 10697
}
[2019-07-18 11:35:16.065] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:16.065] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 174405; 1ms
[2019-07-18 11:35:16.066] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 11:35:16.066] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - [
  {
    id: 174483,
    number: 'L765PW-14',
    typeId: 3,
    statusId: 7,
    vendorId: 5,
    date: '2014-02-13',
    customerId: 2877,
    serviceTypeId: 9,
    performerId: 152,
    commonFieldString: '8002646990/7021057914 ремонт б/з',
    cityId: 5,
    serialNumber: 'QB06434940',
    equipmentId: 10697,
    perm: {
      serviceType: 0,
      setPerformer: 0,
      comment: 0,
      status: 0,
      partOrder: [Object],
      instPart: [Object]
    }
  }
]
[2019-07-18 11:35:16.081] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 11:35:16.082] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  id: 174483,
  number: 'L765PW-14',
  typeId: 3,
  statusId: 7,
  vendorId: 5,
  date: '2014-02-13',
  customerId: 2877,
  serviceTypeId: 9,
  performerId: 152,
  commonFieldString: '8002646990/7021057914 ремонт б/з',
  cityId: 5,
  serialNumber: 'QB06434940',
  equipmentId: 10697,
  perm: {
    serviceType: 0,
    setPerformer: 0,
    comment: 0,
    status: 0,
    partOrder: { needPart: [Object], generalPart: [Object] },
    instPart: { addition: 0 }
  }
}
[2019-07-18 11:35:16.085] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:16.085] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 174483; 1ms
[2019-07-18 11:35:16.087] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/tickets/tree/174405?userId=1 200 41ms 1.33kb
[2019-07-18 11:35:16.909] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/comments?ticketId=174023&userId=1
[2019-07-18 11:35:16.910] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 11:35:16.912] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:16.912] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 1ms
[2019-07-18 11:35:16.914] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 11:35:16.926] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:16.927] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `comment`.`id`, `comment`.`orderid` AS `ticketId`, `comment`.`ownerid` AS `ownerId`, `comment`.`device_id` AS `deviceId`, `comment`.`commentdate` AS `date`, `comment`.`comment` AS `text`, `comment`.`comment_type` AS `type`, IF(`ticket->status`.`final` = 1, 0, IF(`comment_type` NOT IN ('0', '1'), 0, IF(`comment`.`ownerid` = 1, 1, 0))) AS `perm.edit`, `user`.`id` AS `user.id`, `user`.`name` AS `user.name`, `device`.`id` AS `device.id`, `device`.`name` AS `device.name`, `device->parent`.`id` AS `device.parent.id`, `device->parent`.`name` AS `device.parent.name` FROM `comments` AS `comment` LEFT OUTER JOIN `users` AS `user` ON `comment`.`ownerid` = `user`.`id` LEFT OUTER JOIN `devices` AS `device` ON `comment`.`device_id` = `device`.`id` LEFT OUTER JOIN `devices` AS `device->parent` ON `device`.`parent_id` = `device->parent`.`id` LEFT OUTER JOIN `orders` AS `ticket` ON `comment`.`orderid` = `ticket`.`id` LEFT OUTER JOIN `status` AS `ticket->status` ON `ticket`.`statusid` = `ticket->status`.`id` WHERE `comment`.`orderid` = '174023'; 4ms
[2019-07-18 11:35:16.929] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/comments?ticketId=174023&userId=1 200 20ms 2b
[2019-07-18 11:35:16.957] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/ticket-history?ticketId=174023
[2019-07-18 11:35:16.966] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:16.967] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `ticketHistory`.`id`, `ticketHistory`.`statustime` AS `date`, `status`.`id` AS `status.id`, `status`.`name` AS `status.name`, `status`.`final` AS `status.final`, `performer`.`id` AS `performer.id`, `performer`.`name` AS `performer.name`, `owner`.`id` AS `owner.id`, `owner`.`name` AS `owner.name`, `serviceType`.`id` AS `serviceType.id`, `serviceType`.`name` AS `serviceType.name` FROM `orderstatus` AS `ticketHistory` LEFT OUTER JOIN `status` AS `status` ON `ticketHistory`.`statusid` = `status`.`id` LEFT OUTER JOIN `users` AS `performer` ON `ticketHistory`.`performerid` = `performer`.`id` LEFT OUTER JOIN `users` AS `owner` ON `ticketHistory`.`ownerid` = `owner`.`id` LEFT OUTER JOIN `servicetype` AS `serviceType` ON `ticketHistory`.`servicetypeid` = `serviceType`.`id` WHERE `ticketHistory`.`orderid` = '174023' ORDER BY `ticketHistory`.`statustime` ASC; 5ms
[2019-07-18 11:35:16.969] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/ticket-history?ticketId=174023 200 12ms 2.09kb
[2019-07-18 11:35:16.985] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/tickets/tree/174023?userId=1
[2019-07-18 11:35:16.985] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getTree
[2019-07-18 11:35:16.987] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:16.987] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `GetTopTicketId`('174023') AS `id`; 1ms
[2019-07-18 11:35:16.988] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getParams
[2019-07-18 11:35:16.988] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 11:35:16.989] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:16.990] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 1ms
[2019-07-18 11:35:16.990] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 11:35:16.994] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:16.995] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`id` = '173738'; 1ms
[2019-07-18 11:35:16.996] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 11:35:16.996] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 0,
  'perm--setPerformer': 0,
  'perm--comment': 0,
  'perm--status': 0,
  'perm--partOrder--needPart--addition': 0,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 0,
  id: 173738,
  number: 'L626SW-14',
  typeId: 4,
  statusId: 7,
  vendorId: 5,
  date: '2014-02-10',
  customerId: 2827,
  serviceTypeId: 8,
  performerId: 162,
  commonFieldString: null,
  cityId: 4,
  serialNumber: null,
  equipmentId: 10628
}
[2019-07-18 11:35:16.997] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 11:35:16.997] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 0,
  'perm--setPerformer': 0,
  'perm--comment': 0,
  'perm--status': 0,
  'perm--partOrder--needPart--addition': 0,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 0,
  id: 173738,
  number: 'L626SW-14',
  typeId: 4,
  statusId: 7,
  vendorId: 5,
  date: '2014-02-10',
  customerId: 2827,
  serviceTypeId: 8,
  performerId: 162,
  commonFieldString: null,
  cityId: 4,
  serialNumber: null,
  equipmentId: 10628
}
[2019-07-18 11:35:17.000] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:17.001] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 173738; 1ms
[2019-07-18 11:35:17.016] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 11:35:17.016] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - [
  {
    id: 174023,
    number: 'L693PW-14',
    typeId: 3,
    statusId: 7,
    vendorId: 5,
    date: '2014-02-11',
    customerId: 2827,
    serviceTypeId: 9,
    performerId: 152,
    commonFieldString: '8002632482/7021051478 ремонт б/з',
    cityId: 4,
    serialNumber: 'WB13285702',
    equipmentId: 10628,
    perm: {
      serviceType: 0,
      setPerformer: 0,
      comment: 0,
      status: 0,
      partOrder: [Object],
      instPart: [Object]
    }
  }
]
[2019-07-18 11:35:17.017] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 11:35:17.017] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  id: 174023,
  number: 'L693PW-14',
  typeId: 3,
  statusId: 7,
  vendorId: 5,
  date: '2014-02-11',
  customerId: 2827,
  serviceTypeId: 9,
  performerId: 152,
  commonFieldString: '8002632482/7021051478 ремонт б/з',
  cityId: 4,
  serialNumber: 'WB13285702',
  equipmentId: 10628,
  perm: {
    serviceType: 0,
    setPerformer: 0,
    comment: 0,
    status: 0,
    partOrder: { needPart: [Object], generalPart: [Object] },
    instPart: { addition: 0 }
  }
}
[2019-07-18 11:35:17.021] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:17.021] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 174023; 2ms
[2019-07-18 11:35:17.023] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/tickets/tree/174023?userId=1 200 38ms 1.32kb
[2019-07-18 11:35:17.827] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/comments?ticketId=136554&userId=1
[2019-07-18 11:35:17.828] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 11:35:17.830] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:17.831] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 1ms
[2019-07-18 11:35:17.831] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 11:35:17.841] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:17.842] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `comment`.`id`, `comment`.`orderid` AS `ticketId`, `comment`.`ownerid` AS `ownerId`, `comment`.`device_id` AS `deviceId`, `comment`.`commentdate` AS `date`, `comment`.`comment` AS `text`, `comment`.`comment_type` AS `type`, IF(`ticket->status`.`final` = 1, 0, IF(`comment_type` NOT IN ('0', '1'), 0, IF(`comment`.`ownerid` = 1, 1, 0))) AS `perm.edit`, `user`.`id` AS `user.id`, `user`.`name` AS `user.name`, `device`.`id` AS `device.id`, `device`.`name` AS `device.name`, `device->parent`.`id` AS `device.parent.id`, `device->parent`.`name` AS `device.parent.name` FROM `comments` AS `comment` LEFT OUTER JOIN `users` AS `user` ON `comment`.`ownerid` = `user`.`id` LEFT OUTER JOIN `devices` AS `device` ON `comment`.`device_id` = `device`.`id` LEFT OUTER JOIN `devices` AS `device->parent` ON `device`.`parent_id` = `device->parent`.`id` LEFT OUTER JOIN `orders` AS `ticket` ON `comment`.`orderid` = `ticket`.`id` LEFT OUTER JOIN `status` AS `ticket->status` ON `ticket`.`statusid` = `ticket->status`.`id` WHERE `comment`.`orderid` = '136554'; 1ms
[2019-07-18 11:35:17.843] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/comments?ticketId=136554&userId=1 200 16ms 2b
[2019-07-18 11:35:17.860] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/ticket-history?ticketId=136554
[2019-07-18 11:35:17.868] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:17.868] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `ticketHistory`.`id`, `ticketHistory`.`statustime` AS `date`, `status`.`id` AS `status.id`, `status`.`name` AS `status.name`, `status`.`final` AS `status.final`, `performer`.`id` AS `performer.id`, `performer`.`name` AS `performer.name`, `owner`.`id` AS `owner.id`, `owner`.`name` AS `owner.name`, `serviceType`.`id` AS `serviceType.id`, `serviceType`.`name` AS `serviceType.name` FROM `orderstatus` AS `ticketHistory` LEFT OUTER JOIN `status` AS `status` ON `ticketHistory`.`statusid` = `status`.`id` LEFT OUTER JOIN `users` AS `performer` ON `ticketHistory`.`performerid` = `performer`.`id` LEFT OUTER JOIN `users` AS `owner` ON `ticketHistory`.`ownerid` = `owner`.`id` LEFT OUTER JOIN `servicetype` AS `serviceType` ON `ticketHistory`.`servicetypeid` = `serviceType`.`id` WHERE `ticketHistory`.`orderid` = '136554' ORDER BY `ticketHistory`.`statustime` ASC; 2ms
[2019-07-18 11:35:17.871] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/ticket-history?ticketId=136554 200 11ms 1.89kb
[2019-07-18 11:35:17.886] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/tickets/tree/136554?userId=1
[2019-07-18 11:35:17.886] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getTree
[2019-07-18 11:35:17.888] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:17.888] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `GetTopTicketId`('136554') AS `id`; 1ms
[2019-07-18 11:35:17.889] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getParams
[2019-07-18 11:35:17.890] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 11:35:17.891] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:17.892] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 0ms
[2019-07-18 11:35:17.893] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 11:35:17.896] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:17.896] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`id` = '136363'; 1ms
[2019-07-18 11:35:17.898] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 11:35:17.898] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 0,
  'perm--setPerformer': 0,
  'perm--comment': 0,
  'perm--status': 0,
  'perm--partOrder--needPart--addition': 0,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 0,
  id: 136363,
  number: 'L792SW-13',
  typeId: 4,
  statusId: 7,
  vendorId: 5,
  date: '2013-05-20',
  customerId: 18,
  serviceTypeId: 3,
  performerId: 12,
  commonFieldString: null,
  cityId: 1,
  serialNumber: null,
  equipmentId: 7158
}
[2019-07-18 11:35:17.898] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 11:35:17.899] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 0,
  'perm--setPerformer': 0,
  'perm--comment': 0,
  'perm--status': 0,
  'perm--partOrder--needPart--addition': 0,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 0,
  id: 136363,
  number: 'L792SW-13',
  typeId: 4,
  statusId: 7,
  vendorId: 5,
  date: '2013-05-20',
  customerId: 18,
  serviceTypeId: 3,
  performerId: 12,
  commonFieldString: null,
  cityId: 1,
  serialNumber: null,
  equipmentId: 7158
}
[2019-07-18 11:35:17.903] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:17.914] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 136363; 1ms
[2019-07-18 11:35:17.915] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 11:35:17.916] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - [
  {
    id: 136554,
    number: 'L693PW-13',
    typeId: 3,
    statusId: 7,
    vendorId: 5,
    date: '2013-05-22',
    customerId: 18,
    serviceTypeId: 9,
    performerId: 144,
    commonFieldString: '8001138799/7020516444',
    cityId: 1,
    serialNumber: 'R8K11NN',
    equipmentId: 7158,
    perm: {
      serviceType: 0,
      setPerformer: 0,
      comment: 0,
      status: 0,
      partOrder: [Object],
      instPart: [Object]
    }
  }
]
[2019-07-18 11:35:17.917] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 11:35:17.917] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  id: 136554,
  number: 'L693PW-13',
  typeId: 3,
  statusId: 7,
  vendorId: 5,
  date: '2013-05-22',
  customerId: 18,
  serviceTypeId: 9,
  performerId: 144,
  commonFieldString: '8001138799/7020516444',
  cityId: 1,
  serialNumber: 'R8K11NN',
  equipmentId: 7158,
  perm: {
    serviceType: 0,
    setPerformer: 0,
    comment: 0,
    status: 0,
    partOrder: { needPart: [Object], generalPart: [Object] },
    instPart: { addition: 0 }
  }
}
[2019-07-18 11:35:17.920] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:17.921] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 136554; 1ms
[2019-07-18 11:35:17.922] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/tickets/tree/136554?userId=1 200 36ms 1.3kb
[2019-07-18 11:35:20.146] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/comments?ticketId=133660&userId=1
[2019-07-18 11:35:20.147] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 11:35:20.149] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:20.149] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 1ms
[2019-07-18 11:35:20.150] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 11:35:20.160] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:20.173] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `comment`.`id`, `comment`.`orderid` AS `ticketId`, `comment`.`ownerid` AS `ownerId`, `comment`.`device_id` AS `deviceId`, `comment`.`commentdate` AS `date`, `comment`.`comment` AS `text`, `comment`.`comment_type` AS `type`, IF(`ticket->status`.`final` = 1, 0, IF(`comment_type` NOT IN ('0', '1'), 0, IF(`comment`.`ownerid` = 1, 1, 0))) AS `perm.edit`, `user`.`id` AS `user.id`, `user`.`name` AS `user.name`, `device`.`id` AS `device.id`, `device`.`name` AS `device.name`, `device->parent`.`id` AS `device.parent.id`, `device->parent`.`name` AS `device.parent.name` FROM `comments` AS `comment` LEFT OUTER JOIN `users` AS `user` ON `comment`.`ownerid` = `user`.`id` LEFT OUTER JOIN `devices` AS `device` ON `comment`.`device_id` = `device`.`id` LEFT OUTER JOIN `devices` AS `device->parent` ON `device`.`parent_id` = `device->parent`.`id` LEFT OUTER JOIN `orders` AS `ticket` ON `comment`.`orderid` = `ticket`.`id` LEFT OUTER JOIN `status` AS `ticket->status` ON `ticket`.`statusid` = `ticket->status`.`id` WHERE `comment`.`orderid` = '133660'; 3ms
[2019-07-18 11:35:20.175] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/comments?ticketId=133660&userId=1 200 29ms 1020b
[2019-07-18 11:35:20.204] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/ticket-history?ticketId=133660
[2019-07-18 11:35:20.208] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:20.210] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `ticketHistory`.`id`, `ticketHistory`.`statustime` AS `date`, `status`.`id` AS `status.id`, `status`.`name` AS `status.name`, `status`.`final` AS `status.final`, `performer`.`id` AS `performer.id`, `performer`.`name` AS `performer.name`, `owner`.`id` AS `owner.id`, `owner`.`name` AS `owner.name`, `serviceType`.`id` AS `serviceType.id`, `serviceType`.`name` AS `serviceType.name` FROM `orderstatus` AS `ticketHistory` LEFT OUTER JOIN `status` AS `status` ON `ticketHistory`.`statusid` = `status`.`id` LEFT OUTER JOIN `users` AS `performer` ON `ticketHistory`.`performerid` = `performer`.`id` LEFT OUTER JOIN `users` AS `owner` ON `ticketHistory`.`ownerid` = `owner`.`id` LEFT OUTER JOIN `servicetype` AS `serviceType` ON `ticketHistory`.`servicetypeid` = `serviceType`.`id` WHERE `ticketHistory`.`orderid` = '133660' ORDER BY `ticketHistory`.`statustime` ASC; 2ms
[2019-07-18 11:35:20.213] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/ticket-history?ticketId=133660 200 9ms 2.64kb
[2019-07-18 11:35:20.231] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/tickets/tree/133660?userId=1
[2019-07-18 11:35:20.232] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getTree
[2019-07-18 11:35:20.233] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:20.233] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `GetTopTicketId`('133660') AS `id`; 1ms
[2019-07-18 11:35:20.236] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getParams
[2019-07-18 11:35:20.236] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 11:35:20.238] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:20.238] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 1ms
[2019-07-18 11:35:20.239] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 11:35:20.242] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:20.243] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`id` = '133660'; 1ms
[2019-07-18 11:35:20.244] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 11:35:20.244] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 0,
  'perm--setPerformer': 0,
  'perm--comment': 0,
  'perm--status': 0,
  'perm--partOrder--needPart--addition': 0,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 0,
  id: 133660,
  number: 'L693SW-13',
  typeId: 4,
  statusId: 7,
  vendorId: 5,
  date: '2013-04-25',
  customerId: 54,
  serviceTypeId: 8,
  performerId: 126,
  commonFieldString: null,
  cityId: 1,
  serialNumber: null,
  equipmentId: 7031
}
[2019-07-18 11:35:20.245] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 11:35:20.246] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 0,
  'perm--setPerformer': 0,
  'perm--comment': 0,
  'perm--status': 0,
  'perm--partOrder--needPart--addition': 0,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 0,
  id: 133660,
  number: 'L693SW-13',
  typeId: 4,
  statusId: 7,
  vendorId: 5,
  date: '2013-04-25',
  customerId: 54,
  serviceTypeId: 8,
  performerId: 126,
  commonFieldString: null,
  cityId: 1,
  serialNumber: null,
  equipmentId: 7031
}
[2019-07-18 11:35:20.249] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:20.249] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 133660; 1ms
[2019-07-18 11:35:20.250] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 11:35:20.251] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - [
  {
    id: 134172,
    number: 'L603PW-13',
    typeId: 3,
    statusId: 7,
    vendorId: 5,
    date: '2013-04-30',
    customerId: 54,
    serviceTypeId: 9,
    performerId: 144,
    commonFieldString: '8001062424/7020489305',
    cityId: 1,
    serialNumber: 'PBMY010',
    equipmentId: 7031,
    perm: {
      serviceType: 0,
      setPerformer: 0,
      comment: 0,
      status: 0,
      partOrder: [Object],
      instPart: [Object]
    }
  }
]
[2019-07-18 11:35:20.251] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 11:35:20.252] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  id: 134172,
  number: 'L603PW-13',
  typeId: 3,
  statusId: 7,
  vendorId: 5,
  date: '2013-04-30',
  customerId: 54,
  serviceTypeId: 9,
  performerId: 144,
  commonFieldString: '8001062424/7020489305',
  cityId: 1,
  serialNumber: 'PBMY010',
  equipmentId: 7031,
  perm: {
    serviceType: 0,
    setPerformer: 0,
    comment: 0,
    status: 0,
    partOrder: { needPart: [Object], generalPart: [Object] },
    instPart: { addition: 0 }
  }
}
[2019-07-18 11:35:20.256] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:20.257] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 134172; 2ms
[2019-07-18 11:35:20.258] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/tickets/tree/133660?userId=1 200 27ms 1.3kb
[2019-07-18 11:35:21.687] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/comments?ticketId=136554&userId=1
[2019-07-18 11:35:21.688] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 11:35:21.690] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:21.691] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 0ms
[2019-07-18 11:35:21.692] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 11:35:21.701] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:21.701] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `comment`.`id`, `comment`.`orderid` AS `ticketId`, `comment`.`ownerid` AS `ownerId`, `comment`.`device_id` AS `deviceId`, `comment`.`commentdate` AS `date`, `comment`.`comment` AS `text`, `comment`.`comment_type` AS `type`, IF(`ticket->status`.`final` = 1, 0, IF(`comment_type` NOT IN ('0', '1'), 0, IF(`comment`.`ownerid` = 1, 1, 0))) AS `perm.edit`, `user`.`id` AS `user.id`, `user`.`name` AS `user.name`, `device`.`id` AS `device.id`, `device`.`name` AS `device.name`, `device->parent`.`id` AS `device.parent.id`, `device->parent`.`name` AS `device.parent.name` FROM `comments` AS `comment` LEFT OUTER JOIN `users` AS `user` ON `comment`.`ownerid` = `user`.`id` LEFT OUTER JOIN `devices` AS `device` ON `comment`.`device_id` = `device`.`id` LEFT OUTER JOIN `devices` AS `device->parent` ON `device`.`parent_id` = `device->parent`.`id` LEFT OUTER JOIN `orders` AS `ticket` ON `comment`.`orderid` = `ticket`.`id` LEFT OUTER JOIN `status` AS `ticket->status` ON `ticket`.`statusid` = `ticket->status`.`id` WHERE `comment`.`orderid` = '136554'; 1ms
[2019-07-18 11:35:21.703] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/comments?ticketId=136554&userId=1 200 16ms 2b
[2019-07-18 11:35:21.724] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/ticket-history?ticketId=136554
[2019-07-18 11:35:21.733] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:21.734] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `ticketHistory`.`id`, `ticketHistory`.`statustime` AS `date`, `status`.`id` AS `status.id`, `status`.`name` AS `status.name`, `status`.`final` AS `status.final`, `performer`.`id` AS `performer.id`, `performer`.`name` AS `performer.name`, `owner`.`id` AS `owner.id`, `owner`.`name` AS `owner.name`, `serviceType`.`id` AS `serviceType.id`, `serviceType`.`name` AS `serviceType.name` FROM `orderstatus` AS `ticketHistory` LEFT OUTER JOIN `status` AS `status` ON `ticketHistory`.`statusid` = `status`.`id` LEFT OUTER JOIN `users` AS `performer` ON `ticketHistory`.`performerid` = `performer`.`id` LEFT OUTER JOIN `users` AS `owner` ON `ticketHistory`.`ownerid` = `owner`.`id` LEFT OUTER JOIN `servicetype` AS `serviceType` ON `ticketHistory`.`servicetypeid` = `serviceType`.`id` WHERE `ticketHistory`.`orderid` = '136554' ORDER BY `ticketHistory`.`statustime` ASC; 5ms
[2019-07-18 11:35:21.736] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/ticket-history?ticketId=136554 200 12ms 1.89kb
[2019-07-18 11:35:21.752] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/tickets/tree/136554?userId=1
[2019-07-18 11:35:21.753] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getTree
[2019-07-18 11:35:21.767] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:21.768] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `GetTopTicketId`('136554') AS `id`; 0ms
[2019-07-18 11:35:21.768] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getParams
[2019-07-18 11:35:21.768] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 11:35:21.770] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:21.770] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 1ms
[2019-07-18 11:35:21.771] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 11:35:21.774] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:21.774] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`id` = '136363'; 1ms
[2019-07-18 11:35:21.775] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 11:35:21.777] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 0,
  'perm--setPerformer': 0,
  'perm--comment': 0,
  'perm--status': 0,
  'perm--partOrder--needPart--addition': 0,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 0,
  id: 136363,
  number: 'L792SW-13',
  typeId: 4,
  statusId: 7,
  vendorId: 5,
  date: '2013-05-20',
  customerId: 18,
  serviceTypeId: 3,
  performerId: 12,
  commonFieldString: null,
  cityId: 1,
  serialNumber: null,
  equipmentId: 7158
}
[2019-07-18 11:35:21.778] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 11:35:21.778] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 0,
  'perm--setPerformer': 0,
  'perm--comment': 0,
  'perm--status': 0,
  'perm--partOrder--needPart--addition': 0,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 0,
  id: 136363,
  number: 'L792SW-13',
  typeId: 4,
  statusId: 7,
  vendorId: 5,
  date: '2013-05-20',
  customerId: 18,
  serviceTypeId: 3,
  performerId: 12,
  commonFieldString: null,
  cityId: 1,
  serialNumber: null,
  equipmentId: 7158
}
[2019-07-18 11:35:21.782] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:21.782] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 136363; 2ms
[2019-07-18 11:35:21.783] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 11:35:21.784] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - [
  {
    id: 136554,
    number: 'L693PW-13',
    typeId: 3,
    statusId: 7,
    vendorId: 5,
    date: '2013-05-22',
    customerId: 18,
    serviceTypeId: 9,
    performerId: 144,
    commonFieldString: '8001138799/7020516444',
    cityId: 1,
    serialNumber: 'R8K11NN',
    equipmentId: 7158,
    perm: {
      serviceType: 0,
      setPerformer: 0,
      comment: 0,
      status: 0,
      partOrder: [Object],
      instPart: [Object]
    }
  }
]
[2019-07-18 11:35:21.784] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 11:35:21.784] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  id: 136554,
  number: 'L693PW-13',
  typeId: 3,
  statusId: 7,
  vendorId: 5,
  date: '2013-05-22',
  customerId: 18,
  serviceTypeId: 9,
  performerId: 144,
  commonFieldString: '8001138799/7020516444',
  cityId: 1,
  serialNumber: 'R8K11NN',
  equipmentId: 7158,
  perm: {
    serviceType: 0,
    setPerformer: 0,
    comment: 0,
    status: 0,
    partOrder: { needPart: [Object], generalPart: [Object] },
    instPart: { addition: 0 }
  }
}
[2019-07-18 11:35:21.789] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:21.790] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 136554; 1ms
[2019-07-18 11:35:21.791] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/tickets/tree/136554?userId=1 200 39ms 1.3kb
[2019-07-18 11:35:22.653] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/comments?ticketId=174023&userId=1
[2019-07-18 11:35:22.654] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 11:35:22.655] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:22.656] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 0ms
[2019-07-18 11:35:22.657] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 11:35:22.678] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:22.678] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `comment`.`id`, `comment`.`orderid` AS `ticketId`, `comment`.`ownerid` AS `ownerId`, `comment`.`device_id` AS `deviceId`, `comment`.`commentdate` AS `date`, `comment`.`comment` AS `text`, `comment`.`comment_type` AS `type`, IF(`ticket->status`.`final` = 1, 0, IF(`comment_type` NOT IN ('0', '1'), 0, IF(`comment`.`ownerid` = 1, 1, 0))) AS `perm.edit`, `user`.`id` AS `user.id`, `user`.`name` AS `user.name`, `device`.`id` AS `device.id`, `device`.`name` AS `device.name`, `device->parent`.`id` AS `device.parent.id`, `device->parent`.`name` AS `device.parent.name` FROM `comments` AS `comment` LEFT OUTER JOIN `users` AS `user` ON `comment`.`ownerid` = `user`.`id` LEFT OUTER JOIN `devices` AS `device` ON `comment`.`device_id` = `device`.`id` LEFT OUTER JOIN `devices` AS `device->parent` ON `device`.`parent_id` = `device->parent`.`id` LEFT OUTER JOIN `orders` AS `ticket` ON `comment`.`orderid` = `ticket`.`id` LEFT OUTER JOIN `status` AS `ticket->status` ON `ticket`.`statusid` = `ticket->status`.`id` WHERE `comment`.`orderid` = '174023'; 1ms
[2019-07-18 11:35:22.680] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/comments?ticketId=174023&userId=1 200 27ms 2b
[2019-07-18 11:35:22.694] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/ticket-history?ticketId=174023
[2019-07-18 11:35:22.697] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:22.698] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `ticketHistory`.`id`, `ticketHistory`.`statustime` AS `date`, `status`.`id` AS `status.id`, `status`.`name` AS `status.name`, `status`.`final` AS `status.final`, `performer`.`id` AS `performer.id`, `performer`.`name` AS `performer.name`, `owner`.`id` AS `owner.id`, `owner`.`name` AS `owner.name`, `serviceType`.`id` AS `serviceType.id`, `serviceType`.`name` AS `serviceType.name` FROM `orderstatus` AS `ticketHistory` LEFT OUTER JOIN `status` AS `status` ON `ticketHistory`.`statusid` = `status`.`id` LEFT OUTER JOIN `users` AS `performer` ON `ticketHistory`.`performerid` = `performer`.`id` LEFT OUTER JOIN `users` AS `owner` ON `ticketHistory`.`ownerid` = `owner`.`id` LEFT OUTER JOIN `servicetype` AS `serviceType` ON `ticketHistory`.`servicetypeid` = `serviceType`.`id` WHERE `ticketHistory`.`orderid` = '174023' ORDER BY `ticketHistory`.`statustime` ASC; 1ms
[2019-07-18 11:35:22.700] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/ticket-history?ticketId=174023 200 6ms 2.09kb
[2019-07-18 11:35:22.716] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/tickets/tree/174023?userId=1
[2019-07-18 11:35:22.716] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getTree
[2019-07-18 11:35:22.718] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:22.718] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `GetTopTicketId`('174023') AS `id`; 1ms
[2019-07-18 11:35:22.719] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getParams
[2019-07-18 11:35:22.719] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 11:35:22.721] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:22.721] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 1ms
[2019-07-18 11:35:22.722] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 11:35:22.725] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:22.725] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`id` = '173738'; 1ms
[2019-07-18 11:35:22.727] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 11:35:22.727] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 0,
  'perm--setPerformer': 0,
  'perm--comment': 0,
  'perm--status': 0,
  'perm--partOrder--needPart--addition': 0,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 0,
  id: 173738,
  number: 'L626SW-14',
  typeId: 4,
  statusId: 7,
  vendorId: 5,
  date: '2014-02-10',
  customerId: 2827,
  serviceTypeId: 8,
  performerId: 162,
  commonFieldString: null,
  cityId: 4,
  serialNumber: null,
  equipmentId: 10628
}
[2019-07-18 11:35:22.728] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 11:35:22.728] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 0,
  'perm--setPerformer': 0,
  'perm--comment': 0,
  'perm--status': 0,
  'perm--partOrder--needPart--addition': 0,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 0,
  id: 173738,
  number: 'L626SW-14',
  typeId: 4,
  statusId: 7,
  vendorId: 5,
  date: '2014-02-10',
  customerId: 2827,
  serviceTypeId: 8,
  performerId: 162,
  commonFieldString: null,
  cityId: 4,
  serialNumber: null,
  equipmentId: 10628
}
[2019-07-18 11:35:22.732] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:22.732] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 173738; 2ms
[2019-07-18 11:35:22.733] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 11:35:22.734] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - [
  {
    id: 174023,
    number: 'L693PW-14',
    typeId: 3,
    statusId: 7,
    vendorId: 5,
    date: '2014-02-11',
    customerId: 2827,
    serviceTypeId: 9,
    performerId: 152,
    commonFieldString: '8002632482/7021051478 ремонт б/з',
    cityId: 4,
    serialNumber: 'WB13285702',
    equipmentId: 10628,
    perm: {
      serviceType: 0,
      setPerformer: 0,
      comment: 0,
      status: 0,
      partOrder: [Object],
      instPart: [Object]
    }
  }
]
[2019-07-18 11:35:22.735] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 11:35:22.735] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  id: 174023,
  number: 'L693PW-14',
  typeId: 3,
  statusId: 7,
  vendorId: 5,
  date: '2014-02-11',
  customerId: 2827,
  serviceTypeId: 9,
  performerId: 152,
  commonFieldString: '8002632482/7021051478 ремонт б/з',
  cityId: 4,
  serialNumber: 'WB13285702',
  equipmentId: 10628,
  perm: {
    serviceType: 0,
    setPerformer: 0,
    comment: 0,
    status: 0,
    partOrder: { needPart: [Object], generalPart: [Object] },
    instPart: { addition: 0 }
  }
}
[2019-07-18 11:35:22.739] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:22.739] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 174023; 1ms
[2019-07-18 11:35:22.741] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/tickets/tree/174023?userId=1 200 25ms 1.32kb
[2019-07-18 11:35:29.580] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/comments?ticketId=133660&userId=1
[2019-07-18 11:35:29.580] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 11:35:29.584] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:29.585] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 0ms
[2019-07-18 11:35:29.599] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 11:35:29.607] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:29.608] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `comment`.`id`, `comment`.`orderid` AS `ticketId`, `comment`.`ownerid` AS `ownerId`, `comment`.`device_id` AS `deviceId`, `comment`.`commentdate` AS `date`, `comment`.`comment` AS `text`, `comment`.`comment_type` AS `type`, IF(`ticket->status`.`final` = 1, 0, IF(`comment_type` NOT IN ('0', '1'), 0, IF(`comment`.`ownerid` = 1, 1, 0))) AS `perm.edit`, `user`.`id` AS `user.id`, `user`.`name` AS `user.name`, `device`.`id` AS `device.id`, `device`.`name` AS `device.name`, `device->parent`.`id` AS `device.parent.id`, `device->parent`.`name` AS `device.parent.name` FROM `comments` AS `comment` LEFT OUTER JOIN `users` AS `user` ON `comment`.`ownerid` = `user`.`id` LEFT OUTER JOIN `devices` AS `device` ON `comment`.`device_id` = `device`.`id` LEFT OUTER JOIN `devices` AS `device->parent` ON `device`.`parent_id` = `device->parent`.`id` LEFT OUTER JOIN `orders` AS `ticket` ON `comment`.`orderid` = `ticket`.`id` LEFT OUTER JOIN `status` AS `ticket->status` ON `ticket`.`statusid` = `ticket->status`.`id` WHERE `comment`.`orderid` = '133660'; 1ms
[2019-07-18 11:35:29.610] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/comments?ticketId=133660&userId=1 200 30ms 1020b
[2019-07-18 11:35:29.629] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/ticket-history?ticketId=133660
[2019-07-18 11:35:29.636] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:29.637] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `ticketHistory`.`id`, `ticketHistory`.`statustime` AS `date`, `status`.`id` AS `status.id`, `status`.`name` AS `status.name`, `status`.`final` AS `status.final`, `performer`.`id` AS `performer.id`, `performer`.`name` AS `performer.name`, `owner`.`id` AS `owner.id`, `owner`.`name` AS `owner.name`, `serviceType`.`id` AS `serviceType.id`, `serviceType`.`name` AS `serviceType.name` FROM `orderstatus` AS `ticketHistory` LEFT OUTER JOIN `status` AS `status` ON `ticketHistory`.`statusid` = `status`.`id` LEFT OUTER JOIN `users` AS `performer` ON `ticketHistory`.`performerid` = `performer`.`id` LEFT OUTER JOIN `users` AS `owner` ON `ticketHistory`.`ownerid` = `owner`.`id` LEFT OUTER JOIN `servicetype` AS `serviceType` ON `ticketHistory`.`servicetypeid` = `serviceType`.`id` WHERE `ticketHistory`.`orderid` = '133660' ORDER BY `ticketHistory`.`statustime` ASC; 2ms
[2019-07-18 11:35:29.640] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/ticket-history?ticketId=133660 200 11ms 2.64kb
[2019-07-18 11:35:29.671] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/tickets/tree/133660?userId=1
[2019-07-18 11:35:29.671] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getTree
[2019-07-18 11:35:29.673] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:29.673] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `GetTopTicketId`('133660') AS `id`; 1ms
[2019-07-18 11:35:29.674] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getParams
[2019-07-18 11:35:29.674] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 11:35:29.676] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:29.676] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 1ms
[2019-07-18 11:35:29.677] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 11:35:29.683] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:29.683] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`id` = '133660'; 2ms
[2019-07-18 11:35:29.684] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 11:35:29.684] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 0,
  'perm--setPerformer': 0,
  'perm--comment': 0,
  'perm--status': 0,
  'perm--partOrder--needPart--addition': 0,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 0,
  id: 133660,
  number: 'L693SW-13',
  typeId: 4,
  statusId: 7,
  vendorId: 5,
  date: '2013-04-25',
  customerId: 54,
  serviceTypeId: 8,
  performerId: 126,
  commonFieldString: null,
  cityId: 1,
  serialNumber: null,
  equipmentId: 7031
}
[2019-07-18 11:35:29.685] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 11:35:29.685] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 0,
  'perm--setPerformer': 0,
  'perm--comment': 0,
  'perm--status': 0,
  'perm--partOrder--needPart--addition': 0,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 0,
  id: 133660,
  number: 'L693SW-13',
  typeId: 4,
  statusId: 7,
  vendorId: 5,
  date: '2013-04-25',
  customerId: 54,
  serviceTypeId: 8,
  performerId: 126,
  commonFieldString: null,
  cityId: 1,
  serialNumber: null,
  equipmentId: 7031
}
[2019-07-18 11:35:29.689] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:29.703] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 133660; 2ms
[2019-07-18 11:35:29.704] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 11:35:29.704] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - [
  {
    id: 134172,
    number: 'L603PW-13',
    typeId: 3,
    statusId: 7,
    vendorId: 5,
    date: '2013-04-30',
    customerId: 54,
    serviceTypeId: 9,
    performerId: 144,
    commonFieldString: '8001062424/7020489305',
    cityId: 1,
    serialNumber: 'PBMY010',
    equipmentId: 7031,
    perm: {
      serviceType: 0,
      setPerformer: 0,
      comment: 0,
      status: 0,
      partOrder: [Object],
      instPart: [Object]
    }
  }
]
[2019-07-18 11:35:29.705] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 11:35:29.706] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  id: 134172,
  number: 'L603PW-13',
  typeId: 3,
  statusId: 7,
  vendorId: 5,
  date: '2013-04-30',
  customerId: 54,
  serviceTypeId: 9,
  performerId: 144,
  commonFieldString: '8001062424/7020489305',
  cityId: 1,
  serialNumber: 'PBMY010',
  equipmentId: 7031,
  perm: {
    serviceType: 0,
    setPerformer: 0,
    comment: 0,
    status: 0,
    partOrder: { needPart: [Object], generalPart: [Object] },
    instPart: { addition: 0 }
  }
}
[2019-07-18 11:35:29.709] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:29.709] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 134172; 1ms
[2019-07-18 11:35:29.710] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/tickets/tree/133660?userId=1 200 39ms 1.3kb
[2019-07-18 11:35:30.856] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/comments?ticketId=136554&userId=1
[2019-07-18 11:35:30.857] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 11:35:30.860] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:30.860] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 2ms
[2019-07-18 11:35:30.861] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 11:35:30.884] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:30.884] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `comment`.`id`, `comment`.`orderid` AS `ticketId`, `comment`.`ownerid` AS `ownerId`, `comment`.`device_id` AS `deviceId`, `comment`.`commentdate` AS `date`, `comment`.`comment` AS `text`, `comment`.`comment_type` AS `type`, IF(`ticket->status`.`final` = 1, 0, IF(`comment_type` NOT IN ('0', '1'), 0, IF(`comment`.`ownerid` = 1, 1, 0))) AS `perm.edit`, `user`.`id` AS `user.id`, `user`.`name` AS `user.name`, `device`.`id` AS `device.id`, `device`.`name` AS `device.name`, `device->parent`.`id` AS `device.parent.id`, `device->parent`.`name` AS `device.parent.name` FROM `comments` AS `comment` LEFT OUTER JOIN `users` AS `user` ON `comment`.`ownerid` = `user`.`id` LEFT OUTER JOIN `devices` AS `device` ON `comment`.`device_id` = `device`.`id` LEFT OUTER JOIN `devices` AS `device->parent` ON `device`.`parent_id` = `device->parent`.`id` LEFT OUTER JOIN `orders` AS `ticket` ON `comment`.`orderid` = `ticket`.`id` LEFT OUTER JOIN `status` AS `ticket->status` ON `ticket`.`statusid` = `ticket->status`.`id` WHERE `comment`.`orderid` = '136554'; 1ms
[2019-07-18 11:35:30.885] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/comments?ticketId=136554&userId=1 200 29ms 2b
[2019-07-18 11:35:30.906] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/ticket-history?ticketId=136554
[2019-07-18 11:35:30.913] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:30.923] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `ticketHistory`.`id`, `ticketHistory`.`statustime` AS `date`, `status`.`id` AS `status.id`, `status`.`name` AS `status.name`, `status`.`final` AS `status.final`, `performer`.`id` AS `performer.id`, `performer`.`name` AS `performer.name`, `owner`.`id` AS `owner.id`, `owner`.`name` AS `owner.name`, `serviceType`.`id` AS `serviceType.id`, `serviceType`.`name` AS `serviceType.name` FROM `orderstatus` AS `ticketHistory` LEFT OUTER JOIN `status` AS `status` ON `ticketHistory`.`statusid` = `status`.`id` LEFT OUTER JOIN `users` AS `performer` ON `ticketHistory`.`performerid` = `performer`.`id` LEFT OUTER JOIN `users` AS `owner` ON `ticketHistory`.`ownerid` = `owner`.`id` LEFT OUTER JOIN `servicetype` AS `serviceType` ON `ticketHistory`.`servicetypeid` = `serviceType`.`id` WHERE `ticketHistory`.`orderid` = '136554' ORDER BY `ticketHistory`.`statustime` ASC; 1ms
[2019-07-18 11:35:30.925] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/ticket-history?ticketId=136554 200 19ms 1.89kb
[2019-07-18 11:35:30.941] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/tickets/tree/136554?userId=1
[2019-07-18 11:35:30.941] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getTree
[2019-07-18 11:35:30.943] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:30.943] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `GetTopTicketId`('136554') AS `id`; 1ms
[2019-07-18 11:35:30.944] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getParams
[2019-07-18 11:35:30.944] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 11:35:30.946] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:30.947] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 1ms
[2019-07-18 11:35:30.947] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 11:35:30.950] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:30.951] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`id` = '136363'; 1ms
[2019-07-18 11:35:30.952] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 11:35:30.953] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 0,
  'perm--setPerformer': 0,
  'perm--comment': 0,
  'perm--status': 0,
  'perm--partOrder--needPart--addition': 0,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 0,
  id: 136363,
  number: 'L792SW-13',
  typeId: 4,
  statusId: 7,
  vendorId: 5,
  date: '2013-05-20',
  customerId: 18,
  serviceTypeId: 3,
  performerId: 12,
  commonFieldString: null,
  cityId: 1,
  serialNumber: null,
  equipmentId: 7158
}
[2019-07-18 11:35:30.953] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 11:35:30.954] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 0,
  'perm--setPerformer': 0,
  'perm--comment': 0,
  'perm--status': 0,
  'perm--partOrder--needPart--addition': 0,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 0,
  id: 136363,
  number: 'L792SW-13',
  typeId: 4,
  statusId: 7,
  vendorId: 5,
  date: '2013-05-20',
  customerId: 18,
  serviceTypeId: 3,
  performerId: 12,
  commonFieldString: null,
  cityId: 1,
  serialNumber: null,
  equipmentId: 7158
}
[2019-07-18 11:35:30.957] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:30.958] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 136363; 1ms
[2019-07-18 11:35:30.959] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 11:35:30.959] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - [
  {
    id: 136554,
    number: 'L693PW-13',
    typeId: 3,
    statusId: 7,
    vendorId: 5,
    date: '2013-05-22',
    customerId: 18,
    serviceTypeId: 9,
    performerId: 144,
    commonFieldString: '8001138799/7020516444',
    cityId: 1,
    serialNumber: 'R8K11NN',
    equipmentId: 7158,
    perm: {
      serviceType: 0,
      setPerformer: 0,
      comment: 0,
      status: 0,
      partOrder: [Object],
      instPart: [Object]
    }
  }
]
[2019-07-18 11:35:30.961] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 11:35:30.962] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  id: 136554,
  number: 'L693PW-13',
  typeId: 3,
  statusId: 7,
  vendorId: 5,
  date: '2013-05-22',
  customerId: 18,
  serviceTypeId: 9,
  performerId: 144,
  commonFieldString: '8001138799/7020516444',
  cityId: 1,
  serialNumber: 'R8K11NN',
  equipmentId: 7158,
  perm: {
    serviceType: 0,
    setPerformer: 0,
    comment: 0,
    status: 0,
    partOrder: { needPart: [Object], generalPart: [Object] },
    instPart: { addition: 0 }
  }
}
[2019-07-18 11:35:30.978] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:30.978] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 136554; 1ms
[2019-07-18 11:35:30.980] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/tickets/tree/136554?userId=1 200 39ms 1.3kb
[2019-07-18 11:35:32.028] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/comments?ticketId=174023&userId=1
[2019-07-18 11:35:32.030] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 11:35:32.031] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:32.032] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 1ms
[2019-07-18 11:35:32.032] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 11:35:32.055] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:32.055] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `comment`.`id`, `comment`.`orderid` AS `ticketId`, `comment`.`ownerid` AS `ownerId`, `comment`.`device_id` AS `deviceId`, `comment`.`commentdate` AS `date`, `comment`.`comment` AS `text`, `comment`.`comment_type` AS `type`, IF(`ticket->status`.`final` = 1, 0, IF(`comment_type` NOT IN ('0', '1'), 0, IF(`comment`.`ownerid` = 1, 1, 0))) AS `perm.edit`, `user`.`id` AS `user.id`, `user`.`name` AS `user.name`, `device`.`id` AS `device.id`, `device`.`name` AS `device.name`, `device->parent`.`id` AS `device.parent.id`, `device->parent`.`name` AS `device.parent.name` FROM `comments` AS `comment` LEFT OUTER JOIN `users` AS `user` ON `comment`.`ownerid` = `user`.`id` LEFT OUTER JOIN `devices` AS `device` ON `comment`.`device_id` = `device`.`id` LEFT OUTER JOIN `devices` AS `device->parent` ON `device`.`parent_id` = `device->parent`.`id` LEFT OUTER JOIN `orders` AS `ticket` ON `comment`.`orderid` = `ticket`.`id` LEFT OUTER JOIN `status` AS `ticket->status` ON `ticket`.`statusid` = `ticket->status`.`id` WHERE `comment`.`orderid` = '174023'; 1ms
[2019-07-18 11:35:32.056] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/comments?ticketId=174023&userId=1 200 28ms 2b
[2019-07-18 11:35:32.073] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/ticket-history?ticketId=174023
[2019-07-18 11:35:32.078] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:32.079] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `ticketHistory`.`id`, `ticketHistory`.`statustime` AS `date`, `status`.`id` AS `status.id`, `status`.`name` AS `status.name`, `status`.`final` AS `status.final`, `performer`.`id` AS `performer.id`, `performer`.`name` AS `performer.name`, `owner`.`id` AS `owner.id`, `owner`.`name` AS `owner.name`, `serviceType`.`id` AS `serviceType.id`, `serviceType`.`name` AS `serviceType.name` FROM `orderstatus` AS `ticketHistory` LEFT OUTER JOIN `status` AS `status` ON `ticketHistory`.`statusid` = `status`.`id` LEFT OUTER JOIN `users` AS `performer` ON `ticketHistory`.`performerid` = `performer`.`id` LEFT OUTER JOIN `users` AS `owner` ON `ticketHistory`.`ownerid` = `owner`.`id` LEFT OUTER JOIN `servicetype` AS `serviceType` ON `ticketHistory`.`servicetypeid` = `serviceType`.`id` WHERE `ticketHistory`.`orderid` = '174023' ORDER BY `ticketHistory`.`statustime` ASC; 2ms
[2019-07-18 11:35:32.081] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/ticket-history?ticketId=174023 200 8ms 2.09kb
[2019-07-18 11:35:32.105] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/tickets/tree/174023?userId=1
[2019-07-18 11:35:32.106] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getTree
[2019-07-18 11:35:32.107] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:32.108] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `GetTopTicketId`('174023') AS `id`; 1ms
[2019-07-18 11:35:32.109] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getParams
[2019-07-18 11:35:32.109] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 11:35:32.111] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:32.111] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 1ms
[2019-07-18 11:35:32.112] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 11:35:32.115] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:32.115] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`id` = '173738'; 1ms
[2019-07-18 11:35:32.116] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 11:35:32.117] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 0,
  'perm--setPerformer': 0,
  'perm--comment': 0,
  'perm--status': 0,
  'perm--partOrder--needPart--addition': 0,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 0,
  id: 173738,
  number: 'L626SW-14',
  typeId: 4,
  statusId: 7,
  vendorId: 5,
  date: '2014-02-10',
  customerId: 2827,
  serviceTypeId: 8,
  performerId: 162,
  commonFieldString: null,
  cityId: 4,
  serialNumber: null,
  equipmentId: 10628
}
[2019-07-18 11:35:32.118] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 11:35:32.118] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 0,
  'perm--setPerformer': 0,
  'perm--comment': 0,
  'perm--status': 0,
  'perm--partOrder--needPart--addition': 0,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 0,
  id: 173738,
  number: 'L626SW-14',
  typeId: 4,
  statusId: 7,
  vendorId: 5,
  date: '2014-02-10',
  customerId: 2827,
  serviceTypeId: 8,
  performerId: 162,
  commonFieldString: null,
  cityId: 4,
  serialNumber: null,
  equipmentId: 10628
}
[2019-07-18 11:35:32.122] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:32.122] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 173738; 1ms
[2019-07-18 11:35:32.124] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 11:35:32.124] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - [
  {
    id: 174023,
    number: 'L693PW-14',
    typeId: 3,
    statusId: 7,
    vendorId: 5,
    date: '2014-02-11',
    customerId: 2827,
    serviceTypeId: 9,
    performerId: 152,
    commonFieldString: '8002632482/7021051478 ремонт б/з',
    cityId: 4,
    serialNumber: 'WB13285702',
    equipmentId: 10628,
    perm: {
      serviceType: 0,
      setPerformer: 0,
      comment: 0,
      status: 0,
      partOrder: [Object],
      instPart: [Object]
    }
  }
]
[2019-07-18 11:35:32.125] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 11:35:32.126] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  id: 174023,
  number: 'L693PW-14',
  typeId: 3,
  statusId: 7,
  vendorId: 5,
  date: '2014-02-11',
  customerId: 2827,
  serviceTypeId: 9,
  performerId: 152,
  commonFieldString: '8002632482/7021051478 ремонт б/з',
  cityId: 4,
  serialNumber: 'WB13285702',
  equipmentId: 10628,
  perm: {
    serviceType: 0,
    setPerformer: 0,
    comment: 0,
    status: 0,
    partOrder: { needPart: [Object], generalPart: [Object] },
    instPart: { addition: 0 }
  }
}
[2019-07-18 11:35:32.129] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:32.130] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 174023; 1ms
[2019-07-18 11:35:32.132] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/tickets/tree/174023?userId=1 200 27ms 1.32kb
[2019-07-18 11:35:58.215] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/comments?ticketId=420812&userId=1
[2019-07-18 11:35:58.216] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 11:35:58.221] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:58.221] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 1ms
[2019-07-18 11:35:58.222] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 11:35:58.233] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:58.243] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `comment`.`id`, `comment`.`orderid` AS `ticketId`, `comment`.`ownerid` AS `ownerId`, `comment`.`device_id` AS `deviceId`, `comment`.`commentdate` AS `date`, `comment`.`comment` AS `text`, `comment`.`comment_type` AS `type`, IF(`ticket->status`.`final` = 1, 0, IF(`comment_type` NOT IN ('0', '1'), 0, IF(`comment`.`ownerid` = 1, 1, 0))) AS `perm.edit`, `user`.`id` AS `user.id`, `user`.`name` AS `user.name`, `device`.`id` AS `device.id`, `device`.`name` AS `device.name`, `device->parent`.`id` AS `device.parent.id`, `device->parent`.`name` AS `device.parent.name` FROM `comments` AS `comment` LEFT OUTER JOIN `users` AS `user` ON `comment`.`ownerid` = `user`.`id` LEFT OUTER JOIN `devices` AS `device` ON `comment`.`device_id` = `device`.`id` LEFT OUTER JOIN `devices` AS `device->parent` ON `device`.`parent_id` = `device->parent`.`id` LEFT OUTER JOIN `orders` AS `ticket` ON `comment`.`orderid` = `ticket`.`id` LEFT OUTER JOIN `status` AS `ticket->status` ON `ticket`.`statusid` = `ticket->status`.`id` WHERE `comment`.`orderid` = '420812'; 2ms
[2019-07-18 11:35:58.247] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/comments?ticketId=420812&userId=1 200 32ms 6.05kb
[2019-07-18 11:35:58.263] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/ticket-history?ticketId=420812
[2019-07-18 11:35:58.267] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:58.267] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `ticketHistory`.`id`, `ticketHistory`.`statustime` AS `date`, `status`.`id` AS `status.id`, `status`.`name` AS `status.name`, `status`.`final` AS `status.final`, `performer`.`id` AS `performer.id`, `performer`.`name` AS `performer.name`, `owner`.`id` AS `owner.id`, `owner`.`name` AS `owner.name`, `serviceType`.`id` AS `serviceType.id`, `serviceType`.`name` AS `serviceType.name` FROM `orderstatus` AS `ticketHistory` LEFT OUTER JOIN `status` AS `status` ON `ticketHistory`.`statusid` = `status`.`id` LEFT OUTER JOIN `users` AS `performer` ON `ticketHistory`.`performerid` = `performer`.`id` LEFT OUTER JOIN `users` AS `owner` ON `ticketHistory`.`ownerid` = `owner`.`id` LEFT OUTER JOIN `servicetype` AS `serviceType` ON `ticketHistory`.`servicetypeid` = `serviceType`.`id` WHERE `ticketHistory`.`orderid` = '420812' ORDER BY `ticketHistory`.`statustime` ASC; 2ms
[2019-07-18 11:35:58.272] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/ticket-history?ticketId=420812 200 9ms 3.29kb
[2019-07-18 11:35:58.298] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/tickets/tree/420812?userId=1
[2019-07-18 11:35:58.301] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getTree
[2019-07-18 11:35:58.304] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:58.304] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `GetTopTicketId`('420812') AS `id`; 2ms
[2019-07-18 11:35:58.305] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getParams
[2019-07-18 11:35:58.305] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 11:35:58.307] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:58.308] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 1ms
[2019-07-18 11:35:58.311] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 11:35:58.332] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:58.332] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`id` = '420812'; 2ms
[2019-07-18 11:35:58.333] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 11:35:58.334] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 0,
  'perm--setPerformer': 0,
  'perm--comment': 0,
  'perm--status': 0,
  'perm--partOrder--needPart--addition': 0,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 0,
  id: 420812,
  number: 'L693SW-17',
  typeId: 4,
  statusId: 7,
  vendorId: 5,
  date: '2017-07-03',
  customerId: 9052,
  serviceTypeId: 3,
  performerId: 181,
  commonFieldString: null,
  cityId: 2,
  serialNumber: null,
  equipmentId: 23884
}
[2019-07-18 11:35:58.335] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 11:35:58.335] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 0,
  'perm--setPerformer': 0,
  'perm--comment': 0,
  'perm--status': 0,
  'perm--partOrder--needPart--addition': 0,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 0,
  id: 420812,
  number: 'L693SW-17',
  typeId: 4,
  statusId: 7,
  vendorId: 5,
  date: '2017-07-03',
  customerId: 9052,
  serviceTypeId: 3,
  performerId: 181,
  commonFieldString: null,
  cityId: 2,
  serialNumber: null,
  equipmentId: 23884
}
[2019-07-18 11:35:58.338] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:58.338] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 420812; 1ms
[2019-07-18 11:35:58.339] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 11:35:58.340] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - [
  {
    id: 420815,
    number: 'L706QW-17',
    typeId: 5,
    statusId: 7,
    vendorId: 5,
    date: '2017-07-03',
    customerId: 9052,
    serviceTypeId: 9,
    performerId: 74,
    commonFieldString: null,
    cityId: 2,
    serialNumber: null,
    equipmentId: null,
    perm: {
      serviceType: 0,
      setPerformer: 0,
      comment: 0,
      status: 0,
      partOrder: [Object],
      instPart: [Object]
    }
  },
  {
    id: 430437,
    number: 'L298T-17',
    typeId: 7,
    statusId: 19,
    vendorId: 5,
    date: '2017-08-14',
    customerId: 12,
    serviceTypeId: 3,
    performerId: 11,
    commonFieldString: null,
    cityId: 2,
    serialNumber: null,
    equipmentId: 0,
    perm: {
      serviceType: 0,
      setPerformer: 0,
      comment: 0,
      status: 0,
      partOrder: [Object],
      instPart: [Object]
    }
  }
]
[2019-07-18 11:35:58.341] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 11:35:58.341] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  id: 420815,
  number: 'L706QW-17',
  typeId: 5,
  statusId: 7,
  vendorId: 5,
  date: '2017-07-03',
  customerId: 9052,
  serviceTypeId: 9,
  performerId: 74,
  commonFieldString: null,
  cityId: 2,
  serialNumber: null,
  equipmentId: null,
  perm: {
    serviceType: 0,
    setPerformer: 0,
    comment: 0,
    status: 0,
    partOrder: { needPart: [Object], generalPart: [Object] },
    instPart: { addition: 0 }
  }
}
[2019-07-18 11:35:58.344] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:58.344] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 420815; 1ms
[2019-07-18 11:35:58.345] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 11:35:58.346] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  id: 430437,
  number: 'L298T-17',
  typeId: 7,
  statusId: 19,
  vendorId: 5,
  date: '2017-08-14',
  customerId: 12,
  serviceTypeId: 3,
  performerId: 11,
  commonFieldString: null,
  cityId: 2,
  serialNumber: null,
  equipmentId: 0,
  perm: {
    serviceType: 0,
    setPerformer: 0,
    comment: 0,
    status: 0,
    partOrder: { needPart: [Object], generalPart: [Object] },
    instPart: { addition: 0 }
  }
}
[2019-07-18 11:35:58.349] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:35:58.349] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 430437; 1ms
[2019-07-18 11:35:58.351] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/tickets/tree/420812?userId=1 200 53ms 1.98kb
[2019-07-18 11:36:02.843] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/comments?ticketId=420078&userId=1
[2019-07-18 11:36:02.844] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 11:36:02.848] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:36:02.849] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 2ms
[2019-07-18 11:36:02.849] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 11:36:02.874] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:36:02.875] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `comment`.`id`, `comment`.`orderid` AS `ticketId`, `comment`.`ownerid` AS `ownerId`, `comment`.`device_id` AS `deviceId`, `comment`.`commentdate` AS `date`, `comment`.`comment` AS `text`, `comment`.`comment_type` AS `type`, IF(`ticket->status`.`final` = 1, 0, IF(`comment_type` NOT IN ('0', '1'), 0, IF(`comment`.`ownerid` = 1, 1, 0))) AS `perm.edit`, `user`.`id` AS `user.id`, `user`.`name` AS `user.name`, `device`.`id` AS `device.id`, `device`.`name` AS `device.name`, `device->parent`.`id` AS `device.parent.id`, `device->parent`.`name` AS `device.parent.name` FROM `comments` AS `comment` LEFT OUTER JOIN `users` AS `user` ON `comment`.`ownerid` = `user`.`id` LEFT OUTER JOIN `devices` AS `device` ON `comment`.`device_id` = `device`.`id` LEFT OUTER JOIN `devices` AS `device->parent` ON `device`.`parent_id` = `device->parent`.`id` LEFT OUTER JOIN `orders` AS `ticket` ON `comment`.`orderid` = `ticket`.`id` LEFT OUTER JOIN `status` AS `ticket->status` ON `ticket`.`statusid` = `ticket->status`.`id` WHERE `comment`.`orderid` = '420078'; 1ms
[2019-07-18 11:36:02.876] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/comments?ticketId=420078&userId=1 200 33ms 292b
[2019-07-18 11:36:02.891] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/ticket-history?ticketId=420078
[2019-07-18 11:36:02.895] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:36:02.895] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `ticketHistory`.`id`, `ticketHistory`.`statustime` AS `date`, `status`.`id` AS `status.id`, `status`.`name` AS `status.name`, `status`.`final` AS `status.final`, `performer`.`id` AS `performer.id`, `performer`.`name` AS `performer.name`, `owner`.`id` AS `owner.id`, `owner`.`name` AS `owner.name`, `serviceType`.`id` AS `serviceType.id`, `serviceType`.`name` AS `serviceType.name` FROM `orderstatus` AS `ticketHistory` LEFT OUTER JOIN `status` AS `status` ON `ticketHistory`.`statusid` = `status`.`id` LEFT OUTER JOIN `users` AS `performer` ON `ticketHistory`.`performerid` = `performer`.`id` LEFT OUTER JOIN `users` AS `owner` ON `ticketHistory`.`ownerid` = `owner`.`id` LEFT OUTER JOIN `servicetype` AS `serviceType` ON `ticketHistory`.`servicetypeid` = `serviceType`.`id` WHERE `ticketHistory`.`orderid` = '420078' ORDER BY `ticketHistory`.`statustime` ASC; 2ms
[2019-07-18 11:36:02.898] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/ticket-history?ticketId=420078 200 7ms 2.63kb
[2019-07-18 11:36:02.917] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/tickets/tree/420078?userId=1
[2019-07-18 11:36:02.918] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getTree
[2019-07-18 11:36:02.919] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:36:02.920] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `GetTopTicketId`('420078') AS `id`; 0ms
[2019-07-18 11:36:02.921] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getParams
[2019-07-18 11:36:02.921] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 11:36:02.922] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:36:02.923] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 0ms
[2019-07-18 11:36:02.925] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 11:36:02.927] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:36:02.928] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`id` = '420057'; 1ms
[2019-07-18 11:36:02.931] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 11:36:02.931] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 0,
  'perm--setPerformer': 0,
  'perm--comment': 0,
  'perm--status': 0,
  'perm--partOrder--needPart--addition': 0,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 0,
  id: 420057,
  number: 'L684SW-17',
  typeId: 4,
  statusId: 7,
  vendorId: 5,
  date: '2017-06-30',
  customerId: 9032,
  serviceTypeId: 3,
  performerId: 206,
  commonFieldString: null,
  cityId: 4,
  serialNumber: null,
  equipmentId: 23804
}
[2019-07-18 11:36:02.932] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 11:36:02.932] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 0,
  'perm--setPerformer': 0,
  'perm--comment': 0,
  'perm--status': 0,
  'perm--partOrder--needPart--addition': 0,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 0,
  id: 420057,
  number: 'L684SW-17',
  typeId: 4,
  statusId: 7,
  vendorId: 5,
  date: '2017-06-30',
  customerId: 9032,
  serviceTypeId: 3,
  performerId: 206,
  commonFieldString: null,
  cityId: 4,
  serialNumber: null,
  equipmentId: 23804
}
[2019-07-18 11:36:02.935] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:36:02.936] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 420057; 1ms
[2019-07-18 11:36:02.937] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 11:36:02.937] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - [
  {
    id: 420078,
    number: 'L693QW-17',
    typeId: 5,
    statusId: 7,
    vendorId: 5,
    date: '2017-06-30',
    customerId: 9032,
    serviceTypeId: 9,
    performerId: 74,
    commonFieldString: null,
    cityId: 4,
    serialNumber: null,
    equipmentId: null,
    perm: {
      serviceType: 0,
      setPerformer: 0,
      comment: 0,
      status: 0,
      partOrder: [Object],
      instPart: [Object]
    }
  },
  {
    id: 424523,
    number: 'L254T-17',
    typeId: 7,
    statusId: 19,
    vendorId: 5,
    date: '2017-07-19',
    customerId: 12,
    serviceTypeId: 9,
    performerId: 206,
    commonFieldString: null,
    cityId: 4,
    serialNumber: null,
    equipmentId: 0,
    perm: {
      serviceType: 0,
      setPerformer: 0,
      comment: 0,
      status: 0,
      partOrder: [Object],
      instPart: [Object]
    }
  }
]
[2019-07-18 11:36:02.939] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 11:36:02.939] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  id: 420078,
  number: 'L693QW-17',
  typeId: 5,
  statusId: 7,
  vendorId: 5,
  date: '2017-06-30',
  customerId: 9032,
  serviceTypeId: 9,
  performerId: 74,
  commonFieldString: null,
  cityId: 4,
  serialNumber: null,
  equipmentId: null,
  perm: {
    serviceType: 0,
    setPerformer: 0,
    comment: 0,
    status: 0,
    partOrder: { needPart: [Object], generalPart: [Object] },
    instPart: { addition: 0 }
  }
}
[2019-07-18 11:36:02.958] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:36:02.958] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 420078; 3ms
[2019-07-18 11:36:02.960] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 11:36:02.960] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  id: 424523,
  number: 'L254T-17',
  typeId: 7,
  statusId: 19,
  vendorId: 5,
  date: '2017-07-19',
  customerId: 12,
  serviceTypeId: 9,
  performerId: 206,
  commonFieldString: null,
  cityId: 4,
  serialNumber: null,
  equipmentId: 0,
  perm: {
    serviceType: 0,
    setPerformer: 0,
    comment: 0,
    status: 0,
    partOrder: { needPart: [Object], generalPart: [Object] },
    instPart: { addition: 0 }
  }
}
[2019-07-18 11:36:02.964] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:36:02.964] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 424523; 1ms
[2019-07-18 11:36:02.966] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/tickets/tree/420078?userId=1 200 49ms 1.98kb
[2019-07-18 11:36:06.326] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/comments?ticketId=322588&userId=1
[2019-07-18 11:36:06.327] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 11:36:06.328] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:36:06.329] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 0ms
[2019-07-18 11:36:06.330] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 11:36:06.342] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:36:06.343] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `comment`.`id`, `comment`.`orderid` AS `ticketId`, `comment`.`ownerid` AS `ownerId`, `comment`.`device_id` AS `deviceId`, `comment`.`commentdate` AS `date`, `comment`.`comment` AS `text`, `comment`.`comment_type` AS `type`, IF(`ticket->status`.`final` = 1, 0, IF(`comment_type` NOT IN ('0', '1'), 0, IF(`comment`.`ownerid` = 1, 1, 0))) AS `perm.edit`, `user`.`id` AS `user.id`, `user`.`name` AS `user.name`, `device`.`id` AS `device.id`, `device`.`name` AS `device.name`, `device->parent`.`id` AS `device.parent.id`, `device->parent`.`name` AS `device.parent.name` FROM `comments` AS `comment` LEFT OUTER JOIN `users` AS `user` ON `comment`.`ownerid` = `user`.`id` LEFT OUTER JOIN `devices` AS `device` ON `comment`.`device_id` = `device`.`id` LEFT OUTER JOIN `devices` AS `device->parent` ON `device`.`parent_id` = `device->parent`.`id` LEFT OUTER JOIN `orders` AS `ticket` ON `comment`.`orderid` = `ticket`.`id` LEFT OUTER JOIN `status` AS `ticket->status` ON `ticket`.`statusid` = `ticket->status`.`id` WHERE `comment`.`orderid` = '322588'; 4ms
[2019-07-18 11:36:06.345] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/comments?ticketId=322588&userId=1 200 19ms 1.84kb
[2019-07-18 11:36:06.363] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/ticket-history?ticketId=322588
[2019-07-18 11:36:06.372] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:36:06.373] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `ticketHistory`.`id`, `ticketHistory`.`statustime` AS `date`, `status`.`id` AS `status.id`, `status`.`name` AS `status.name`, `status`.`final` AS `status.final`, `performer`.`id` AS `performer.id`, `performer`.`name` AS `performer.name`, `owner`.`id` AS `owner.id`, `owner`.`name` AS `owner.name`, `serviceType`.`id` AS `serviceType.id`, `serviceType`.`name` AS `serviceType.name` FROM `orderstatus` AS `ticketHistory` LEFT OUTER JOIN `status` AS `status` ON `ticketHistory`.`statusid` = `status`.`id` LEFT OUTER JOIN `users` AS `performer` ON `ticketHistory`.`performerid` = `performer`.`id` LEFT OUTER JOIN `users` AS `owner` ON `ticketHistory`.`ownerid` = `owner`.`id` LEFT OUTER JOIN `servicetype` AS `serviceType` ON `ticketHistory`.`servicetypeid` = `serviceType`.`id` WHERE `ticketHistory`.`orderid` = '322588' ORDER BY `ticketHistory`.`statustime` ASC; 7ms
[2019-07-18 11:36:06.375] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/ticket-history?ticketId=322588 200 12ms 3.21kb
[2019-07-18 11:36:06.398] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/tickets/tree/322588?userId=1
[2019-07-18 11:36:06.400] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getTree
[2019-07-18 11:36:06.401] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:36:06.402] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `GetTopTicketId`('322588') AS `id`; 0ms
[2019-07-18 11:36:06.402] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getParams
[2019-07-18 11:36:06.403] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 11:36:06.404] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:36:06.405] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 1ms
[2019-07-18 11:36:06.406] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 11:36:06.409] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:36:06.409] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`id` = '322588'; 1ms
[2019-07-18 11:36:06.411] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 11:36:06.411] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 0,
  'perm--setPerformer': 0,
  'perm--comment': 0,
  'perm--status': 0,
  'perm--partOrder--needPart--addition': 0,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 0,
  id: 322588,
  number: 'L693SW-16',
  typeId: 4,
  statusId: 7,
  vendorId: 5,
  date: '2016-05-04',
  customerId: 6653,
  serviceTypeId: 3,
  performerId: 166,
  commonFieldString: null,
  cityId: 7,
  serialNumber: null,
  equipmentId: 21285
}
[2019-07-18 11:36:06.412] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 11:36:06.412] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 0,
  'perm--setPerformer': 0,
  'perm--comment': 0,
  'perm--status': 0,
  'perm--partOrder--needPart--addition': 0,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 0,
  id: 322588,
  number: 'L693SW-16',
  typeId: 4,
  statusId: 7,
  vendorId: 5,
  date: '2016-05-04',
  customerId: 6653,
  serviceTypeId: 3,
  performerId: 166,
  commonFieldString: null,
  cityId: 7,
  serialNumber: null,
  equipmentId: 21285
}
[2019-07-18 11:36:06.416] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:36:06.416] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 322588; 1ms
[2019-07-18 11:36:06.417] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 11:36:06.417] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - [
  {
    id: 322617,
    number: 'L786PW-16',
    typeId: 3,
    statusId: 7,
    vendorId: 5,
    date: '2016-05-04',
    customerId: 6653,
    serviceTypeId: 9,
    performerId: 75,
    commonFieldString: '7023377925',
    cityId: 7,
    serialNumber: 'PC02WTCC',
    equipmentId: 21285,
    perm: {
      serviceType: 0,
      setPerformer: 0,
      comment: 0,
      status: 0,
      partOrder: [Object],
      instPart: [Object]
    }
  }
]
[2019-07-18 11:36:06.418] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 11:36:06.418] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  id: 322617,
  number: 'L786PW-16',
  typeId: 3,
  statusId: 7,
  vendorId: 5,
  date: '2016-05-04',
  customerId: 6653,
  serviceTypeId: 9,
  performerId: 75,
  commonFieldString: '7023377925',
  cityId: 7,
  serialNumber: 'PC02WTCC',
  equipmentId: 21285,
  perm: {
    serviceType: 0,
    setPerformer: 0,
    comment: 0,
    status: 0,
    partOrder: { needPart: [Object], generalPart: [Object] },
    instPart: { addition: 0 }
  }
}
[2019-07-18 11:36:06.422] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:36:06.422] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 322617; 1ms
[2019-07-18 11:36:06.424] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/tickets/tree/322588?userId=1 200 26ms 1.29kb
[2019-07-18 11:36:09.240] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/comments?ticketId=319499&userId=1
[2019-07-18 11:36:09.243] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 11:36:09.246] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:36:09.247] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 0ms
[2019-07-18 11:36:09.248] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 11:36:09.257] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:36:09.257] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `comment`.`id`, `comment`.`orderid` AS `ticketId`, `comment`.`ownerid` AS `ownerId`, `comment`.`device_id` AS `deviceId`, `comment`.`commentdate` AS `date`, `comment`.`comment` AS `text`, `comment`.`comment_type` AS `type`, IF(`ticket->status`.`final` = 1, 0, IF(`comment_type` NOT IN ('0', '1'), 0, IF(`comment`.`ownerid` = 1, 1, 0))) AS `perm.edit`, `user`.`id` AS `user.id`, `user`.`name` AS `user.name`, `device`.`id` AS `device.id`, `device`.`name` AS `device.name`, `device->parent`.`id` AS `device.parent.id`, `device->parent`.`name` AS `device.parent.name` FROM `comments` AS `comment` LEFT OUTER JOIN `users` AS `user` ON `comment`.`ownerid` = `user`.`id` LEFT OUTER JOIN `devices` AS `device` ON `comment`.`device_id` = `device`.`id` LEFT OUTER JOIN `devices` AS `device->parent` ON `device`.`parent_id` = `device->parent`.`id` LEFT OUTER JOIN `orders` AS `ticket` ON `comment`.`orderid` = `ticket`.`id` LEFT OUTER JOIN `status` AS `ticket->status` ON `ticket`.`statusid` = `ticket->status`.`id` WHERE `comment`.`orderid` = '319499'; 1ms
[2019-07-18 11:36:09.259] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/comments?ticketId=319499&userId=1 200 19ms 2b
[2019-07-18 11:36:09.275] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/ticket-history?ticketId=319499
[2019-07-18 11:36:09.281] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:36:09.292] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `ticketHistory`.`id`, `ticketHistory`.`statustime` AS `date`, `status`.`id` AS `status.id`, `status`.`name` AS `status.name`, `status`.`final` AS `status.final`, `performer`.`id` AS `performer.id`, `performer`.`name` AS `performer.name`, `owner`.`id` AS `owner.id`, `owner`.`name` AS `owner.name`, `serviceType`.`id` AS `serviceType.id`, `serviceType`.`name` AS `serviceType.name` FROM `orderstatus` AS `ticketHistory` LEFT OUTER JOIN `status` AS `status` ON `ticketHistory`.`statusid` = `status`.`id` LEFT OUTER JOIN `users` AS `performer` ON `ticketHistory`.`performerid` = `performer`.`id` LEFT OUTER JOIN `users` AS `owner` ON `ticketHistory`.`ownerid` = `owner`.`id` LEFT OUTER JOIN `servicetype` AS `serviceType` ON `ticketHistory`.`servicetypeid` = `serviceType`.`id` WHERE `ticketHistory`.`orderid` = '319499' ORDER BY `ticketHistory`.`statustime` ASC; 3ms
[2019-07-18 11:36:09.294] [Level { level: 20000, levelStr: 'INFO' }] [default] -   <-- GET /api/v1/ticket-history?ticketId=319499 200 19ms 2.84kb
[2019-07-18 11:36:09.314] [Level { level: 20000, levelStr: 'INFO' }] [default] -   --> GET /api/v1/tickets/tree/319499?userId=1
[2019-07-18 11:36:09.315] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getTree
[2019-07-18 11:36:09.316] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:36:09.317] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT `GetTopTicketId`('319499') AS `id`; 1ms
[2019-07-18 11:36:09.318] [Level { level: 20000, levelStr: 'INFO' }] [default] - Ticket.getParams
[2019-07-18 11:36:09.319] [Level { level: 20000, levelStr: 'INFO' }] [default] - User.getUserRole
[2019-07-18 11:36:09.334] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:36:09.334] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT
    MAX(g.weight) `role`
FROM groups g
INNER JOIN users u ON u.id = '1'
WHERE
    g.weight < 8 
    AND u.blocked = 0
    AND FIND_IN_SET('1', g.userslist) > 0
; 1ms
[2019-07-18 11:36:09.335] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - role: 7
[2019-07-18 11:36:09.337] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:36:09.338] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`id` = '319497'; 1ms
[2019-07-18 11:36:09.339] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 11:36:09.339] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 0,
  'perm--setPerformer': 0,
  'perm--comment': 0,
  'perm--status': 0,
  'perm--partOrder--needPart--addition': 0,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 0,
  id: 319497,
  number: 'L614SW-16',
  typeId: 4,
  statusId: 7,
  vendorId: 5,
  date: '2016-04-18',
  customerId: 8148,
  serviceTypeId: 3,
  performerId: 170,
  commonFieldString: null,
  cityId: 12,
  serialNumber: null,
  equipmentId: 21178
}
[2019-07-18 11:36:09.340] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 11:36:09.340] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  'perm--serviceType': 0,
  'perm--setPerformer': 0,
  'perm--comment': 0,
  'perm--status': 0,
  'perm--partOrder--needPart--addition': 0,
  'perm--partOrder--generalPart--addition': 0,
  'perm--partOrder--generalPart--editing': 0,
  'perm--instPart--addition': 0,
  id: 319497,
  number: 'L614SW-16',
  typeId: 4,
  statusId: 7,
  vendorId: 5,
  date: '2016-04-18',
  customerId: 8148,
  serviceTypeId: 3,
  performerId: 170,
  commonFieldString: null,
  cityId: 12,
  serialNumber: null,
  equipmentId: 21178
}
[2019-07-18 11:36:09.343] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:36:09.344] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 319497; 1ms
[2019-07-18 11:36:09.345] [Level { level: 20000, levelStr: 'INFO' }] [default] - buildTree
[2019-07-18 11:36:09.345] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - [
  {
    id: 319499,
    number: 'L693PW-16',
    typeId: 3,
    statusId: 7,
    vendorId: 5,
    date: '2016-04-18',
    customerId: 8148,
    serviceTypeId: 9,
    performerId: 75,
    commonFieldString: '7023301858',
    cityId: 12,
    serialNumber: 'PF0A2U57',
    equipmentId: 21178,
    perm: {
      serviceType: 0,
      setPerformer: 0,
      comment: 0,
      status: 0,
      partOrder: [Object],
      instPart: [Object]
    }
  }
]
[2019-07-18 11:36:09.346] [Level { level: 20000, levelStr: 'INFO' }] [default] - getChildren: 
[2019-07-18 11:36:09.346] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - {
  id: 319499,
  number: 'L693PW-16',
  typeId: 3,
  statusId: 7,
  vendorId: 5,
  date: '2016-04-18',
  customerId: 8148,
  serviceTypeId: 9,
  performerId: 75,
  commonFieldString: '7023301858',
  cityId: 12,
  serialNumber: 'PF0A2U57',
  equipmentId: 21178,
  perm: {
    serviceType: 0,
    setPerformer: 0,
    comment: 0,
    status: 0,
    partOrder: { needPart: [Object], generalPart: [Object] },
    instPart: { addition: 0 }
  }
}
[2019-07-18 11:36:09.351] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Sequelize logging:
[2019-07-18 11:36:09.351] [Level { level: 10000, levelStr: 'DEBUG' }] [default] - Executed (default): SELECT IF(`status`.`final` = 1, 0, IF(7 < 4, IF(`ticket`.`performerid` != 1, 0, IF(`ticket`.`statusid` = 22, 1, 0)), IF(`ticket`.`statusid` IN(1, 3, 5, 22), 1, 0))) AS `perm--serviceType`, IF(`status`.`final` = 1, 0, IF(7 < 4, 0, IF(`ticket`.`statusid` IN(1, 3, 4, 5, 6, 22), 1, 0))) AS `perm--setPerformer`, IF(`status`.`final` = 1, 0, IF(7 = -1, 1, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--comment`, IF(`status`.`final` = 1, 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0))) AS `perm--status`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, 1, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--needPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--addition`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(3, 5, 6), 0, IF(7 < 5, 0, IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--partOrder--generalPart--editing`, IF(`status`.`final` = 1, 0, IF(`ticket`.`ordertypeid` NOT IN(1, 4, 2), 0, IF(7 > 3, IF(7 IN(5, 6), 0, 1), IF(`ticket`.`performerid` = 1, 1, 0)))) AS `perm--instPart--addition`, `ticket`.`id`, `ticket`.`ordernumber` AS `number`, `ticket`.`ordertypeid` AS `typeId`, `ticket`.`statusid` AS `statusId`, `ticket`.`vendorid` AS `vendorId`, `ticket`.`orderdate` AS `date`, `ticket`.`customerid` AS `customerId`, `ticket`.`servicetypeid` AS `serviceTypeId`, `ticket`.`performerid` AS `performerId`, `ticket`.`sordernumber` AS `commonFieldString`, `ticket`.`cityid` AS `cityId`, `ticket`.`serialnumber` AS `serialNumber`, `ticket`.`equipmentid` AS `equipmentId` FROM `orders` AS `ticket` INNER JOIN `status` AS `status` ON `ticket`.`statusid` = `status`.`id` WHERE `ticket`.`parentorderid` = 319499; 1ms
